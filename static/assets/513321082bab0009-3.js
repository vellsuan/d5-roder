webpackJsonp([3,4,5,7],[,,,,,,,,,,,,function(t,e,i){var n,s;n=[],s=function(){var t=function(t){};return t.prototype.MD5=function(t){function e(t){return n(i(s(t)))}function i(t){return r(o(a(t),8*t.length))}function n(t){try{}catch(t){v=0}for(var e,i=v?"0123456789ABCDEF":"0123456789abcdef",n="",s=0;s<t.length;s++)e=t.charCodeAt(s),n+=i.charAt(e>>>4&15)+i.charAt(15&e);return n}function s(t){for(var e,i,n="",s=-1;++s<t.length;)e=t.charCodeAt(s),i=s+1<t.length?t.charCodeAt(s+1):0,55296<=e&&e<=56319&&56320<=i&&i<=57343&&(e=65536+((1023&e)<<10)+(1023&i),s++),e<=127?n+=String.fromCharCode(e):e<=2047?n+=String.fromCharCode(192|e>>>6&31,128|63&e):e<=65535?n+=String.fromCharCode(224|e>>>12&15,128|e>>>6&63,128|63&e):e<=2097151&&(n+=String.fromCharCode(240|e>>>18&7,128|e>>>12&63,128|e>>>6&63,128|63&e));return n}function a(t){for(var e=Array(t.length>>2),i=0;i<e.length;i++)e[i]=0;for(var i=0;i<8*t.length;i+=8)e[i>>5]|=(255&t.charCodeAt(i/8))<<i%32;return e}function r(t){for(var e="",i=0;i<32*t.length;i+=8)e+=String.fromCharCode(t[i>>5]>>>i%32&255);return e}function o(t,e){t[e>>5]|=128<<e%32,t[(e+64>>>9<<4)+14]=e;for(var i=1732584193,n=-271733879,s=-1732584194,a=271733878,r=0;r<t.length;r+=16){var o=i,l=n,f=s,v=a;i=c(i,n,s,a,t[r+0],7,-680876936),a=c(a,i,n,s,t[r+1],12,-389564586),s=c(s,a,i,n,t[r+2],17,606105819),n=c(n,s,a,i,t[r+3],22,-1044525330),i=c(i,n,s,a,t[r+4],7,-176418897),a=c(a,i,n,s,t[r+5],12,1200080426),s=c(s,a,i,n,t[r+6],17,-1473231341),n=c(n,s,a,i,t[r+7],22,-45705983),i=c(i,n,s,a,t[r+8],7,1770035416),a=c(a,i,n,s,t[r+9],12,-1958414417),s=c(s,a,i,n,t[r+10],17,-42063),n=c(n,s,a,i,t[r+11],22,-1990404162),i=c(i,n,s,a,t[r+12],7,1804603682),a=c(a,i,n,s,t[r+13],12,-40341101),s=c(s,a,i,n,t[r+14],17,-1502002290),n=c(n,s,a,i,t[r+15],22,1236535329),i=d(i,n,s,a,t[r+1],5,-165796510),a=d(a,i,n,s,t[r+6],9,-1069501632),s=d(s,a,i,n,t[r+11],14,643717713),n=d(n,s,a,i,t[r+0],20,-373897302),i=d(i,n,s,a,t[r+5],5,-701558691),a=d(a,i,n,s,t[r+10],9,38016083),s=d(s,a,i,n,t[r+15],14,-660478335),n=d(n,s,a,i,t[r+4],20,-405537848),i=d(i,n,s,a,t[r+9],5,568446438),a=d(a,i,n,s,t[r+14],9,-1019803690),s=d(s,a,i,n,t[r+3],14,-187363961),n=d(n,s,a,i,t[r+8],20,1163531501),i=d(i,n,s,a,t[r+13],5,-1444681467),a=d(a,i,n,s,t[r+2],9,-51403784),s=d(s,a,i,n,t[r+7],14,1735328473),n=d(n,s,a,i,t[r+12],20,-1926607734),i=h(i,n,s,a,t[r+5],4,-378558),a=h(a,i,n,s,t[r+8],11,-2022574463),s=h(s,a,i,n,t[r+11],16,1839030562),n=h(n,s,a,i,t[r+14],23,-35309556),i=h(i,n,s,a,t[r+1],4,-1530992060),a=h(a,i,n,s,t[r+4],11,1272893353),s=h(s,a,i,n,t[r+7],16,-155497632),n=h(n,s,a,i,t[r+10],23,-1094730640),i=h(i,n,s,a,t[r+13],4,681279174),a=h(a,i,n,s,t[r+0],11,-358537222),s=h(s,a,i,n,t[r+3],16,-722521979),n=h(n,s,a,i,t[r+6],23,76029189),i=h(i,n,s,a,t[r+9],4,-640364487),a=h(a,i,n,s,t[r+12],11,-421815835),s=h(s,a,i,n,t[r+15],16,530742520),n=h(n,s,a,i,t[r+2],23,-995338651),i=u(i,n,s,a,t[r+0],6,-198630844),a=u(a,i,n,s,t[r+7],10,1126891415),s=u(s,a,i,n,t[r+14],15,-1416354905),n=u(n,s,a,i,t[r+5],21,-57434055),i=u(i,n,s,a,t[r+12],6,1700485571),a=u(a,i,n,s,t[r+3],10,-1894986606),s=u(s,a,i,n,t[r+10],15,-1051523),n=u(n,s,a,i,t[r+1],21,-2054922799),i=u(i,n,s,a,t[r+8],6,1873313359),a=u(a,i,n,s,t[r+15],10,-30611744),s=u(s,a,i,n,t[r+6],15,-1560198380),n=u(n,s,a,i,t[r+13],21,1309151649),i=u(i,n,s,a,t[r+4],6,-145523070),a=u(a,i,n,s,t[r+11],10,-1120210379),s=u(s,a,i,n,t[r+2],15,718787259),n=u(n,s,a,i,t[r+9],21,-343485551),i=p(i,o),n=p(n,l),s=p(s,f),a=p(a,v)}return Array(i,n,s,a)}function l(t,e,i,n,s,a){return p(f(p(p(e,t),p(n,a)),s),i)}function c(t,e,i,n,s,a,r){return l(e&i|~e&n,t,e,s,a,r)}function d(t,e,i,n,s,a,r){return l(e&n|i&~n,t,e,s,a,r)}function h(t,e,i,n,s,a,r){return l(e^i^n,t,e,s,a,r)}function u(t,e,i,n,s,a,r){return l(i^(e|~n),t,e,s,a,r)}function p(t,e){var i=(65535&t)+(65535&e),n=(t>>16)+(e>>16)+(i>>16);return n<<16|65535&i}function f(t,e){return t<<e|t>>>32-e}var v=0;return e(t)},t}.apply(e,n),!(void 0!==s&&(t.exports=s))},function(t,e,i){var n,s;n=[],s=function(){return{}}.apply(e,n),!(void 0!==s&&(t.exports=s))},function(t,e,i){var n;n=function(){return{routes:{},classify:{home:"scripts/routes/home.js",Pro_con:"scripts/routes/classify/pro_con.js",Counter:"scripts/routes/classify/counter.js",Market:"scripts/routes/classify/market.js",Comment:"scripts/routes/classify/comment.js",Mar_select:"scripts/routes/classify/mar_select.js",Mar_select_two:"scripts/routes/classify/mar_select_two.js",Expert_con:"scripts/routes/classify/expert_con.js",Counsel:"scripts/routes/classify/counsel.js",Card:"scripts/routes/classify/card.js",Card_con:"scripts/routes/classify/card_con.js",Recommend:"scripts/routes/classify/recommend.js",Login:"scripts/routes/login.js"},community:{Community_hot:"scripts/routes/community_hot.js",Community:"scripts/routes/community/community.js",Post:"scripts/routes/community/post.js",Manage:"scripts/routes/community/manage.js",Collect:"scripts/routes/community/collect.js",Post_in:"scripts/routes/community/post_in.js",Post_ins:"scripts/routes/community/post_ins.js"},projects:{},postRequert:{}}}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n,s;n=[i(10)],s=function(t){var e=function(t){this.EJS={main:""},this.styles=[],this.data=t,this.jsondata=t.jsondata||{},this.jqNode=t.jqNode||"",this.init()};return e.prototype.init=function(){var e=this;t.loadEJS({jsondata:this.data,ejs_url:this.EJS.main,jq_object:this.jqNode}),$(".swap").html($(".news_li").html()),e.x=$(".news_li")||"",e.y=$(".swap")||"",e.h=19*$(".news_li li").length||0,setTimeout(function(){e.sold.apply(e,[])},3e3)},e.prototype.sold=function(){var t=this,e=parseInt(t.x.css("top"));if(t.y.css("top","19px"),t.x.animate({top:e-19+"px"},"slow"),Math.abs(e)==t.h-19){t.y.animate({top:"0px"},"slow");var i=t.x;t.x=t.y,t.y=i}setTimeout(function(){t.sold.apply(t,[])},3e3)},e}.apply(e,n),!(void 0!==s&&(t.exports=s))},function(t,e,i){var n,s;n=[i(10)],s=function(t){var e={};return e.appData={},e.setData=function(i,n){e.appData[i]=n||"",t.itemData(i,n)},e.getData=function(i){return e.appData[i]||t.itemData(i)||""},e.validate=function(t,e,n){var s=i(17);new s(t,e.get(0),n)},e.getService=function(t){var e={};return e[t]||(e.EleSellService=i(18),e.OrderService=i(19),e.PayService=i(20),e.CouponService=i(21),e.LoginOutService=i(22)),e[t]||{}},e.MD5=function(t){var e=i(12);return(new e).MD5(t)},e.limitCharacter=function(t,e){return Number(e)>e?t.substring(0,e):t},e.formatCurrency=function(t){t=t.toString().replace(/\$|\,/g,""),isNaN(t)&&(t="0"),sign=t==(t=Math.abs(t)),t=Math.floor(100*t+.50000000001),cents=t%100,t=Math.floor(t/100).toString(),cents<10&&(cents="0"+cents);for(var e=0;e<Math.floor((t.length-(1+e))/3);e++)t=t.substring(0,t.length-(4*e+3))+","+t.substring(t.length-(4*e+3));return(sign?"":"-")+t+"."+cents},e.formatCurrencyTenThou=function(t){t=t.toString().replace(/\$|\,/g,""),isNaN(t)&&(t="0"),sign=t==(t=Math.abs(t)),t=Math.floor(10*t+.50000000001),cents=t%10,t=Math.floor(t/10).toString();for(var e=0;e<Math.floor((t.length-(1+e))/3);e++)t=t.substring(0,t.length-(4*e+3))+","+t.substring(t.length-(4*e+3));return(sign?"":"-")+t+"."+cents},e.removeComma=function(t){return t?(t+"").replace(/\,/g,""):0},e.formatTime=function(t,e){var i,n,s,a,r,o,l="";if(""!=t)switch(t=new Date(parseInt(t)),i=t.getFullYear(),n=t.getMonth()+1,n+1<10&&(n="0"+n),s=t.getDate(),s<10&&(s="0"+s),a=t.getHours(),a<10&&(a="0"+a),r=t.getMinutes(),r<10&&(r="0"+r),o=t.getSeconds(),o<10&&(o="0"+o),e){case 0:l=i+n+s+a+r+o;break;case 1:l=i+"-"+n+"-"+s+" "+a+":"+r+":"+o;break;case 2:l=i+"/"+n+"/"+s+" "+a+":"+r+":"+o;break;case 3:l=i+"年"+n+"月"+s+"日"+a+"时"+r+"分"+o+"秒";break;case 4:l=i+"-"+n+"-"+s;break;case 5:l=i+"_"+n+"_"+s+" "+a+"_"+r+"_"+o;break;case 6:l=n+"/"+s;break;case 7:l=a+":"+r+":"+o}return l},window.Util=e,e}.apply(e,n),!(void 0!==s&&(t.exports=s))},function(t,e,i){var n,s;n=[i(10)],s=function(t){var e=function(t,e,i){this.elem=e,this.options=t,this.opt={tips_required:"不能为空",tips_email:"邮箱地址格式有误",tips_num:"请填写数字",tips_chinese:"请填写中文",tips_mobile:"格式有误",tips_idcard:"身份证号码格式有误",tips_pwdequal:"两次密码不一致",tips_ajax:"信息已经存在",tips_numletter:"请输入数字和字母的组合字符",tips_length:"",tips_passport:"护照格式有误",tips_currency:"金额格式有误",reg_email:/^\w+\@[a-zA-Z0-9]+\.[a-zA-Z]{2,4}$/i,reg_num:/^\d+$/,reg_currency:/^([1-9]\d{0,9}|0)([.]?|(\.\d{1,2})?)$/,reg_chinese:/^[\u4E00-\u9FA5]+$/,reg_mobile:/^1[34578]{1}[0-9]{9}$/,reg_idcard:/^\d{14}\d{3}?\w$/,reg_numletter:/[^\d|chun]/,reg_passport:/^1[45][0-9]{7}|G[0-9]{8}|P[0-9]{7}|S[0-9]{7,8}|D[0-9]+$/},this.options=$.extend(this.opt);var n=this.validate();i&&i(n)};return e.prototype={validate:function(){_this=this;var t=!0,e=[];return $(_this.elem).find("input,textarea").each(function(){var i=$(this).attr("check");if(i){for(var n=i.split(" "),s=0;s<n.length;s++)if(!_this.check($(this),n[s],$(this))){t=!1;break}e.push(t)}}),t},check:function(t,e,i){var n=$.trim($(i).val());switch(e){case"required":return!!n||_this.showErrorMsg(t,this.opt.tips_required,!1);case"email":return!!_this.regmatch(n,this.opt.reg_email)||_this.showErrorMsg(t,this.opt.tips_email,!1);case"num":return!!_this.regmatch(n,this.opt.reg_num)||_this.showErrorMsg(t,this.opt.tips_num,!1);case"currency":return!!_this.regmatch(n,this.opt.reg_currency)||_this.showErrorMsg(t,this.opt.tips_currency,!1);case"chinese":case"mobile":return!!_this.regmatch(n,this.opt.reg_mobile)||_this.showErrorMsg(t,this.opt.tips_mobile,!1);case"idcard":return!!_this.regmatch(n,this.opt.reg_idcard)||_this.showErrorMsg(t,this.opt.tips_idcard,!1);case"numletter":return!!_this.regmatch(n,this.opt.reg_numletter)||_this.showErrorMsg(t,this.opt.tips_numletter,!1);case"passport":return!!_this.regmatch(n,this.opt.reg_passport)||_this.showErrorMsg(t,this.opt.tips_passport,!1);case"pwd1":return pwd1=n,!0;case"pwd2":return!!_this.pwdEqual(n,pwd1)||_this.showErrorMsg(t,this.opt.tips_pwdequal,!1);case"ajaxvalid":return!!_this.ajaxValidate(n,$(i).attr("ajaxurl"))||_this.showErrorMsg(t,this.opt.tips_ajax,!1);case"length":return!!_this.pwdEqual(n,i)||_this.showErrorMsg(t,this.opt.tips_length,!1);default:return!0}},pwdEqual:function(t,e){return t===e},regmatch:function(t,e){return""===t||e.test(t)},chekLength:function(e,i){var n=!0;if($(i).attr("min")!==!1&&str.length<parseInt($(i).attr("min"))){var s="至少输入"+$(i).attr("min")+"位字符！";t.showDialog(s),n=!1}if($(i).attr("max")!==!1&&str.length>parseInt($(i).attr("max"))){var s="最多输入"+$(i).attr("max")+"位字符！";t.showDialog(s),n=!1}return n},ajaxValidate:function(t,e){var i=!1;return $.ajax({type:"POST",url:e,data:{value:t},dataType:"json",timeout:300,async:!1,success:function(t){this.opt.tips_ajax=t.Message,i=t.Success},error:function(t,e){}}),i},showErrorMsg:function(e,i,n){if(!n){var s=$(e).attr("title")+i+"！";t.showDialog(s)}return n}},e}.apply(e,n),!(void 0!==s&&(t.exports=s))},function(t,e,i){var n,s;n=[i(10),i(16)],s=function(t,e){var i={};return i.EleSellServiceFlag={},i.txzVerification=function(e,i){var n=this;this.EleSellServiceFlag.SKY00002||(this.EleSellServiceFlag.SKY00002=!0,t.Ajax.postRequest(e,"SKY00002",!0,!1).then(function(e){n.EleSellServiceFlag.SKY00002=!1;var s=t.Ajax.dataHandle(e),a=t.Ajax.isSuccesful(e);a&&i&&i(s)}))},i.myOderList=function(e,i){var n=this;if(!this.EleSellServiceFlag.OJ910103){this.EleSellServiceFlag.OJ910103=!0;var s=t.itemData("vuex").userInfo;e.shopSn=s&&s.shop&&s.shop.shopSn||"B00019",t.Ajax.postRequest(e,"OJ910103","",!1).then(function(e){n.EleSellServiceFlag.OJ910103=!1;var s=t.Ajax.dataHandle(e),a=t.Ajax.isSuccesful(e);a&&i&&i(s)})}},i.doneOrder=function(e,i){var n=this;this.EleSellServiceFlag.OR100007||(this.EleSellServiceFlag.OR100007=!0,t.Ajax.postRequest(e,"OR100007",!0,!1).then(function(e){n.EleSellServiceFlag.OR100007=!1;var s=t.Ajax.dataHandle(e),a=t.Ajax.isSuccesful(e);a&&i&&i(s)}))},i.deBlockOrder=function(e,i){var n=this;this.EleSellServiceFlag.OJ910108||(this.EleSellServiceFlag.OJ910108=!0,t.Ajax.postRequest(e,"OJ910108",!0,!1).then(function(e){n.EleSellServiceFlag.OJ910108=!1;var s=t.Ajax.dataHandle(e),a=t.Ajax.isSuccesful(e);a&&i&&i(s)}))},i.refuseOrderReason=function(e,i){t.Ajax.postRequest(e,"OR910006","",!1).then(function(e){var n=t.Ajax.dataHandle(e),s=t.Ajax.isSuccesful(e);s&&i&&i(n)})},i.interCodeQueryProduct=function(e,i){var n=this;this.EleSellServiceFlag.PR100066||(this.EleSellServiceFlag.PR100066=!0,t.Ajax.postRequest(e,"PR100066","",!0).then(function(e){n.EleSellServiceFlag.PR100066=!1;var s=t.Ajax.dataHandle(e),a=t.Ajax.isSuccesful(e);a&&i&&i(s)}))},i.modifyOrder=function(e,i){var n=this;this.EleSellServiceFlag.OJ910101||(this.EleSellServiceFlag.OJ910101=!0,t.Ajax.postRequest(e,"OJ910101",!0,!1).then(function(e){n.EleSellServiceFlag.OJ910101=!1;var s=t.Ajax.dataHandle(e),a=t.Ajax.isSuccesful(e);a&&i&&i(s)}))},i.getMessage=function(e,i){t.Ajax.postRequest(e,"CM100006",!0,!0).then(function(e){var n=t.Ajax.dataHandle(e),s=t.Ajax.isSuccesful(e);s&&i&&i(n)})},i.addCash=function(e,i){var n=t.itemData("vuex").userInfo;e.shopSn=n&&n.shop&&n.shop.shopSn||"B00019",t.Ajax.postRequest(e,"OJ910105",!0,!0).then(function(e){var n=t.Ajax.dataHandle(e),s=t.Ajax.isSuccesful(e);s&&i&&i(n)})},i.acceptOrRefuseOrder=function(e,i,n){var s=this;this.EleSellServiceFlag.OJ910104||(this.EleSellServiceFlag.OJ910104=!0,t.Ajax.postRequest(e,"OJ910104",!0,!1).then(function(e){s.EleSellServiceFlag.OJ910104=!1;var a=t.Ajax.isSuccesful(e);if(a){var r=t.Ajax.dataHandle(e);i&&i(r)}else n&&n(e)}))},i.orderSNQueryDetail=function(e,i){var n=this,s=t.itemData("vuex").userInfo;e.shopSn=s&&s.shop&&s.shop.shopSn||"B00019",this.EleSellServiceFlag.OJ910102||(this.EleSellServiceFlag.OJ910102=!0,t.Ajax.postRequest(e,"OJ910102","",!1).then(function(e){n.EleSellServiceFlag.OJ910102=!1;var s=t.Ajax.dataHandle(e),a=t.Ajax.isSuccesful(e);a&&i&&i(s)}))},i.commodityClassification=function(e,i){var n=this,s=t.itemData("vuex").userInfo;e.shopSn=s&&s.shop&&s.shop.shopSn||"B00019",this.EleSellServiceFlag.PR100060||(this.EleSellServiceFlag.PR100060=!0,t.Ajax.postRequest(e,"PR100060",!0,!1).then(function(e){n.EleSellServiceFlag.PR100060=!1;var s=t.Ajax.dataHandle(e),a=t.Ajax.isSuccesful(e);a&&i&&i(s)}))},i.queryProductDetial=function(e,i){var n=this,s=t.itemData("vuex").userInfo;e.shopSn=s&&s.shop&&s.shop.shopSn||"B00019",this.EleSellServiceFlag.PR100002||(this.EleSellServiceFlag.PR100002=!0,t.Ajax.postRequest(e,"PR100002",!0,!1).then(function(e){n.EleSellServiceFlag.PR100002=!1;var s=t.Ajax.dataHandle(e),a=t.Ajax.isSuccesful(e);a&&i&&i(s)}))},i.printOrder=function(e,i){var n=this;this.EleSellServiceFlag.OJ910106||(this.EleSellServiceFlag.OJ910106=!0,t.Ajax.postRequest(e,"OJ910106",!0,!0).then(function(e){n.EleSellServiceFlag.OJ910106=!1;var s=t.Ajax.dataHandle(e),a=t.Ajax.isSuccesful(e);a&&i&&i(s)}))},i.exchangeList=function(e,i){var n=t.itemData("vuex").userInfo;e.shopSn=n&&n.shop&&n.shop.shopSn||"B00019",t.Ajax.postRequest(e,"RJ100000","",!1).then(function(e){var n=t.Ajax.dataHandle(e),s=t.Ajax.isSuccesful(e);s&&i&&i(n)})},i.exchangeCheck=function(e,i){var n=this;if(!this.EleSellServiceFlag.RE100202){this.EleSellServiceFlag.RE100202=!0;var s=t.itemData("vuex").userInfo;e.uuId=s.adminId,t.Ajax.postRequest(e,"RE100202",!0,!1).then(function(e){n.EleSellServiceFlag.RE100202=!1;var s=t.Ajax.dataHandle(e),a=t.Ajax.isSuccesful(e);a&&i&&i(s)})}},i.tuihuanDetail=function(e,i){var n=this;this.EleSellServiceFlag.RE100001||(this.EleSellServiceFlag.RE100001=!0,t.Ajax.postRequest(e,"RE100001","",!1).then(function(e){n.EleSellServiceFlag.RE100001=!1;var s=t.Ajax.dataHandle(e),a=t.Ajax.isSuccesful(e);a&&i&&i(s)}))},i.checkReason=function(e,i){t.Ajax.postRequest(e,"OR200201","",!1).then(function(e){var n=t.Ajax.dataHandle(e),s=t.Ajax.isSuccesful(e);s&&i&&i(n)})},i}.apply(e,n),!(void 0!==s&&(t.exports=s))},function(t,e,i){var n,s;n=[i(10),i(16)],s=function(t,e){var i={};return i.myOderList=function(i,n){var s=e.getData("userinfo");i.shopSn=s&&s.shop&&s.shop.shopSn,t.Ajax.postRequest(i,"OJ910103","",!1).then(function(e){var i=t.Ajax.dataHandle(e),s=t.Ajax.isSuccesful(e);s&&n&&n(i)})},i.waimaiReport=function(i,n){var s=e.getData("userinfo");i.shopSn=s&&s.shop&&s.shop.shopSn,t.Ajax.postRequest(i,"OJ910107","",!1).then(function(e){var i=t.Ajax.dataHandle(e),s=t.Ajax.isSuccesful(e);s&&n&&n(i)})},i.printOrder=function(e,i){t.Ajax.postRequest(e,"OJ910106","",!1).then(function(e){var n=t.Ajax.dataHandle(e),s=t.Ajax.isSuccesful(e);s&&i&&i(n)})},i}.apply(e,n),!(void 0!==s&&(t.exports=s))},function(t,e,i){var n,s;n=[i(10),i(16)],s=function(t,e){var i={};return i.pay_Amount=function(e,i){t.Ajax.postRequest(e,"PR100066").then(function(e){var n=t.Ajax.dataHandle(e),s=t.Ajax.isSuccesful(e);s&&i&i(n)})},i.pay_AmountNew=function(e,i){t.Ajax.postRequest(e,"OR100022","",!0).then(function(e){var n=t.Ajax.dataHandle(e),s=t.Ajax.isSuccesful(e);s&&i&i(n)})},i.paykeydown=function(e,i){t.Ajax.postRequest(e,"DE100018","",!0).then(function(e){var n=t.Ajax.dataHandle(e),s=t.Ajax.isSuccesful(e);s&&i&i(n)})},i.paykeydown_qsqb=function(e,i){t.Ajax.postRequest(e,"DE100024","",!0).then(function(e){var n=t.Ajax.dataHandle(e),s=t.Ajax.isSuccesful(e);s&&i&i(n)})},i.payClassification=function(e,i){t.Ajax.postRequest(e,"PR100017","",!0).then(function(e){var n=t.Ajax.dataHandle(e),s=t.Ajax.isSuccesful(e);s&&i&&i(n)})},i.queryProductDetial=function(i,n){var s=e.getData("userinfo");i.shopSn=s&&s.shop&&s.shop.shopSn,t.Ajax.postRequest(i,"PR100002",!0,!1).then(function(e){var i=t.Ajax.dataHandle(e),s=t.Ajax.isSuccesful(e);s&&n&&n(i)})},i.commodityClassification=function(i,n){var s=e.getData("userinfo");i.shopSn=s&&s.shop&&s.shop.shopSn,t.Ajax.postRequest(i,"PR100060",!0,!1).then(function(e){var i=t.Ajax.dataHandle(e),s=t.Ajax.isSuccesful(e);s&&n&&n(i)})},i.userfavourable=function(e,i){t.Ajax.postRequest(e,"CY200024").then(function(e){var n=t.Ajax.dataHandle(e),s=t.Ajax.isSuccesful(e);s&&i&&i(n)})},i.userfavourablenew=function(e,i){t.Ajax.postRequest(e,"CY200025").then(function(e){var n=t.Ajax.dataHandle(e),s=t.Ajax.isSuccesful(e);s&&i&&i(n)})},i.bindingemember=function(e,i){t.Ajax.postRequest(e,"CC100003").then(function(e){var n=t.Ajax.dataHandle(e),s=t.Ajax.isSuccesful(e);s&&i&&i(n)})},i}.apply(e,n),!(void 0!==s&&(t.exports=s))},function(t,e,i){var n,s;n=[i(10),i(16)],s=function(t,e){var i={};return i.coupon_Exchange=function(i,n){var s=e.getData("userinfo");i.shopSn=s&&s.shop&&s.shop.shopSn,t.Ajax.postRequest(i,"PR100071","",!0).then(function(e){var i=t.Ajax.dataHandle(e),s=t.Ajax.isSuccesful(e);s&&n&n(i)})},i.Usecoupon_Exchange=function(i,n){var s=e.getData("userinfo");i.shopSn=s&&s.shop&&s.shop.shopSn,t.Ajax.postRequest(i,"OR100023","",!0).then(function(e){var i=t.Ajax.dataHandle(e),s=t.Ajax.isSuccesful(e);s&&n&n(i)})},i}.apply(e,n),!(void 0!==s&&(t.exports=s))},function(t,e,i){var n,s;n=[i(10),i(16)],s=function(t,e){var i={};return i.login=function(e,i){t.Ajax.postRequest(e,"CM300101","",!1).then(function(e){var n=t.Ajax.dataHandle(e),s=t.Ajax.isSuccesful(e);s&&i&&i(n)})},i.logOut=function(i,n){var s=e.getData("userinfo");i.key=s.adminId,t.Ajax.postRequest(i,"CM300102","",!1).then(function(e){var i=t.Ajax.dataHandle(e),s=t.Ajax.isSuccesful(e);s&&n&&n(i)})},i}.apply(e,n),!(void 0!==s&&(t.exports=s))},function(t,e,i){function n(t){return i(s(t))}function s(t){return a[t]||function(){throw new Error("Cannot find module '"+t+"'.")}()}var a={"./lib/domReady":8,"./lib/domReady.js":8,"./lib/ejs":9,"./lib/ejs.js":9,"./lib/iscroll":24,"./lib/iscroll.js":24,"./lib/jquery-ui.min":3,"./lib/jquery-ui.min.js":3,"./lib/jquery.keyboard":25,"./lib/jquery.keyboard.js":25,"./lib/jquery.paginate":26,"./lib/jquery.paginate.js":26,"./lib/jquery.pagination":5,"./lib/jquery.pagination.js":5,"./lib/jquery.selectlist":7,"./lib/jquery.selectlist.js":7,"./lib/jquery.showLoading.min":6,"./lib/jquery.showLoading.min.js":6,"./lib/jquery1.8.3.min":1,"./lib/jquery1.8.3.min.js":1,"./public/MD5":12,"./public/MD5.js":12,"./public/common":10,"./public/common.js":10,"./public/dataPostUrl":13,"./public/dataPostUrl.js":13,"./public/routesUtil":14,"./public/routesUtil.js":14,"./public/trundle":15,"./public/trundle.js":15,"./public/utils":16,"./public/utils.js":16,"./routes/eleSell/index":27,"./routes/eleSell/index.js":27,"./routes/loginout/loginBusiness.js":28,"./routes/loginout/loginBusiness.js.js":28,"./routes/loginout/logout":29,"./routes/loginout/logout.js":29,"./routes/order/index":30,"./routes/order/index.js":30,"./routes/other/index":31,"./routes/other/index.js":31,"./routes/pay/index":32,"./routes/pay/index.js":32,"./routes/service/couponService":21,"./routes/service/couponService.js":21,"./routes/service/eleSellService":18,"./routes/service/eleSellService.js":18,"./routes/service/loginoutService":22,"./routes/service/loginoutService.js":22,"./routes/service/orderService":19,"./routes/service/orderService.js":19,"./routes/service/payService":20,"./routes/service/payService.js":20,"./routes/utils/validate":17,"./routes/utils/validate.js":17};n.keys=function(){return Object.keys(a)},n.resolve=s,t.exports=n,n.id=23},function(t,e,i){var n;/*! iScroll v5.2.0 ~ (c) 2008-2016 Matteo Spinelli ~ http://cubiq.org/license */
!function(s,a,r){function o(t,e){this.wrapper="string"==typeof t?a.querySelector(t):t,this.scroller=this.wrapper.children[0],this.scrollerStyle=this.scroller.style,this.options={resizeScrollbars:!0,mouseWheelSpeed:20,snapThreshold:.334,disablePointer:!h.hasPointer,disableTouch:h.hasPointer||!h.hasTouch,disableMouse:h.hasPointer||h.hasTouch,startX:0,startY:0,scrollY:!0,directionLockThreshold:5,momentum:!0,bounce:!0,bounceTime:600,bounceEasing:"",preventDefault:!0,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:!0,useTransition:!0,useTransform:!0,bindToWrapper:"undefined"==typeof s.onmousedown};for(var i in e)this.options[i]=e[i];this.translateZ=this.options.HWCompositing&&h.hasPerspective?" translateZ(0)":"",this.options.useTransition=h.hasTransition&&this.options.useTransition,this.options.useTransform=h.hasTransform&&this.options.useTransform,this.options.eventPassthrough=this.options.eventPassthrough===!0?"vertical":this.options.eventPassthrough,this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault,this.options.scrollY="vertical"!=this.options.eventPassthrough&&this.options.scrollY,this.options.scrollX="horizontal"!=this.options.eventPassthrough&&this.options.scrollX,this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough,this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold,this.options.bounceEasing="string"==typeof this.options.bounceEasing?h.ease[this.options.bounceEasing]||h.ease.circular:this.options.bounceEasing,this.options.resizePolling=void 0===this.options.resizePolling?60:this.options.resizePolling,this.options.tap===!0&&(this.options.tap="tap"),this.options.useTransition||this.options.useTransform||/relative|absolute/i.test(this.scrollerStyle.position)||(this.scrollerStyle.position="relative"),"scale"==this.options.shrinkScrollbars&&(this.options.useTransition=!1),this.options.invertWheelDirection=this.options.invertWheelDirection?-1:1,this.x=0,this.y=0,this.directionX=0,this.directionY=0,this._events={},this._init(),this.refresh(),this.scrollTo(this.options.startX,this.options.startY),this.enable()}function l(t,e,i){var n=a.createElement("div"),s=a.createElement("div");return i===!0&&(n.style.cssText="position:absolute;z-index:9999",s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px"),s.className="iScrollIndicator","h"==t?(i===!0&&(n.style.cssText+=";height:7px;left:2px;right:2px;bottom:0",s.style.height="100%"),n.className="iScrollHorizontalScrollbar"):(i===!0&&(n.style.cssText+=";width:7px;bottom:2px;top:2px;right:1px",s.style.width="100%"),n.className="iScrollVerticalScrollbar"),n.style.cssText+=";overflow:hidden",e||(n.style.pointerEvents="none"),n.appendChild(s),n}function c(t,e){this.wrapper="string"==typeof e.el?a.querySelector(e.el):e.el,this.wrapperStyle=this.wrapper.style,this.indicator=this.wrapper.children[0],this.indicatorStyle=this.indicator.style,this.scroller=t,this.options={listenX:!0,listenY:!0,interactive:!1,resize:!0,defaultScrollbars:!1,shrink:!1,fade:!1,speedRatioX:0,speedRatioY:0};for(var i in e)this.options[i]=e[i];if(this.sizeRatioX=1,this.sizeRatioY=1,this.maxPosX=0,this.maxPosY=0,this.options.interactive&&(this.options.disableTouch||(h.addEvent(this.indicator,"touchstart",this),h.addEvent(s,"touchend",this)),this.options.disablePointer||(h.addEvent(this.indicator,h.prefixPointerEvent("pointerdown"),this),h.addEvent(s,h.prefixPointerEvent("pointerup"),this)),this.options.disableMouse||(h.addEvent(this.indicator,"mousedown",this),h.addEvent(s,"mouseup",this))),this.options.fade){this.wrapperStyle[h.style.transform]=this.scroller.translateZ;var n=h.style.transitionDuration;if(!n)return;this.wrapperStyle[n]=h.isBadAndroid?"0.0001ms":"0ms";var r=this;h.isBadAndroid&&d(function(){"0.0001ms"===r.wrapperStyle[n]&&(r.wrapperStyle[n]="0s")}),this.wrapperStyle.opacity="0"}}var d=s.requestAnimationFrame||s.webkitRequestAnimationFrame||s.mozRequestAnimationFrame||s.oRequestAnimationFrame||s.msRequestAnimationFrame||function(t){s.setTimeout(t,1e3/60)},h=function(){function t(t){return n!==!1&&(""===n?t:n+t.charAt(0).toUpperCase()+t.substr(1))}var e={},i=a.createElement("div").style,n=function(){for(var t,e=["t","webkitT","MozT","msT","OT"],n=0,s=e.length;n<s;n++)if(t=e[n]+"ransform",t in i)return e[n].substr(0,e[n].length-1);return!1}();e.getTime=Date.now||function(){return(new Date).getTime()},e.extend=function(t,e){for(var i in e)t[i]=e[i]},e.addEvent=function(t,e,i,n){t.addEventListener(e,i,!!n)},e.removeEvent=function(t,e,i,n){t.removeEventListener(e,i,!!n)},e.prefixPointerEvent=function(t){return s.MSPointerEvent?"MSPointer"+t.charAt(7).toUpperCase()+t.substr(8):t},e.momentum=function(t,e,i,n,s,a){var o,l,c=t-e,d=r.abs(c)/i;return a=void 0===a?6e-4:a,o=t+d*d/(2*a)*(c<0?-1:1),l=d/a,o<n?(o=s?n-s/2.5*(d/8):n,c=r.abs(o-t),l=c/d):o>0&&(o=s?s/2.5*(d/8):0,c=r.abs(t)+o,l=c/d),{destination:r.round(o),duration:l}};var o=t("transform");return e.extend(e,{hasTransform:o!==!1,hasPerspective:t("perspective")in i,hasTouch:"ontouchstart"in s,hasPointer:!(!s.PointerEvent&&!s.MSPointerEvent),hasTransition:t("transition")in i}),e.isBadAndroid=function(){var t=s.navigator.appVersion;if(/Android/.test(t)&&!/Chrome\/\d/.test(t)){var e=t.match(/Safari\/(\d+.\d)/);return!(e&&"object"==typeof e&&e.length>=2)||parseFloat(e[1])<535.19}return!1}(),e.extend(e.style={},{transform:o,transitionTimingFunction:t("transitionTimingFunction"),transitionDuration:t("transitionDuration"),transitionDelay:t("transitionDelay"),transformOrigin:t("transformOrigin")}),e.hasClass=function(t,e){var i=new RegExp("(^|\\s)"+e+"(\\s|$)");return i.test(t.className)},e.addClass=function(t,i){if(!e.hasClass(t,i)){var n=t.className.split(" ");n.push(i),t.className=n.join(" ")}},e.removeClass=function(t,i){if(e.hasClass(t,i)){var n=new RegExp("(^|\\s)"+i+"(\\s|$)","g");t.className=t.className.replace(n," ")}},e.offset=function(t){for(var e=-t.offsetLeft,i=-t.offsetTop;t=t.offsetParent;)e-=t.offsetLeft,i-=t.offsetTop;return{left:e,top:i}},e.preventDefaultException=function(t,e){for(var i in e)if(e[i].test(t[i]))return!0;return!1},e.extend(e.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,pointerdown:3,pointermove:3,pointerup:3,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3}),e.extend(e.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(t){return t*(2-t)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(t){return r.sqrt(1- --t*t)}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(t){var e=4;return(t-=1)*t*((e+1)*t+e)+1}},bounce:{style:"",fn:function(t){return(t/=1)<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},elastic:{style:"",fn:function(t){var e=.22,i=.4;return 0===t?0:1==t?1:i*r.pow(2,-10*t)*r.sin((t-e/4)*(2*r.PI)/e)+1}}}),e.tap=function(t,e){var i=a.createEvent("Event");i.initEvent(e,!0,!0),i.pageX=t.pageX,i.pageY=t.pageY,t.target.dispatchEvent(i)},e.click=function(t){var e,i=t.target;/(SELECT|INPUT|TEXTAREA)/i.test(i.tagName)||(e=a.createEvent(s.MouseEvent?"MouseEvents":"Event"),e.initEvent("click",!0,!0),e.view=t.view||s,e.detail=1,e.screenX=i.screenX||0,e.screenY=i.screenY||0,e.clientX=i.clientX||0,e.clientY=i.clientY||0,e.ctrlKey=!!t.ctrlKey,e.altKey=!!t.altKey,e.shiftKey=!!t.shiftKey,e.metaKey=!!t.metaKey,e.button=0,e.relatedTarget=null,e._constructed=!0,i.dispatchEvent(e))},e}();o.prototype={version:"5.2.0",_init:function(){this._initEvents(),(this.options.scrollbars||this.options.indicators)&&this._initIndicators(),this.options.mouseWheel&&this._initWheel(),this.options.snap&&this._initSnap(),this.options.keyBindings&&this._initKeys()},destroy:function(){this._initEvents(!0),clearTimeout(this.resizeTimeout),this.resizeTimeout=null,this._execEvent("destroy")},_transitionEnd:function(t){t.target==this.scroller&&this.isInTransition&&(this._transitionTime(),this.resetPosition(this.options.bounceTime)||(this.isInTransition=!1,this._execEvent("scrollEnd")))},_start:function(t){if(1!=h.eventType[t.type]){var e;if(e=t.which?t.button:t.button<2?0:4==t.button?1:2,0!==e)return}if(this.enabled&&(!this.initiated||h.eventType[t.type]===this.initiated)){!this.options.preventDefault||h.isBadAndroid||h.preventDefaultException(t.target,this.options.preventDefaultException)||t.preventDefault();var i,n=t.touches?t.touches[0]:t;this.initiated=h.eventType[t.type],this.moved=!1,this.distX=0,this.distY=0,this.directionX=0,this.directionY=0,this.directionLocked=0,this.startTime=h.getTime(),this.options.useTransition&&this.isInTransition?(this._transitionTime(),this.isInTransition=!1,i=this.getComputedPosition(),this._translate(r.round(i.x),r.round(i.y)),this._execEvent("scrollEnd")):!this.options.useTransition&&this.isAnimating&&(this.isAnimating=!1,this._execEvent("scrollEnd")),this.startX=this.x,this.startY=this.y,this.absStartX=this.x,this.absStartY=this.y,this.pointX=n.pageX,this.pointY=n.pageY,this._execEvent("beforeScrollStart")}},_move:function(t){if(this.enabled&&h.eventType[t.type]===this.initiated){this.options.preventDefault&&t.preventDefault();var e,i,n,s,a=t.touches?t.touches[0]:t,o=a.pageX-this.pointX,l=a.pageY-this.pointY,c=h.getTime();if(this.pointX=a.pageX,this.pointY=a.pageY,this.distX+=o,this.distY+=l,n=r.abs(this.distX),s=r.abs(this.distY),!(c-this.endTime>300&&n<10&&s<10)){if(this.directionLocked||this.options.freeScroll||(n>s+this.options.directionLockThreshold?this.directionLocked="h":s>=n+this.options.directionLockThreshold?this.directionLocked="v":this.directionLocked="n"),"h"==this.directionLocked){if("vertical"==this.options.eventPassthrough)t.preventDefault();else if("horizontal"==this.options.eventPassthrough)return void(this.initiated=!1);l=0}else if("v"==this.directionLocked){if("horizontal"==this.options.eventPassthrough)t.preventDefault();else if("vertical"==this.options.eventPassthrough)return void(this.initiated=!1);o=0}o=this.hasHorizontalScroll?o:0,l=this.hasVerticalScroll?l:0,e=this.x+o,i=this.y+l,(e>0||e<this.maxScrollX)&&(e=this.options.bounce?this.x+o/3:e>0?0:this.maxScrollX),(i>0||i<this.maxScrollY)&&(i=this.options.bounce?this.y+l/3:i>0?0:this.maxScrollY),this.directionX=o>0?-1:o<0?1:0,this.directionY=l>0?-1:l<0?1:0,this.moved||this._execEvent("scrollStart"),this.moved=!0,this._translate(e,i),c-this.startTime>300&&(this.startTime=c,this.startX=this.x,this.startY=this.y)}}},_end:function(t){if(this.enabled&&h.eventType[t.type]===this.initiated){this.options.preventDefault&&!h.preventDefaultException(t.target,this.options.preventDefaultException)&&t.preventDefault();var e,i,n=(t.changedTouches?t.changedTouches[0]:t,h.getTime()-this.startTime),s=r.round(this.x),a=r.round(this.y),o=r.abs(s-this.startX),l=r.abs(a-this.startY),c=0,d="";if(this.isInTransition=0,this.initiated=0,this.endTime=h.getTime(),!this.resetPosition(this.options.bounceTime)){if(this.scrollTo(s,a),!this.moved)return this.options.tap&&h.tap(t,this.options.tap),this.options.click&&h.click(t),void this._execEvent("scrollCancel");if(this._events.flick&&n<200&&o<100&&l<100)return void this._execEvent("flick");if(this.options.momentum&&n<300&&(e=this.hasHorizontalScroll?h.momentum(this.x,this.startX,n,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{destination:s,duration:0},i=this.hasVerticalScroll?h.momentum(this.y,this.startY,n,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{destination:a,duration:0},s=e.destination,a=i.destination,c=r.max(e.duration,i.duration),this.isInTransition=1),this.options.snap){var u=this._nearestSnap(s,a);this.currentPage=u,c=this.options.snapSpeed||r.max(r.max(r.min(r.abs(s-u.x),1e3),r.min(r.abs(a-u.y),1e3)),300),s=u.x,a=u.y,this.directionX=0,this.directionY=0,d=this.options.bounceEasing}return s!=this.x||a!=this.y?((s>0||s<this.maxScrollX||a>0||a<this.maxScrollY)&&(d=h.ease.quadratic),void this.scrollTo(s,a,c,d)):void this._execEvent("scrollEnd")}}},_resize:function(){var t=this;clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){t.refresh()},this.options.resizePolling)},resetPosition:function(t){var e=this.x,i=this.y;return t=t||0,!this.hasHorizontalScroll||this.x>0?e=0:this.x<this.maxScrollX&&(e=this.maxScrollX),!this.hasVerticalScroll||this.y>0?i=0:this.y<this.maxScrollY&&(i=this.maxScrollY),(e!=this.x||i!=this.y)&&(this.scrollTo(e,i,t,this.options.bounceEasing),!0)},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0},refresh:function(){this.wrapper.offsetHeight;this.wrapperWidth=this.wrapper.clientWidth,this.wrapperHeight=this.wrapper.clientHeight,this.scrollerWidth=this.scroller.offsetWidth,this.scrollerHeight=this.scroller.offsetHeight,this.maxScrollX=this.wrapperWidth-this.scrollerWidth,this.maxScrollY=this.wrapperHeight-this.scrollerHeight,this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0,this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0,this.hasHorizontalScroll||(this.maxScrollX=0,this.scrollerWidth=this.wrapperWidth),this.hasVerticalScroll||(this.maxScrollY=0,this.scrollerHeight=this.wrapperHeight),this.endTime=0,this.directionX=0,this.directionY=0,this.wrapperOffset=h.offset(this.wrapper),this._execEvent("refresh"),this.resetPosition()},on:function(t,e){this._events[t]||(this._events[t]=[]),this._events[t].push(e)},off:function(t,e){if(this._events[t]){var i=this._events[t].indexOf(e);i>-1&&this._events[t].splice(i,1)}},_execEvent:function(t){if(this._events[t]){var e=0,i=this._events[t].length;if(i)for(;e<i;e++)this._events[t][e].apply(this,[].slice.call(arguments,1))}},scrollBy:function(t,e,i,n){t=this.x+t,e=this.y+e,i=i||0,this.scrollTo(t,e,i,n)},scrollTo:function(t,e,i,n){n=n||h.ease.circular,this.isInTransition=this.options.useTransition&&i>0;var s=this.options.useTransition&&n.style;!i||s?(s&&(this._transitionTimingFunction(n.style),this._transitionTime(i)),this._translate(t,e)):this._animate(t,e,i,n.fn)},scrollToElement:function(t,e,i,n,s){if(t=t.nodeType?t:this.scroller.querySelector(t)){var a=h.offset(t);a.left-=this.wrapperOffset.left,a.top-=this.wrapperOffset.top,i===!0&&(i=r.round(t.offsetWidth/2-this.wrapper.offsetWidth/2)),n===!0&&(n=r.round(t.offsetHeight/2-this.wrapper.offsetHeight/2)),a.left-=i||0,a.top-=n||0,a.left=a.left>0?0:a.left<this.maxScrollX?this.maxScrollX:a.left,a.top=a.top>0?0:a.top<this.maxScrollY?this.maxScrollY:a.top,e=void 0===e||null===e||"auto"===e?r.max(r.abs(this.x-a.left),r.abs(this.y-a.top)):e,this.scrollTo(a.left,a.top,e,s)}},_transitionTime:function(t){if(this.options.useTransition){t=t||0;var e=h.style.transitionDuration;if(e){if(this.scrollerStyle[e]=t+"ms",!t&&h.isBadAndroid){this.scrollerStyle[e]="0.0001ms";var i=this;d(function(){"0.0001ms"===i.scrollerStyle[e]&&(i.scrollerStyle[e]="0s")})}if(this.indicators)for(var n=this.indicators.length;n--;)this.indicators[n].transitionTime(t)}}},_transitionTimingFunction:function(t){if(this.scrollerStyle[h.style.transitionTimingFunction]=t,this.indicators)for(var e=this.indicators.length;e--;)this.indicators[e].transitionTimingFunction(t)},_translate:function(t,e){if(this.options.useTransform?this.scrollerStyle[h.style.transform]="translate("+t+"px,"+e+"px)"+this.translateZ:(t=r.round(t),e=r.round(e),this.scrollerStyle.left=t+"px",this.scrollerStyle.top=e+"px"),this.x=t,this.y=e,this.indicators)for(var i=this.indicators.length;i--;)this.indicators[i].updatePosition()},_initEvents:function(t){var e=t?h.removeEvent:h.addEvent,i=this.options.bindToWrapper?this.wrapper:s;e(s,"orientationchange",this),e(s,"resize",this),this.options.click&&e(this.wrapper,"click",this,!0),this.options.disableMouse||(e(this.wrapper,"mousedown",this),e(i,"mousemove",this),e(i,"mousecancel",this),e(i,"mouseup",this)),h.hasPointer&&!this.options.disablePointer&&(e(this.wrapper,h.prefixPointerEvent("pointerdown"),this),e(i,h.prefixPointerEvent("pointermove"),this),e(i,h.prefixPointerEvent("pointercancel"),this),e(i,h.prefixPointerEvent("pointerup"),this)),h.hasTouch&&!this.options.disableTouch&&(e(this.wrapper,"touchstart",this),e(i,"touchmove",this),e(i,"touchcancel",this),e(i,"touchend",this)),e(this.scroller,"transitionend",this),e(this.scroller,"webkitTransitionEnd",this),e(this.scroller,"oTransitionEnd",this),e(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var t,e,i=s.getComputedStyle(this.scroller,null);return this.options.useTransform?(i=i[h.style.transform].split(")")[0].split(", "),t=+(i[12]||i[4]),e=+(i[13]||i[5])):(t=+i.left.replace(/[^-\d.]/g,""),e=+i.top.replace(/[^-\d.]/g,"")),{x:t,y:e}},_initIndicators:function(){function t(t){if(a.indicators)for(var e=a.indicators.length;e--;)t.call(a.indicators[e])}var e,i=this.options.interactiveScrollbars,n="string"!=typeof this.options.scrollbars,s=[],a=this;this.indicators=[],this.options.scrollbars&&(this.options.scrollY&&(e={el:l("v",i,this.options.scrollbars),interactive:i,defaultScrollbars:!0,customStyle:n,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenX:!1},this.wrapper.appendChild(e.el),s.push(e)),this.options.scrollX&&(e={el:l("h",i,this.options.scrollbars),interactive:i,defaultScrollbars:!0,customStyle:n,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenY:!1},this.wrapper.appendChild(e.el),s.push(e))),this.options.indicators&&(s=s.concat(this.options.indicators));for(var r=s.length;r--;)this.indicators.push(new c(this,s[r]));this.options.fadeScrollbars&&(this.on("scrollEnd",function(){t(function(){this.fade()})}),this.on("scrollCancel",function(){t(function(){this.fade()})}),this.on("scrollStart",function(){t(function(){this.fade(1)})}),this.on("beforeScrollStart",function(){t(function(){this.fade(1,!0)})})),this.on("refresh",function(){t(function(){this.refresh()})}),this.on("destroy",function(){t(function(){this.destroy()}),delete this.indicators})},_initWheel:function(){h.addEvent(this.wrapper,"wheel",this),h.addEvent(this.wrapper,"mousewheel",this),h.addEvent(this.wrapper,"DOMMouseScroll",this),this.on("destroy",function(){clearTimeout(this.wheelTimeout),this.wheelTimeout=null,h.removeEvent(this.wrapper,"wheel",this),h.removeEvent(this.wrapper,"mousewheel",this),h.removeEvent(this.wrapper,"DOMMouseScroll",this)})},_wheel:function(t){if(this.enabled){t.preventDefault();var e,i,n,s,a=this;if(void 0===this.wheelTimeout&&a._execEvent("scrollStart"),clearTimeout(this.wheelTimeout),this.wheelTimeout=setTimeout(function(){a.options.snap||a._execEvent("scrollEnd"),a.wheelTimeout=void 0},400),"deltaX"in t)1===t.deltaMode?(e=-t.deltaX*this.options.mouseWheelSpeed,i=-t.deltaY*this.options.mouseWheelSpeed):(e=-t.deltaX,i=-t.deltaY);else if("wheelDeltaX"in t)e=t.wheelDeltaX/120*this.options.mouseWheelSpeed,i=t.wheelDeltaY/120*this.options.mouseWheelSpeed;else if("wheelDelta"in t)e=i=t.wheelDelta/120*this.options.mouseWheelSpeed;else{if(!("detail"in t))return;e=i=-t.detail/3*this.options.mouseWheelSpeed}if(e*=this.options.invertWheelDirection,i*=this.options.invertWheelDirection,this.hasVerticalScroll||(e=i,i=0),this.options.snap)return n=this.currentPage.pageX,s=this.currentPage.pageY,e>0?n--:e<0&&n++,i>0?s--:i<0&&s++,void this.goToPage(n,s);n=this.x+r.round(this.hasHorizontalScroll?e:0),s=this.y+r.round(this.hasVerticalScroll?i:0),this.directionX=e>0?-1:e<0?1:0,this.directionY=i>0?-1:i<0?1:0,n>0?n=0:n<this.maxScrollX&&(n=this.maxScrollX),s>0?s=0:s<this.maxScrollY&&(s=this.maxScrollY),this.scrollTo(n,s,0)}},_initSnap:function(){this.currentPage={},"string"==typeof this.options.snap&&(this.options.snap=this.scroller.querySelectorAll(this.options.snap)),this.on("refresh",function(){var t,e,i,n,s,a,o=0,l=0,c=0,d=this.options.snapStepX||this.wrapperWidth,h=this.options.snapStepY||this.wrapperHeight;if(this.pages=[],this.wrapperWidth&&this.wrapperHeight&&this.scrollerWidth&&this.scrollerHeight){if(this.options.snap===!0)for(i=r.round(d/2),n=r.round(h/2);c>-this.scrollerWidth;){for(this.pages[o]=[],t=0,s=0;s>-this.scrollerHeight;)this.pages[o][t]={x:r.max(c,this.maxScrollX),y:r.max(s,this.maxScrollY),width:d,height:h,cx:c-i,cy:s-n},s-=h,t++;c-=d,o++}else for(a=this.options.snap,t=a.length,e=-1;o<t;o++)(0===o||a[o].offsetLeft<=a[o-1].offsetLeft)&&(l=0,e++),this.pages[l]||(this.pages[l]=[]),c=r.max(-a[o].offsetLeft,this.maxScrollX),s=r.max(-a[o].offsetTop,this.maxScrollY),i=c-r.round(a[o].offsetWidth/2),n=s-r.round(a[o].offsetHeight/2),this.pages[l][e]={x:c,y:s,width:a[o].offsetWidth,height:a[o].offsetHeight,cx:i,cy:n},c>this.maxScrollX&&l++;this.goToPage(this.currentPage.pageX||0,this.currentPage.pageY||0,0),this.options.snapThreshold%1===0?(this.snapThresholdX=this.options.snapThreshold,this.snapThresholdY=this.options.snapThreshold):(this.snapThresholdX=r.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width*this.options.snapThreshold),this.snapThresholdY=r.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height*this.options.snapThreshold))}}),this.on("flick",function(){var t=this.options.snapSpeed||r.max(r.max(r.min(r.abs(this.x-this.startX),1e3),r.min(r.abs(this.y-this.startY),1e3)),300);this.goToPage(this.currentPage.pageX+this.directionX,this.currentPage.pageY+this.directionY,t)})},_nearestSnap:function(t,e){if(!this.pages.length)return{x:0,y:0,pageX:0,pageY:0};var i=0,n=this.pages.length,s=0;if(r.abs(t-this.absStartX)<this.snapThresholdX&&r.abs(e-this.absStartY)<this.snapThresholdY)return this.currentPage;for(t>0?t=0:t<this.maxScrollX&&(t=this.maxScrollX),e>0?e=0:e<this.maxScrollY&&(e=this.maxScrollY);i<n;i++)if(t>=this.pages[i][0].cx){t=this.pages[i][0].x;break}for(n=this.pages[i].length;s<n;s++)if(e>=this.pages[0][s].cy){e=this.pages[0][s].y;break}return i==this.currentPage.pageX&&(i+=this.directionX,i<0?i=0:i>=this.pages.length&&(i=this.pages.length-1),t=this.pages[i][0].x),s==this.currentPage.pageY&&(s+=this.directionY,s<0?s=0:s>=this.pages[0].length&&(s=this.pages[0].length-1),e=this.pages[0][s].y),{x:t,y:e,pageX:i,pageY:s}},goToPage:function(t,e,i,n){n=n||this.options.bounceEasing,t>=this.pages.length?t=this.pages.length-1:t<0&&(t=0),e>=this.pages[t].length?e=this.pages[t].length-1:e<0&&(e=0);var s=this.pages[t][e].x,a=this.pages[t][e].y;i=void 0===i?this.options.snapSpeed||r.max(r.max(r.min(r.abs(s-this.x),1e3),r.min(r.abs(a-this.y),1e3)),300):i,this.currentPage={x:s,y:a,pageX:t,pageY:e},this.scrollTo(s,a,i,n)},next:function(t,e){var i=this.currentPage.pageX,n=this.currentPage.pageY;i++,i>=this.pages.length&&this.hasVerticalScroll&&(i=0,n++),this.goToPage(i,n,t,e)},prev:function(t,e){var i=this.currentPage.pageX,n=this.currentPage.pageY;i--,i<0&&this.hasVerticalScroll&&(i=0,n--),this.goToPage(i,n,t,e)},_initKeys:function(t){var e,i={pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40};if("object"==typeof this.options.keyBindings)for(e in this.options.keyBindings)"string"==typeof this.options.keyBindings[e]&&(this.options.keyBindings[e]=this.options.keyBindings[e].toUpperCase().charCodeAt(0));else this.options.keyBindings={};for(e in i)this.options.keyBindings[e]=this.options.keyBindings[e]||i[e];h.addEvent(s,"keydown",this),this.on("destroy",function(){h.removeEvent(s,"keydown",this)})},_key:function(t){if(this.enabled){var e,i=this.options.snap,n=i?this.currentPage.pageX:this.x,s=i?this.currentPage.pageY:this.y,a=h.getTime(),o=this.keyTime||0,l=.25;switch(this.options.useTransition&&this.isInTransition&&(e=this.getComputedPosition(),this._translate(r.round(e.x),r.round(e.y)),this.isInTransition=!1),this.keyAcceleration=a-o<200?r.min(this.keyAcceleration+l,50):0,t.keyCode){case this.options.keyBindings.pageUp:this.hasHorizontalScroll&&!this.hasVerticalScroll?n+=i?1:this.wrapperWidth:s+=i?1:this.wrapperHeight;break;case this.options.keyBindings.pageDown:this.hasHorizontalScroll&&!this.hasVerticalScroll?n-=i?1:this.wrapperWidth:s-=i?1:this.wrapperHeight;break;case this.options.keyBindings.end:n=i?this.pages.length-1:this.maxScrollX,s=i?this.pages[0].length-1:this.maxScrollY;break;case this.options.keyBindings.home:n=0,s=0;break;case this.options.keyBindings.left:n+=i?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.up:s+=i?1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.right:n-=i?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.down:s-=i?1:5+this.keyAcceleration>>0;break;default:return}if(i)return void this.goToPage(n,s);n>0?(n=0,this.keyAcceleration=0):n<this.maxScrollX&&(n=this.maxScrollX,this.keyAcceleration=0),s>0?(s=0,this.keyAcceleration=0):s<this.maxScrollY&&(s=this.maxScrollY,this.keyAcceleration=0),this.scrollTo(n,s,0),this.keyTime=a}},_animate:function(t,e,i,n){function s(){var u,p,f,v=h.getTime();return v>=c?(a.isAnimating=!1,a._translate(t,e),void(a.resetPosition(a.options.bounceTime)||a._execEvent("scrollEnd"))):(v=(v-l)/i,f=n(v),u=(t-r)*f+r,p=(e-o)*f+o,a._translate(u,p),void(a.isAnimating&&d(s)))}var a=this,r=this.x,o=this.y,l=h.getTime(),c=l+i;this.isAnimating=!0,s()},handleEvent:function(t){switch(t.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(t);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(t);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(t);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(t);break;case"wheel":case"DOMMouseScroll":case"mousewheel":this._wheel(t);break;case"keydown":this._key(t);break;case"click":this.enabled&&!t._constructed&&(t.preventDefault(),t.stopPropagation())}}},c.prototype={handleEvent:function(t){switch(t.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(t);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(t);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(t)}},destroy:function(){this.options.fadeScrollbars&&(clearTimeout(this.fadeTimeout),this.fadeTimeout=null),this.options.interactive&&(h.removeEvent(this.indicator,"touchstart",this),h.removeEvent(this.indicator,h.prefixPointerEvent("pointerdown"),this),h.removeEvent(this.indicator,"mousedown",this),h.removeEvent(s,"touchmove",this),h.removeEvent(s,h.prefixPointerEvent("pointermove"),this),h.removeEvent(s,"mousemove",this),h.removeEvent(s,"touchend",this),h.removeEvent(s,h.prefixPointerEvent("pointerup"),this),h.removeEvent(s,"mouseup",this)),this.options.defaultScrollbars&&this.wrapper.parentNode.removeChild(this.wrapper)},_start:function(t){var e=t.touches?t.touches[0]:t;t.preventDefault(),t.stopPropagation(),this.transitionTime(),this.initiated=!0,this.moved=!1,this.lastPointX=e.pageX,this.lastPointY=e.pageY,this.startTime=h.getTime(),this.options.disableTouch||h.addEvent(s,"touchmove",this),this.options.disablePointer||h.addEvent(s,h.prefixPointerEvent("pointermove"),this),this.options.disableMouse||h.addEvent(s,"mousemove",this),this.scroller._execEvent("beforeScrollStart")},_move:function(t){var e,i,n,s,a=t.touches?t.touches[0]:t;h.getTime();this.moved||this.scroller._execEvent("scrollStart"),this.moved=!0,e=a.pageX-this.lastPointX,this.lastPointX=a.pageX,i=a.pageY-this.lastPointY,this.lastPointY=a.pageY,n=this.x+e,s=this.y+i,this._pos(n,s),t.preventDefault(),t.stopPropagation()},_end:function(t){if(this.initiated){if(this.initiated=!1,t.preventDefault(),t.stopPropagation(),h.removeEvent(s,"touchmove",this),h.removeEvent(s,h.prefixPointerEvent("pointermove"),this),h.removeEvent(s,"mousemove",this),this.scroller.options.snap){var e=this.scroller._nearestSnap(this.scroller.x,this.scroller.y),i=this.options.snapSpeed||r.max(r.max(r.min(r.abs(this.scroller.x-e.x),1e3),r.min(r.abs(this.scroller.y-e.y),1e3)),300);this.scroller.x==e.x&&this.scroller.y==e.y||(this.scroller.directionX=0,this.scroller.directionY=0,this.scroller.currentPage=e,this.scroller.scrollTo(e.x,e.y,i,this.scroller.options.bounceEasing))}this.moved&&this.scroller._execEvent("scrollEnd")}},transitionTime:function(t){t=t||0;var e=h.style.transitionDuration;if(e&&(this.indicatorStyle[e]=t+"ms",!t&&h.isBadAndroid)){this.indicatorStyle[e]="0.0001ms";var i=this;d(function(){"0.0001ms"===i.indicatorStyle[e]&&(i.indicatorStyle[e]="0s")})}},transitionTimingFunction:function(t){this.indicatorStyle[h.style.transitionTimingFunction]=t},refresh:function(){this.transitionTime(),this.options.listenX&&!this.options.listenY?this.indicatorStyle.display=this.scroller.hasHorizontalScroll?"block":"none":this.options.listenY&&!this.options.listenX?this.indicatorStyle.display=this.scroller.hasVerticalScroll?"block":"none":this.indicatorStyle.display=this.scroller.hasHorizontalScroll||this.scroller.hasVerticalScroll?"block":"none",this.scroller.hasHorizontalScroll&&this.scroller.hasVerticalScroll?(h.addClass(this.wrapper,"iScrollBothScrollbars"),h.removeClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="8px":this.wrapper.style.bottom="8px")):(h.removeClass(this.wrapper,"iScrollBothScrollbars"),h.addClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="2px":this.wrapper.style.bottom="2px"));this.wrapper.offsetHeight;this.options.listenX&&(this.wrapperWidth=this.wrapper.clientWidth,this.options.resize?(this.indicatorWidth=r.max(r.round(this.wrapperWidth*this.wrapperWidth/(this.scroller.scrollerWidth||this.wrapperWidth||1)),8),this.indicatorStyle.width=this.indicatorWidth+"px"):this.indicatorWidth=this.indicator.clientWidth,this.maxPosX=this.wrapperWidth-this.indicatorWidth,"clip"==this.options.shrink?(this.minBoundaryX=-this.indicatorWidth+8,this.maxBoundaryX=this.wrapperWidth-8):(this.minBoundaryX=0,this.maxBoundaryX=this.maxPosX),this.sizeRatioX=this.options.speedRatioX||this.scroller.maxScrollX&&this.maxPosX/this.scroller.maxScrollX),this.options.listenY&&(this.wrapperHeight=this.wrapper.clientHeight,this.options.resize?(this.indicatorHeight=r.max(r.round(this.wrapperHeight*this.wrapperHeight/(this.scroller.scrollerHeight||this.wrapperHeight||1)),8),this.indicatorStyle.height=this.indicatorHeight+"px"):this.indicatorHeight=this.indicator.clientHeight,this.maxPosY=this.wrapperHeight-this.indicatorHeight,"clip"==this.options.shrink?(this.minBoundaryY=-this.indicatorHeight+8,this.maxBoundaryY=this.wrapperHeight-8):(this.minBoundaryY=0,this.maxBoundaryY=this.maxPosY),this.maxPosY=this.wrapperHeight-this.indicatorHeight,this.sizeRatioY=this.options.speedRatioY||this.scroller.maxScrollY&&this.maxPosY/this.scroller.maxScrollY),this.updatePosition()},updatePosition:function(){var t=this.options.listenX&&r.round(this.sizeRatioX*this.scroller.x)||0,e=this.options.listenY&&r.round(this.sizeRatioY*this.scroller.y)||0;this.options.ignoreBoundaries||(t<this.minBoundaryX?("scale"==this.options.shrink&&(this.width=r.max(this.indicatorWidth+t,8),this.indicatorStyle.width=this.width+"px"),t=this.minBoundaryX):t>this.maxBoundaryX?"scale"==this.options.shrink?(this.width=r.max(this.indicatorWidth-(t-this.maxPosX),8),this.indicatorStyle.width=this.width+"px",t=this.maxPosX+this.indicatorWidth-this.width):t=this.maxBoundaryX:"scale"==this.options.shrink&&this.width!=this.indicatorWidth&&(this.width=this.indicatorWidth,this.indicatorStyle.width=this.width+"px"),e<this.minBoundaryY?("scale"==this.options.shrink&&(this.height=r.max(this.indicatorHeight+3*e,8),this.indicatorStyle.height=this.height+"px"),e=this.minBoundaryY):e>this.maxBoundaryY?"scale"==this.options.shrink?(this.height=r.max(this.indicatorHeight-3*(e-this.maxPosY),8),
this.indicatorStyle.height=this.height+"px",e=this.maxPosY+this.indicatorHeight-this.height):e=this.maxBoundaryY:"scale"==this.options.shrink&&this.height!=this.indicatorHeight&&(this.height=this.indicatorHeight,this.indicatorStyle.height=this.height+"px")),this.x=t,this.y=e,this.scroller.options.useTransform?this.indicatorStyle[h.style.transform]="translate("+t+"px,"+e+"px)"+this.scroller.translateZ:(this.indicatorStyle.left=t+"px",this.indicatorStyle.top=e+"px")},_pos:function(t,e){t<0?t=0:t>this.maxPosX&&(t=this.maxPosX),e<0?e=0:e>this.maxPosY&&(e=this.maxPosY),t=this.options.listenX?r.round(t/this.sizeRatioX):this.scroller.x,e=this.options.listenY?r.round(e/this.sizeRatioY):this.scroller.y,this.scroller.scrollTo(t,e)},fade:function(t,e){if(!e||this.visible){clearTimeout(this.fadeTimeout),this.fadeTimeout=null;var i=t?250:500,n=t?0:300;t=t?"1":"0",this.wrapperStyle[h.style.transitionDuration]=i+"ms",this.fadeTimeout=setTimeout(function(t){this.wrapperStyle.opacity=t,this.visible=+t}.bind(this,t),n)}}},o.utils=h,"undefined"!=typeof t&&t.exports?t.exports=o:(n=function(){return o}.call(e,i,e,t),!(void 0!==n&&(t.exports=n)))}(window,document,Math)},function(t,e,i){var n,s,a;!function(r){s=[i(4)],n=r,a="function"==typeof n?n.apply(e,s):n,!(void 0!==a&&(t.exports=a))}(function(t){"use strict";var e=t.keyboard=function(i,n){var s,a=this;a.version="1.22.5",a.$el=t(i),a.el=i,a.$el.data("keyboard",a),a.init=function(){var i=e.css;a.settings=n||{},a.options=s=t.extend(!0,{},e.defaultOptions,n),a.el.active=!0,a.namespace=".keyboard"+Math.random().toString(16).slice(2),a.shiftActive=a.altActive=a.metaActive=a.sets=a.capsLock=!1,a.rows=["","-shift","-alt","-alt-shift"],a.inPlaceholder=a.$el.attr("placeholder")||"",a.watermark=e.watermark&&""!==a.inPlaceholder,a.repeatTime=1e3/(s.repeatRate||20),s.preventDoubleEventTime=s.preventDoubleEventTime||100,a.isOpen=!1,a.wheel=t.isFunction(t.fn.mousewheel),a.alwaysAllowed=[20,33,34,35,36,37,38,39,40,45,46],a.$keyboard=[],a.enabled=!0,t.isEmptyObject(s.position)||(s.position.orig_at=s.position.at),a.checkCaret=s.lockInput||e.checkCaretSupport(),a.last={start:0,end:0,key:"",val:"",layout:"",virtual:!0,keyset:[!1,!1,!1]},a.temp=["",0,0],t.each("initialized beforeVisible visible hidden canceled accepted beforeClose".split(" "),function(e,i){t.isFunction(s[i])&&a.$el.bind(i+a.namespace,s[i])}),s.alwaysOpen&&(s.stayOpen=!0),t(document).bind("mousedown keyup touchstart checkkeyboard ".split(" ").join(a.namespace+" "),function(e){if(!a.opening&&(a.escClose(e),e.target&&t(e.target).hasClass(i.input))){var n=t(e.target).data("keyboard");n===a&&n.options.openOn&&n.focusOn()}}),a.$el.addClass(i.input+" "+s.css.input).attr({"aria-haspopup":"true",role:"textbox"}),(a.$el.is(":disabled")||a.$el.attr("readonly")&&!a.$el.hasClass(i.locked))&&a.$el.addClass(i.noKeyboard),s.openOn&&a.$el.bind(s.openOn+a.namespace,function(){a.focusOn()}),a.watermark||""!==a.$el.val()||""===a.inPlaceholder||""===a.$el.attr("placeholder")||a.$el.addClass(i.placeholder).val(a.inPlaceholder),a.$el.trigger(e.events.kbInit,[a,a.el]),s.alwaysOpen&&a.reveal()},a.toggle=function(){var t=a.$keyboard.find("."+e.css.keyToggle),i=!a.enabled;a.$preview.prop("readonly",i),a.$keyboard.toggleClass(e.css.keyDisabled,i).find("."+e.css.keyButton).not(t).prop("disabled",i).attr("aria-disabled",i),t.toggleClass(e.css.keyDisabled,i),i&&a.typing_options&&(a.typing_options.text="")},a.setCurrent=function(){var i=e.css;t("."+i.hasFocus).removeClass(i.hasFocus),t("."+i.isCurrent).removeClass(i.isCurrent),a.$el.addClass(i.isCurrent),a.$keyboard.addClass(i.hasFocus),a.isCurrent(!0),a.isOpen=!0},a.isCurrent=function(t){var i=e.currentKeyboard||!1;return t?i=e.currentKeyboard=a.el:t===!1&&i===a.el&&(i=e.currentKeyboard=""),i===a.el},a.isVisible=function(){return!(!a.$keyboard||!a.$keyboard.length)&&a.$keyboard.is(":visible")},a.focusOn=function(){i.active&&(a.$el.is(":visible")&&(a.timer2=setTimeout(function(){var t;/(number|email)/i.test(a.el.type)||s.caretToEnd||a.saveCaret(t,t,a.$el)},20)),a.isVisible()||(clearTimeout(a.timer),a.reveal()),s.alwaysOpen&&a.setCurrent())},a.reveal=function(i){a.isOpen&&(i=!0);var n=e.css;return a.opening=!0,t("."+n.keyboard).not("."+n.alwaysOpen).remove(),i&&(a.isOpen=!1,a.last.val=a.$preview&&a.$preview.val()||"",a.$keyboard.length&&(a.$keyboard.remove(),a.$keyboard=[],a.shiftActive=a.altActive=a.metaActive=!1)),a.$el.is(":disabled")||a.$el.attr("readonly")&&!a.$el.hasClass(n.locked)?void a.$el.addClass(n.noKeyboard):(a.$el.removeClass(n.noKeyboard),s.openOn&&a.$el.unbind(s.openOn+a.namespace),a.$keyboard&&(!a.$keyboard||a.$keyboard.length&&!t.contains(document.body,a.$keyboard[0]))||a.startup(),a.watermark||a.el.value!==a.inPlaceholder||a.$el.removeClass(n.placeholder).val(""),a.originalContent=a.$el.val(),a.$preview.val(i?a.last.val:a.originalContent),s.acceptValid&&a.checkValid(),s.resetDefault&&(a.shiftActive=a.altActive=a.metaActive=!1,a.showKeySet()),a.$el.trigger(e.events.kbBeforeVisible,[a,a.el]),a.setCurrent(),a.toggle(),a.$keyboard.show(),s.usePreview&&e.msie&&("undefined"==typeof a.width&&(a.$preview.hide(),a.width=Math.ceil(a.$keyboard.width()),a.$preview.show()),a.$preview.width(a.width)),a.position=!t.isEmptyObject(s.position)&&s.position,t.ui&&t.ui.position&&a.position&&(a.position.of=a.position.of||a.$el.data("keyboardPosition")||a.$el,a.position.collision=a.position.collision||"flipfit flipfit",s.position.at=s.usePreview?s.position.orig_at:s.position.at2,a.$keyboard.position(a.position)),a.checkDecimal(),a.lineHeight=parseInt(a.$preview.css("lineHeight"),10)||parseInt(a.$preview.css("font-size"),10)+4,s.caretToEnd&&a.saveCaret(a.originalContent.length,a.originalContent.length),e.allie&&(0===a.last.end&&a.last.start>0&&(a.last.end=a.last.start),a.last.start<0&&(a.last.start=a.last.end=a.originalContent.length)),a.timer2=setTimeout(function(){a.opening=!1,s.initialFocus&&e.caret(a.$preview,a.last),a.last.eventTime=(new Date).getTime(),a.$el.trigger(e.events.kbVisible,[a,a.el]),a.timer=setTimeout(function(){a&&a.saveCaret()},200)},10),a)},a.updateLanguage=function(){var i=e.layouts,n=s.language||i[s.layout]&&i[s.layout].lang&&i[s.layout].lang||[s.language||"en"],r=e.language;n=(t.isArray(n)?n[0]:n).split("-")[0],s.display=t.extend(!0,{},r.en.display,r[n]&&r[n].display||{},a.settings.display),s.combos=t.extend(!0,{},r.en.combos,r[n]&&r[n].combos||{},a.settings.combos),s.wheelMessage=r[n]&&r[n].wheelMessage||r.en.wheelMessage,s.rtl=i[s.layout]&&i[s.layout].rtl||r[n]&&r[n].rtl||!1,a.regex=r[n]&&r[n].comboRegex||e.comboRegex,a.decimal=/^\./.test(s.display.dec),a.$el.toggleClass("rtl",s.rtl).css("direction",s.rtl?"rtl":"")},a.startup=function(){var i=e.css;a.$preview=a.$el,a.$keyboard&&a.$keyboard.length||("custom"===s.layout&&(s.layoutHash="custom"+a.customHash()),a.layout="custom"===s.layout?s.layoutHash:s.layout,a.last.layout=a.layout,a.updateLanguage(),"undefined"==typeof e.builtLayouts[a.layout]&&(t.isFunction(s.create)&&s.create(a),a.$keyboard.length||a.buildKeyboard(a.layout,!0)),a.$keyboard=e.builtLayouts[a.layout].$keyboard.clone(),""!==(a.el.id||"")&&a.$keyboard.attr("id",a.el.id+e.css.idSuffix),s.usePreview?(t.isEmptyObject(s.position)||(s.position.at=s.position.orig_at),a.$preview=a.$el.clone(!1).removeAttr("id").removeClass(i.placeholder+" "+i.input).addClass(i.preview+" "+s.css.input).removeAttr("aria-haspopup").attr("tabindex","-1").show(),"number"==a.$preview.attr("type")&&a.$preview.attr("type","text"),t("<div />").addClass(i.wrapper).append(a.$preview).prependTo(a.$keyboard)):t.isEmptyObject(s.position)||(s.position.at=s.position.at2)),a.preview=a.$preview[0],a.$decBtn=a.$keyboard.find("."+i.keyPrefix+"dec"),(s.enterNavigation||"TEXTAREA"===a.el.nodeName)&&a.alwaysAllowed.push(13),s.lockInput&&a.$preview.addClass(i.locked).attr({readonly:"readonly"}),a.bindKeyboard(),a.$keyboard.appendTo(s.appendLocally?a.$el.parent():s.appendTo||"body"),a.bindKeys(),s.reposition&&t.ui&&t.ui.position&&"body"==s.appendTo&&t(window).bind("resize"+a.namespace,function(){a.position&&a.isVisible()&&a.$keyboard.position(a.position)})},a.saveCaret=function(t,i,n){var s=e.caret(n||a.$preview,t,i);a.last.start=t||s.start,a.last.end=i||s.end},a.setScroll=function(){if(a.last.virtual){var t,e,i,n,r="TEXTAREA"===a.preview.nodeName,o=a.last.val.substring(0,Math.max(a.last.start,a.last.end));a.$previewCopy||(a.$previewCopy=a.$preview.clone().removeAttr("id").css({position:"absolute",zIndex:-10,visibility:"hidden"}).addClass("ui-keyboard-preview-clone"),r||a.$previewCopy.css({"white-space":"pre",width:0}),s.usePreview?a.$preview.after(a.$previewCopy):a.$keyboard.prepend(a.$previewCopy)),r?(a.$previewCopy.height(a.lineHeight).val(o),a.preview.scrollTop=a.lineHeight*(Math.floor(a.$previewCopy[0].scrollHeight/a.lineHeight)-1)):(a.$previewCopy.val(o.replace(/\s/g," ")),i=/c/i.test(s.scrollAdjustment)?a.preview.clientWidth/2:s.scrollAdjustment,t=a.$previewCopy[0].scrollWidth-1,"undefined"==typeof a.last.scrollWidth&&(a.last.scrollWidth=t,a.last.direction=!0),n=a.last.scrollWidth===t?a.last.direction:a.last.scrollWidth<t,e=a.preview.clientWidth-i,n?t<e?a.preview.scrollLeft=0:a.preview.scrollLeft=t-e:t>=a.preview.scrollWidth-e?a.preview.scrollLeft=a.preview.scrollWidth-i:t-i>0?a.preview.scrollLeft=t-i:a.preview.scrollLeft=0,a.last.scrollWidth=t,a.last.direction=n)}},a.bindKeyboard=function(){var i,n=e.builtLayouts[a.layout];a.$preview.unbind("keypress keyup keydown mouseup touchend ".split(" ").join(a.namespace+" ")).bind("click"+a.namespace,function(){a.timer2=setTimeout(function(){a.saveCaret()},150)}).bind("keypress"+a.namespace,function(r){if(s.lockInput)return!1;var o=a.last.key=String.fromCharCode(r.charCode||r.which);if(a.last.virtual=!1,a.last.event=r,a.last.$key=[],a.checkCaret&&a.saveCaret(),a.capsLock=!!(o>=65&&o<=90&&!r.shiftKey||o>=97&&o<=122&&r.shiftKey),s.restrictInput){if((8===r.which||0===r.which)&&t.inArray(r.keyCode,a.alwaysAllowed))return;t.inArray(o,n.acceptedKeys)===-1&&(r.preventDefault(),i=t.extend({},r),i.type=e.events.inputRestricted,a.$el.trigger(i,[a,a.el]),t.isFunction(s.restricted)&&s.restricted(i,a,a.el))}else if((r.ctrlKey||r.metaKey)&&(97===r.which||99===r.which||118===r.which||r.which>=120&&r.which<=122))return;n.hasMappedKeys&&n.mappedKeys.hasOwnProperty(o)&&(a.last.key=n.mappedKeys[o],a.insertText(a.last.key),r.preventDefault()),a.checkMaxLength()}).bind("keyup"+a.namespace,function(i){switch(a.last.virtual=!1,i.which){case 9:if(a.tab&&s.tabNavigation&&!s.lockInput){a.shiftActive=i.shiftKey;var n=e.keyaction.tab(a);if(a.tab=!1,!n)return!1}else i.preventDefault();break;case 27:return a.close(!(!s.autoAccept||!s.autoAcceptOnEsc)&&"true"),!1}if(clearTimeout(a.throttled),a.throttled=setTimeout(function(){a.isVisible()&&a.checkCombos()},100),a.checkMaxLength(),a.$el.trigger(e.events.kbChange,[a,a.el]),a.last.val=a.$preview.val(),t.isFunction(s.change))return s.change(t.Event("change"),a,a.el),!1}).bind("keydown"+a.namespace,function(t){switch(a.last.virtual=!1,t.which){case 8:e.keyaction.bksp(a,null,t),t.preventDefault();break;case 9:return s.tabNavigation?(a.tab=!0,!1):(a.tab=!0,!1);case 13:e.keyaction.enter(a,null,t);break;case 20:a.shiftActive=a.capsLock=!a.capsLock,a.showKeySet(this);break;case 86:if(t.ctrlKey||t.metaKey){if(s.preventPaste)return void t.preventDefault();a.checkCombos()}}}).bind("mouseup touchend ".split(" ").join(a.namespace+" "),function(){a.last.virtual=!0,a.checkCaret&&a.saveCaret()}),a.$keyboard.bind("mousedown click touchstart ".split(" ").join(a.namespace+" "),function(e){e.stopPropagation(),a.isCurrent()||(a.reveal(),t(document).trigger("checkkeyboard"+a.namespace)),a.$preview.focus()}),s.preventPaste&&(a.$preview.bind("contextmenu"+a.namespace,function(t){t.preventDefault()}),a.$el.bind("contextmenu"+a.namespace,function(t){t.preventDefault()}))},a.bindKeys=function(){var i=e.css;a.$allKeys=a.$keyboard.find("button."+i.keyButton).unbind(a.namespace+" "+a.namespace+"kb").bind(s.keyBinding.split(" ").join(a.namespace+" ")+a.namespace+" "+e.events.kbRepeater,function(n){if(n.preventDefault(),!a.$keyboard.is(":visible"))return!1;var r,o,l=0,c=this,d=t(c),h=a.getLayers(d),u=h.map(function(){return t(this).attr("data-curtxt")}).get(),p=(new Date).getTime();if(h.each(function(t,e){if(e===c)return l=t,!1}),o=l<0?d:h.eq(l+d.data("curnum")),r=o.attr("data-action"),r=":"===r?":":(r||"").split(":")[0],!(p-(a.last.eventTime||0)<s.preventDoubleEventTime)){if(a.last.eventTime=p,a.last.event=n,a.last.virtual=!0,a.$preview.focus(),a.last.$key=o,a.last.key=o.attr("data-curtxt"),a.checkCaret&&e.caret(a.$preview,a.last),r.match("meta")&&(r="meta"),r in e.keyaction&&t.isFunction(e.keyaction[r])){if(e.keyaction[r](a,this,n)===!1)return!1}else"undefined"!=typeof r&&(u=a.last.key=a.wheel&&!t(this).hasClass(i.keyAction)?a.last.key:r,a.insertText(u),a.capsLock||s.stickyShift||n.shiftKey||(a.shiftActive=!1,a.showKeySet(this)));return e.caret(a.$preview,a.last),a.checkCombos(),a.$el.trigger(e.events.kbChange,[a,a.el]),a.last.val=a.$preview.val(),t.isFunction(s.change)?(s.change(t.Event(e.events.inputChange),a,a.el),!1):void 0}}).bind("mouseenter mouseleave touchstart ".split(" ").join(a.namespace+" "),function(e){if(a.isCurrent()){var n=t(this),r=a.getLayers(n),o=(r.length?r.map(function(){return t(this).attr("data-curtxt")||""}).get():"")||[n.find("."+i.keyText).text()];"mouseenter"!==e.type&&"touchstart"!==e.type||"password"===a.el.type||n.hasClass(s.css.buttonDisabled)||n.addClass(s.css.buttonHover).attr("title",function(t,i){return a.wheel&&""===i&&a.sets&&o.length>1&&"touchstart"!==e.type?s.wheelMessage:i}),"mouseleave"===e.type&&(n.data({curtxt:n.data("original"),curnum:0}),n.removeClass("password"===a.el.type?"":s.css.buttonHover).attr("title",function(t,e){return e===s.wheelMessage?"":e}).find("."+i.keyText).html(n.data("original")))}}).bind("mouseup"+a.namespace+" "+"mouseleave touchend touchmove touchcancel ".split(" ").join(a.namespace+"kb "),function(i){return a.last.virtual=!0,/(mouseleave|touchend|touchcancel)/i.test(i.type)?t(this).removeClass(s.css.buttonHover):(a.isVisible()&&a.isCurrent()&&a.$preview.focus(),a.checkCaret&&e.caret(a.$preview,a.last)),a.mouseRepeat=[!1,""],clearTimeout(a.repeater),!1}).bind("click"+a.namespace,function(){return!1}).not("."+i.keyAction).bind("mousewheel"+a.namespace,function(e,n){if(a.wheel){n=n||e.deltaY;var s,r=t(this),o=a.getLayers(r),l=o.length&&o.map(function(){return t(this).attr("data-curtxt")}).get()||[r.find("."+i.keyText).text()];return l.length>1?(s=r.data("curnum")+(n>0?-1:1),s>l.length-1&&(s=0),s<0&&(s=l.length-1)):s=0,r.data({curnum:s,layers:l,curtxt:l[s]}),r.find("."+i.keyText).html(l[s]),!1}}).add("."+i.keyPrefix+"tab bksp space enter".split(" ").join(",."+i.keyPrefix),a.$keyboard).bind("mousedown touchstart ".split(" ").join(a.namespace+"kb "),function(){if(0!==s.repeatRate){var e=t(this);a.mouseRepeat=[!0,e],setTimeout(function(){a.mouseRepeat[0]&&a.mouseRepeat[1]===e&&a.repeatKey(e)},s.repeatDelay)}return!1})},a.insertText=function(t){var i,n,s="\b"===t,r=a.$preview.val(),o=e.caret(a.$preview),l=r.length;o.end<o.start&&(o.end=o.start),o.start>l&&(o.end=o.start=l),"TEXTAREA"===a.preview.nodeName&&e.msie&&"\n"===r.substr(o.start,1)&&(o.start+=1,o.end+=1),i=s&&o.start===o.end,t=s?"":t,n=o.start+(i?-1:t.length),"{d}"===t&&(t="",n=o.start,o.end+=1),a.$preview.val(r.substr(0,o.start-(i?1:0))+t+r.substr(o.end)),a.saveCaret(n,n),a.setScroll()},a.checkMaxLength=function(){var t,i,n=a.$preview.val();s.maxLength!==!1&&n.length>s.maxLength&&(t=e.caret(a.$preview).start,i=Math.min(t,s.maxLength),s.maxInsert||(n=a.last.val,i=t-1),a.$preview.val(n.substring(0,s.maxLength)),a.saveCaret(i,i)),a.$decBtn.length&&a.checkDecimal()},a.repeatKey=function(t){t.trigger(e.events.kbRepeater),a.mouseRepeat[0]&&(a.repeater=setTimeout(function(){a.repeatKey(t)},a.repeatTime))},a.showKeySet=function(t){s=a.options;var i=e.css,n="",r=(a.shiftActive?1:0)+(a.altActive?2:0);return a.shiftActive||(a.capsLock=!1),a.metaActive?(n=t&&t.name&&/meta/i.test(t.name)?t.name:"",""===n?n=a.metaActive===!0?"":a.metaActive:a.metaActive=n,(!s.stickyShift&&a.last.keyset[2]!==a.metaActive||(a.shiftActive||a.altActive)&&!a.$keyboard.find("."+i.keySet+"-"+n+a.rows[r]).length)&&(a.shiftActive=a.altActive=!1)):!s.stickyShift&&a.last.keyset[2]!==a.metaActive&&a.shiftActive&&(a.shiftActive=a.altActive=!1),r=(a.shiftActive?1:0)+(a.altActive?2:0),n=0!==r||a.metaActive?""===n?"":"-"+n:"-normal",a.$keyboard.find("."+i.keySet+n+a.rows[r]).length?(a.$keyboard.find("."+i.keyPrefix+"alt,."+i.keyPrefix+"shift,."+i.keyAction+"[class*=meta]").removeClass(s.css.buttonActive).end().find("."+i.keyPrefix+"alt").toggleClass(s.css.buttonActive,a.altActive).end().find("."+i.keyPrefix+"shift").toggleClass(s.css.buttonActive,a.shiftActive).end().find("."+i.keyPrefix+"lock").toggleClass(s.css.buttonActive,a.capsLock).end().find("."+i.keySet).hide().end().find("."+i.keySet+n+a.rows[r]).show().end().find("."+i.keyAction+"."+i.keyboard+n).addClass(s.css.buttonActive),a.last.keyset=[a.shiftActive,a.altActive,a.metaActive],void a.$el.trigger(e.events.kbKeysetChange,[a,a.el])):(a.shiftActive=a.last.keyset[0],a.altActive=a.last.keyset[1],void(a.metaActive=a.last.keyset[2]))},a.checkCombos=function(){if(!a.isVisible())return a.$preview.val();var t,i,n,r,o=a.$preview.val(),l=e.caret(a.$preview),c=e.builtLayouts[a.layout],d=o.length;if(l.end<l.start&&(l.end=l.start),l.start>d&&(l.end=l.start=d),e.msie&&"\n"===o.substr(l.start,1)&&(l.start+=1,l.end+=1),s.useCombos&&(e.msie?o=o.replace(a.regex,function(t,e,i){return s.combos.hasOwnProperty(e)?s.combos[e][i]||t:t}):a.$preview.length&&(n=l.start-(l.start-2>=0?2:0),e.caret(a.$preview,n,l.end),r=(e.caret(a.$preview).text||"").replace(a.regex,function(t,e,i){return s.combos.hasOwnProperty(e)?s.combos[e][i]||t:t}),a.$preview.val(e.caret(a.$preview).replaceStr(r)),o=a.$preview.val())),s.restrictInput&&""!==o){for(n=o,i=c.acceptedKeys.length,t=0;t<i;t++)""!==n&&(r=c.acceptedKeys[t],o.indexOf(r)>=0&&(/[\[|\]|\\|\^|\$|\.|\||\?|\*|\+|\(|\)|\{|\}]/g.test(r)&&(r="\\"+r),n=n.replace(new RegExp(r,"g"),"")));""!==n&&(o=o.replace(n,""))}return l.start+=o.length-d,l.end+=o.length-d,a.$preview.val(o),a.saveCaret(l.start,l.end),a.setScroll(),a.checkMaxLength(),s.acceptValid&&a.checkValid(),o},a.checkValid=function(){var i=e.css,n=!0;t.isFunction(s.validate)&&(n=s.validate(a,a.$preview.val(),!1)),a.$keyboard.find("."+i.keyPrefix+"accept").toggleClass(i.inputInvalid,!n).toggleClass(i.inputValid,n)},a.checkDecimal=function(){a.decimal&&/\./g.test(a.preview.value)||!a.decimal&&/\,/g.test(a.preview.value)?a.$decBtn.attr({disabled:"disabled","aria-disabled":"true"}).removeClass(s.css.buttonHover).addClass(s.css.buttonDisabled):a.$decBtn.removeAttr("disabled").attr({"aria-disabled":"false"}).addClass(s.css.buttonDefault).removeClass(s.css.buttonDisabled)},a.getLayers=function(i){var n=e.css,s=i.attr("data-pos"),a=i.closest("."+n.keyboard).find('button[data-pos="'+s+'"]');return a.filter(function(){return""!==t(this).find("."+n.keyText).text()}).add(i)},a.switchInput=function(e,i){if(t.isFunction(s.switchInput))s.switchInput(a,e,i);else{a.$keyboard.length&&a.$keyboard.hide();var n,r=!1,o=t("button, input, textarea, a").filter(":visible").not(":disabled"),l=o.index(a.$el)+(e?1:-1);if(a.$keyboard.length&&a.$keyboard.show(),l>o.length-1&&(r=s.stopAtEnd,l=0),l<0&&(r=s.stopAtEnd,l=o.length-1),!r){if(i=a.close(i),!i)return;n=o.eq(l).data("keyboard"),n&&n.options.openOn.length?n.focusOn():o.eq(l).focus()}}return!1},a.close=function(n){if(a.isOpen){clearTimeout(a.throttled);var r=e.css,o=e.events,l=n?a.checkCombos():a.originalContent;if(n&&t.isFunction(s.validate)&&!s.validate(a,l,!0)&&(l=a.originalContent,n=!1,s.cancelClose))return;a.isCurrent(!1),a.isOpen=!1,a.$preview.val(l),a.$el.removeClass(r.isCurrent+" "+r.inputAutoAccepted).addClass(n?n===!0?"":r.inputAutoAccepted:"").trigger(s.alwaysOpen?"":o.kbBeforeClose,[a,a.el,n||!1]).val(l).trigger(n?o.inputAccepted:o.inputCanceled,[a,a.el]).trigger(s.alwaysOpen?o.kbInactive:o.kbHidden,[a,a.el]).blur(),a.last.eventTime=(new Date).getTime(),s.openOn&&(a.timer=setTimeout(function(){i.active&&a&&(a.$el.bind(s.openOn+a.namespace,function(){a.focusOn()}),t(":focus")[0]===a.el&&a.$el.blur())},500)),!s.alwaysOpen&&a.$keyboard&&(a.$keyboard.remove(),a.$keyboard=[]),a.watermark||""!==a.el.value||""===a.inPlaceholder||a.$el.addClass(r.placeholder).val(a.inPlaceholder),a.$el.trigger(o.inputChange)}return!!n},a.accept=function(){return a.close(!0)},a.escClose=function(i){if(i&&"keyup"===i.type)return 27===i.which?a.close(!(!s.autoAccept||!s.autoAcceptOnEsc)&&"true"):"";if(a.isOpen&&(!a.isCurrent()&&a.isOpen||a.isOpen&&i.target!==a.el)){if(s.stayOpen&&!t(i.target).hasClass("ui-keyboard-input"))return;e.allie&&i.preventDefault(),a.close(!!s.autoAccept&&"true")}},a.keyBtn=t("<button />").attr({role:"button",type:"button","aria-disabled":"false",tabindex:"-1"}).addClass(e.css.keyButton),a.addKey=function(i,n,r){var o,l,c,d,h,u=e.css,p=n.split(":"),f=p.length-1,v=r===!0?i:s.display[p[0]]||i,m=r===!0?i.charCodeAt(0):i;return/\(.+\)/.test(v)&&(d=v.replace(/\(([^()]+)\)/,""),c=v.match(/\(([^()]+)\)/)[1],v=d,h=d.split(":"),d=""!==h[0]&&h.length>1?h[0]:d,e.builtLayouts[a.layout].mappedKeys[c]=d),h=v.split(":"),""===h[0]&&""===h[1]&&(v=":"),v=""!==h[0]&&h.length>1?h[0]:v,v=t.trim(r?v:p[1]||v),o=h.length>1?t.trim(h[1]).replace(/_/g," ")||"":f>0?p[f]||"":"",l=v.length>2?" "+u.keyWide:"",l+=r?"":" "+u.keyAction,"bksp"==i&&(v="删除"),a.keyBtn.clone().attr({"data-value":v,name:m,"data-pos":a.temp[1]+","+a.temp[2],title:o,"data-action":i,"data-original":v,"data-curtxt":v,"data-curnum":0}).addClass((""===m?"":u.keyPrefix+m+l+" ")+s.css.buttonDefault).html('<span class="'+u.keyText+'">'+v+"</span>").appendTo(a.temp[0])},a.customHash=function(){var t,e,i,n,a,r=s.customLayout,o=[],l=[];for(e in r)r.hasOwnProperty(e)&&o.push(r[e]);if(l=l.concat.apply(l,o).join(" "),i=0,a=l.length,0===a)return i;for(t=0;t<a;t++)n=l.charCodeAt(t),i=(i<<5)-i+n,i&=i;return i},a.buildKeyboard=function(i,n){t.isEmptyObject(s.display)&&a.updateLanguage();var r,o,l,c=e.css,d=0,h=e.builtLayouts[i||a.layout]={mappedKeys:{},acceptedKeys:[]},u=h.acceptedKeys=[],p=t("<div />").addClass(c.keyboard+" "+s.css.container+(s.alwaysOpen?" "+c.alwaysOpen:"")).attr({role:"textbox"}).hide();return(n&&"custom"===s.layout||!e.layouts.hasOwnProperty(s.layout))&&(s.layout="custom",e.layouts.custom=s.customLayout||{normal:["{cancel}"]}),t.each(e.layouts[n?s.layout:i],function(e,i){if(""!==e&&!/^(name|lang|rtl)$/i.test(e))for("default"===e&&(e="normal"),d++,o=t("<div />").attr("name",e).addClass(c.keySet+" "+c.keySet+"-"+e).appendTo(p).toggle("normal"===e),r=0;r<i.length;r++)l=t.trim(i[r]).replace(/\{(\.?)[\s+]?:[\s+]?(\.?)\}/g,"{$1:$2}"),a.buildRow(o,r,l.split(/\s+/),u),o.find("."+c.keyButton+":last").after('<br class="'+c.endRow+'">')}),d>1&&(a.sets=!0),h.hasMappedKeys=!t.isEmptyObject(h.mappedKeys),h.$keyboard=p,p},a.buildRow=function(i,n,r,o){var l,c,d,h,u,p,f=e.css;for(d=0;d<r.length;d++)if(a.temp=[i,n,d],h=!1,0!==r[d].length)if(/^\{\S+\}$/.test(r[d])){if(u=r[d].match(/^\{(\S+)\}$/)[1],/\!\!/.test(u)&&(u=u.replace("!!",""),h=!0),/^sp:((\d+)?([\.|,]\d+)?)(em|px)?$/i.test(u)&&(p=parseFloat(u.replace(/,/,".").match(/^sp:((\d+)?([\.|,]\d+)?)(em|px)?$/i)[1]||0),t('<span class="'+f.keyText+'">&nbsp;</span>').width(u.match(/px/i)?p+"px":2*p+"em").addClass(f.keySpacer).appendTo(i)),/^empty(:((\d+)?([\.|,]\d+)?)(em|px)?)?$/i.test(u)&&(p=/:/.test(u)?parseFloat(u.replace(/,/,".").match(/^empty:((\d+)?([\.|,]\d+)?)(em|px)?$/i)[1]||0):"",a.addKey(""," ").addClass(s.css.buttonDisabled+" "+s.css.buttonEmpty).attr("aria-disabled",!0).width(p?u.match("px")?p+"px":2*p+"em":"")),/^meta\d+\:?(\w+)?/i.test(u)){a.addKey(u.split(":")[0],u).addClass(f.keyHasActive);continue}switch(c=u.split(":"),c[0].toLowerCase()){case"a":case"accept":a.addKey("accept",u).addClass(s.css.buttonAction+" "+f.keyAction);break;case"alt":case"altgr":a.addKey("alt",u).addClass(f.keyHasActive);break;case"b":case"bksp":a.addKey("bksp",u);break;case"c":case"cancel":a.addKey("cancel",u).addClass(s.css.buttonAction+" "+f.keyAction);break;case"combo":a.addKey("combo",u).addClass(f.keyHasActive).toggleClass(s.css.buttonActive,s.useCombos);break;case"dec":o.push(a.decimal?".":","),a.addKey("dec",u);break;case"e":case"enter":a.addKey("enter",u).addClass(s.css.buttonAction+" "+f.keyAction);break;case"lock":a.addKey("lock",u).addClass(f.keyHasActive);break;case"s":case"shift":a.addKey("shift",u).addClass(f.keyHasActive);break;case"sign":o.push("-"),a.addKey("sign",u);break;case"space":o.push(" "),a.addKey("space",u);break;case"t":case"tab":a.addKey("tab",u);break;default:e.keyaction.hasOwnProperty(c[0])&&a.addKey(c[0],u).toggleClass(s.css.buttonAction+" "+f.keyAction,h)}}else l=r[d],o.push(":"===l?l:l.split(":")[0]),a.addKey(l,l,!0)},a.destroy=function(){clearTimeout(a.timer),clearTimeout(a.timer2),t(document).unbind(a.namespace),t(window).unbind(a.namespace),a.el.active=!1,a.$keyboard.length&&a.$keyboard.remove();var i=e.css;a.$el.removeClass([i.input,i.locked,i.placeholder,i.noKeyboard,i.alwaysOpen,s.css.input].join(" ")).removeAttr("aria-haspopup").removeAttr("role").unbind(a.namespace).removeData("keyboard"),a=null},a.init()};return e.css={idSuffix:"_keyboard",input:"ui-keyboard-input",wrapper:"ui-keyboard-preview-wrapper",preview:"ui-keyboard-preview",keyboard:"ui-keyboard",keySet:"ui-keyboard-keyset",keyButton:"ui-keyboard-button",keyWide:"ui-keyboard-widekey",keyPrefix:"ui-keyboard-",keyText:"ui-keyboard-text",keyHasActive:"ui-keyboard-hasactivestate",keyAction:"ui-keyboard-actionkey",keySpacer:"ui-keyboard-spacer",keyToggle:"ui-keyboard-toggle",keyDisabled:"ui-keyboard-disabled",locked:"ui-keyboard-lockedinput",alwaysOpen:"ui-keyboard-always-open",noKeyboard:"ui-keyboard-nokeyboard",placeholder:"ui-keyboard-placeholder",hasFocus:"ui-keyboard-has-focus",isCurrent:"ui-keyboard-input-current",inputValid:"ui-keyboard-valid-input",inputInvalid:"ui-keyboard-invalid-input",inputAutoAccepted:"ui-keyboard-autoaccepted",endRow:"ui-keyboard-button-endrow"},e.events={kbChange:"keyboardChange",kbBeforeClose:"beforeClose",kbBeforeVisible:"beforeVisible",kbVisible:"visible",kbInit:"initialized",kbInactive:"inactive",kbHidden:"hidden",kbRepeater:"repeater",kbKeysetChange:"keysetChange",inputAccepted:"accepted",inputCanceled:"canceled",inputChange:"change",inputRestricted:"restricted"},e.keyaction={accept:function(t){return t.close(!0),!1},alt:function(t,e){t.altActive=!t.altActive,t.showKeySet(e)},bksp:function(t){t.insertText("\b")},cancel:function(t){return t.close(),!1},clear:function(t){t.$preview.val("")},combo:function(t){var i=!t.options.useCombos;return t.options.useCombos=i,t.$keyboard.find("."+e.css.keyPrefix+"combo").toggleClass(t.options.css.buttonActive,i),i&&t.checkCombos(),!1},dec:function(t){t.insertText(t.decimal?".":",")},del:function(t){t.insertText("{d}")},default:function(t,e){t.shiftActive=t.altActive=t.metaActive=!1,t.showKeySet(e)},enter:function(e,i,n){var s=e.el.nodeName,a=e.options;return n.shiftKey?a.enterNavigation?e.switchInput(!n[a.enterMod],!0):e.close(!0):a.enterNavigation&&("TEXTAREA"!==s||n[a.enterMod])?e.switchInput(!n[a.enterMod],!!a.autoAccept&&"true"):void("TEXTAREA"===s&&t(n.target).closest("button").length&&e.insertText(" \n"))},lock:function(t,e){t.last.keyset[0]=t.shiftActive=t.capsLock=!t.capsLock,t.showKeySet(e)},left:function(t){var i=e.caret(t.$preview);i.start-1>=0&&(t.last.start=t.last.end=i.start-1,e.caret(t.$preview,t.last),t.setScroll())},meta:function(e,i){e.metaActive=!t(i).hasClass(e.options.css.buttonActive),e.showKeySet(i)},next:function(t){return t.switchInput(!0,t.options.autoAccept),!1},normal:function(t,e){t.shiftActive=t.altActive=t.metaActive=!1,t.showKeySet(e)},prev:function(t){return t.switchInput(!1,t.options.autoAccept),!1},right:function(t){var i=e.caret(t.$preview);i.start+1<=t.$preview.val().length&&(t.last.start=t.last.end=i.start+1,e.caret(t.$preview,t.last),t.setScroll())},shift:function(t,e){t.last.keyset[0]=t.shiftActive=!t.shiftActive,t.showKeySet(e)},sign:function(t){/^\-?\d*\.?\d*$/.test(t.$preview.val())&&t.$preview.val(t.$preview.val()*-1)},space:function(t){t.insertText(" ")},tab:function(t){var e=t.el.nodeName,i=t.options;return"INPUT"===e?!!i.tabNavigation&&t.switchInput(!t.shiftActive,!0):void t.insertText("\t")},toggle:function(t){t.enabled=!t.enabled,t.toggle()}},e.builtLayouts={},e.layouts={alpha:{normal:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} a b c d e f g h i j [ ] \\","k l m n o p q r s ; ' {enter}","{shift} t u v w x y z , . / {shift}","{accept} {space} {cancel}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} A B C D E F G H I J { } |",'K L M N O P Q R S : " {enter}',"{shift} T U V W X Y Z < > ? {shift}","{accept} {space} {cancel}"]},qwerty:{normal:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}","{accept} {space} {cancel}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}","{accept} {space} {cancel}"]},international:{normal:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}","{accept} {alt} {space} {alt} {cancel}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}","{accept} {alt} {space} {alt} {cancel}"],alt:["~ ¡ ² ³ ¤ € ¼ ½ ¾ ‘ ’ ¥ × {bksp}","{tab} ä å é ® þ ü ú í ó ö « » ¬","á ß ð f g h j k ø ¶ ´ {enter}","{shift} æ x © v b ñ µ ç > ¿ {shift}","{accept} {alt} {space} {alt} {cancel}"],"alt-shift":["~ ¹ ² ³ £ € ¼ ½ ¾ ‘ ’ ¥ ÷ {bksp}","{tab} Ä Å É ® Þ Ü Ú Í Ó Ö « » ¦","Ä § Ð F G H J K Ø ° ¨ {enter}","{shift} Æ X ¢ V B Ñ µ Ç . ¿ {shift}","{accept} {alt} {space} {alt} {cancel}"]},colemak:{normal:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w f p g j l u y ; [ ] \\","{bksp} a r s t d h n e i o ' {enter}","{shift} z x c v b k m , . / {shift}","{accept} {space} {cancel}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W F P G J L U Y : { } |",'{bksp} A R S T D H N E I O " {enter}',"{shift} Z X C V B K M < > ? {shift}","{accept} {space} {cancel}"]},dvorak:{normal:["` 1 2 3 4 5 6 7 8 9 0 [ ] {bksp}","{tab} ' , . p y f g c r l / = \\","a o e u i d h t n s - {enter}","{shift} ; q j k x b m w v z {shift}","{accept} {space} {cancel}"],shift:["~ ! @ # $ % ^ & * ( ) { } {bksp}",'{tab} " < > P Y F G C R L ? + |',"A O E U I D H T N S _ {enter}","{shift} : Q J K X B M W V Z {shift}","{accept} {space} {cancel}"]},num:{normal:["= ( ) {b}","{clear} / * -","7 8 9 +","4 5 6 {sign}","1 2 3 %","0 {dec} {a} {c}"]}},e.language=t.extend({},e.language,{en:{display:{a:"✔:Accept (Shift-Enter)",accept:"Accept:Accept (Shift-Enter)",alt:"Alt:⌥ AltGr",b:"⌫:Backspace",bksp:"Bksp:Backspace",c:"✖:Cancel (Esc)",cancel:"Cancel:Cancel (Esc)",clear:"C:Clear",combo:"ö:Toggle Combo Keys",dec:".:Decimal",e:"⏎:Enter",empty:" ",enter:"Enter:Enter ⏎",left:"←",lock:"Lock:⇪ Caps Lock",next:"Next ⇨",prev:"⇦ Prev",right:"→",s:"⇧:Shift",shift:"Shift:Shift",sign:"±:Change Sign",space:"&nbsp;:Space",t:"⇥:Tab",tab:"⇥ Tab:Tab",toggle:" "},wheelMessage:"Use mousewheel to see other keys",comboRegex:/([`\'~\^\"ao])([a-z])/gim,combos:{"`":{a:"à",A:"À",e:"è",E:"È",i:"ì",I:"Ì",o:"ò",O:"Ò",u:"ù",U:"Ù",y:"ỳ",Y:"Ỳ"},"'":{a:"á",A:"Á",e:"é",E:"É",i:"í",I:"Í",o:"ó",O:"Ó",u:"ú",U:"Ú",y:"ý",Y:"Ý"},'"':{a:"ä",A:"Ä",e:"ë",E:"Ë",i:"ï",I:"Ï",o:"ö",O:"Ö",u:"ü",U:"Ü",y:"ÿ",Y:"Ÿ"},"^":{a:"â",A:"Â",e:"ê",E:"Ê",i:"î",I:"Î",o:"ô",O:"Ô",u:"û",U:"Û",y:"ŷ",Y:"Ŷ"},"~":{a:"ã",A:"Ã",e:"ẽ",E:"Ẽ",i:"ĩ",I:"Ĩ",o:"õ",O:"Õ",u:"ũ",U:"Ũ",y:"ỹ",Y:"Ỹ",n:"ñ",N:"Ñ"}}}}),e.defaultOptions={language:null,rtl:!1,layout:"qwerty",customLayout:null,position:{of:null,my:"center top",at:"center top",at2:"center bottom"},reposition:!0,usePreview:!0,alwaysOpen:!1,initialFocus:!0,stayOpen:!1,css:{input:"ui-widget-content ui-corner-all",
container:"ui-widget-content ui-widget ui-corner-all ui-helper-clearfix",buttonDefault:"ui-state-default ui-corner-all",buttonHover:"ui-state-hover",buttonAction:"ui-state-active",buttonActive:"ui-state-active",buttonDisabled:"ui-state-disabled",buttonEmpty:"ui-keyboard-empty"},autoAccept:!1,autoAcceptOnEsc:!1,lockInput:!1,restrictInput:!1,acceptValid:!1,cancelClose:!0,tabNavigation:!1,enterNavigation:!1,enterMod:"altKey",stopAtEnd:!0,appendLocally:!1,appendTo:"body",stickyShift:!0,preventPaste:!1,caretToEnd:!1,scrollAdjustment:10,maxLength:!1,maxInsert:!0,repeatDelay:500,repeatRate:20,resetDefault:!1,openOn:"focus",keyBinding:"mousedown touchstart",useCombos:!0,validate:function(t,e,i){return!0}},e.comboRegex=/([`\'~\^\"ao])([a-z])/gim,e.currentKeyboard="",t('<!--[if lte IE 8]><script>jQuery("body").addClass("oldie");</script><![endif]--><!--[if IE]><script>jQuery("body").addClass("ie");</script><![endif]-->').appendTo("body").remove(),e.msie=t("body").hasClass("oldie"),e.allie=t("body").hasClass("ie"),e.watermark="undefined"!=typeof document.createElement("input").placeholder,e.checkCaretSupport=function(){if("boolean"!=typeof e.checkCaret){var i=t('<div style="height:0px;width:0px;overflow:hidden;"><input type="text" value="testing"></div>').prependTo("body");e.caret(i.find("input"),3,3),e.checkCaret=3!==e.caret(i.find("input").hide().show()).start,i.remove()}return e.checkCaret},e.caret=function(t,e,i){if(!t.length||t.is(":hidden")||"hidden"===t.css("visibility"))return{};var n,s,a,r;return"undefined"!=typeof e?("object"==typeof e&&"start"in e&&"end"in e?(n=e.start,s=e.end):"number"==typeof e&&"number"==typeof i&&(n=e,s=i),t.caret(n,s)):(r=t.caret(),n=r.start,s=r.end,a=t[0].value||t.text()||"",{start:n,end:s,text:a.substring(n,s),replaceStr:function(t){return a.substring(0,n)+t+a.substring(s,a.length)}})},t.fn.keyboard=function(e){return this.each(function(){t(this).data("keyboard")||new t.keyboard(this,e)})},t.fn.getkeyboard=function(){return this.data("keyboard")},t.fn.caret=function(t,e){if("undefined"==typeof this[0]||this.is(":hidden")||"hidden"===this.css("visibility"))return this;var i,n,s,a,r,o=document.selection,l=this,c=l[0],d=c.scrollTop,h=!1,u=!0;try{h="selectionStart"in c}catch(t){u=!1}return u&&"undefined"!=typeof t?(/(email|number)/i.test(c.type)||(h?(c.selectionStart=t,c.selectionEnd=e):(i=c.createTextRange(),i.collapse(!0),i.moveStart("character",t),i.moveEnd("character",e-t),i.select())),(l.is(":visible")||"hidden"!==l.css("visibility"))&&c.focus(),c.scrollTop=d,this):(/(email|number)/i.test(c.type)?t=e=l.val().length:h?(t=c.selectionStart,e=c.selectionEnd):o?"TEXTAREA"===c.nodeName?(r=l.val(),n=o.createRange(),s=n.duplicate(),s.moveToElementText(c),s.setEndPoint("EndToEnd",n),t=s.text.replace(/\r/g,"\n").length,e=t+n.text.replace(/\r/g,"\n").length):(r=l.val().replace(/\r/g,"\n"),n=o.createRange().duplicate(),n.moveEnd("character",r.length),t=""===n.text?r.length:r.lastIndexOf(n.text),n=o.createRange().duplicate(),n.moveStart("character",-r.length),e=n.text.length):t=e=(c.value||"").length,a=c.value||"",{start:t,end:e,text:a.substring(t,e),replace:function(i){return a.substring(0,t)+i+a.substring(e,a.length)}})},e})},function(t,e){!function(t){t.fn.paginate=function(e){var i=t.extend({},t.fn.paginate.defaults,e);return this.each(function(){$this=t(this);var e=t.meta?t.extend({},i,$this.data()):i,n=e.start;t.fn.draw(e,$this,n)})};var e=0,i=0,n=(navigator.appName,navigator.appVersion);if(n.indexOf("MSIE 7.0")>0)var s="ie7";t.fn.paginate.defaults={count:5,start:12,display:5,border:!0,border_color:"#fff",text_color:"#8cc59d",background_color:"black",border_hover_color:"#fff",text_hover_color:"#fff",background_hover_color:"#fff",rotate:!0,images:!0,mouse:"slide",onChange:function(){return!1}},t.fn.draw=function(n,a,r){if(n.display>n.count&&(n.display=n.count),$this.empty(),n.images)var o="jPag-sprevious-img",l="jPag-snext-img";else var o="jPag-sprevious",l="jPag-snext";var c=t(document.createElement("a")).addClass("jPag-first").html("第一页");if(n.rotate)if(n.images)var d=t(document.createElement("span")).addClass(o);else var d=t(document.createElement("span")).addClass(o).html("&laquo;");var h=t(document.createElement("div")).addClass("jPag-control-back");h.append(c).append(d);for(var u,p=t(document.createElement("div")).css("overflow","hidden"),f=t(document.createElement("ul")).addClass("jPag-pages"),v=((n.display-1)/2,0);v<n.count;v++){var m=v+1;if(m==r){var g=t(document.createElement("li")).html('<span class="jPag-current">'+m+"</span>");u=g,f.append(g)}else{var g=t(document.createElement("li")).html("<a>"+m+"</a>");f.append(g)}}if(p.append(f),n.rotate)if(n.images)var y=t(document.createElement("span")).addClass(l);else var y=t(document.createElement("span")).addClass(l).html("&raquo;");var b=t(document.createElement("a")).addClass("jPag-last").html("最后一页"),$=t(document.createElement("div")).addClass("jPag-control-front");if($.append(y).append(b),$this.addClass("jPaginate").append(h).append(p).append($),n.border){if("none"==n.background_color)var x={color:n.text_color,border:"1px solid "+n.border_color};else var x={color:n.text_color,"background-color":n.background_color,border:"1px solid "+n.border_color};if("none"==n.background_hover_color)var S={color:n.text_hover_color,border:"1px solid "+n.border_hover_color};else var S={color:n.text_hover_color,"background-color":n.background_hover_color,border:"1px solid "+n.border_hover_color}}else{if("none"==n.background_color)var x={color:n.text_color};else var x={color:n.text_color,"background-color":n.background_color};if("none"==n.background_hover_color)var S={color:n.text_hover_color};else var S={color:n.text_hover_color,"background-color":n.background_hover_color}}t.fn.applystyle(n,$this,x,S,c,f,p,$);var w=e-c.parent().width()-3;"ie7"==s?(p.css("width",w+72+"px"),$.css("left",e+6+72+"px")):(p.css("width",w+"px"),$.css("left",e+6+"px")),n.rotate&&(y.hover(function(){thumbs_scroll_interval=setInterval(function(){var t=p.scrollLeft()+1;p.scrollLeft(t)},20)},function(){clearInterval(thumbs_scroll_interval)}),d.hover(function(){thumbs_scroll_interval=setInterval(function(){var t=p.scrollLeft()-1;p.scrollLeft(t)},20)},function(){clearInterval(thumbs_scroll_interval)}),"press"==n.mouse?(y.mousedown(function(){thumbs_mouse_interval=setInterval(function(){var t=p.scrollLeft()+5;p.scrollLeft(t)},20)}).mouseup(function(){clearInterval(thumbs_mouse_interval)}),d.mousedown(function(){thumbs_mouse_interval=setInterval(function(){var t=p.scrollLeft()-5;p.scrollLeft(t)},20)}).mouseup(function(){clearInterval(thumbs_mouse_interval)})):(d.click(function(t){var e=w-10,i=p.scrollLeft()-e;p.animate({scrollLeft:i+"px"})}),y.click(function(t){var e=w-10,i=p.scrollLeft()+e;p.animate({scrollLeft:i+"px"})}))),c.click(function(t){p.animate({scrollLeft:"0px"}),p.find("li").eq(0).click()}),b.click(function(t){p.animate({scrollLeft:i+"px"}),p.find("li").eq(n.count-1).click()}),p.find("li").click(function(e){u.html("<a>"+u.find(".jPag-current").html()+"</a>");var i=t(this).find("a").html();t(this).html('<span class="jPag-current">'+i+"</span>"),u=t(this),t.fn.applystyle(n,t(this).parent().parent().parent(),x,S,c,f,p,$);var a=this.offsetLeft/2,r=(p.scrollLeft()+a,a-w/2);"ie7"==s?p.animate({scrollLeft:a+r-c.parent().width()+52+"px"}):p.animate({scrollLeft:a+r-c.parent().width()+"px"}),n.onChange(i)});var k=p.find("li").eq(n.start-1);k.attr("id","tmp");var _=document.getElementById("tmp").offsetLeft/2;k.removeAttr("id");var C=_-w/2;"ie7"==s?p.animate({scrollLeft:_+C-c.parent().width()+52+"px"}):p.animate({scrollLeft:_+C-c.parent().width()+"px"})},t.fn.applystyle=function(n,s,a,r,o,l,c,d){s.find("a").css(a),s.find("span.jPag-current").css(r),s.find("a").hover(function(){t(this).css(r)},function(){t(this).css(a)}),s.css("padding-left",o.parent().width()+5+"px"),i=0,s.find("li").each(function(t,s){t==n.display-1&&(e=this.offsetLeft+this.offsetWidth),i+=this.offsetWidth+1}),l.css("width",i+"px")}}(jQuery)},function(t,e,i){var n,s;n=[i(10),i(16)],s=function(t,e){var i=function(e){this.EJS={main:"./views/eleSell/index.ejs",noRecOrder:"./views/eleSell/noRecOrder.ejs",existOrder:"./views/eleSell/existOrder.ejs",selfTakeOver:"./views/eleSell/selfTakeOver.ejs",quickMenu:"./views/eleSell/quickMenu.ejs",goStoreTake:"./views/eleSell/goStoreTake.ejs",noRecOrderTable:"./views/eleSell/noRecOrderTable.ejs",modifyTable:"./views/eleSell/modifyTable.ejs",scanCodeTable:"./views/eleSell/scanCodeTable.ejs",tableMoneyInfo:"./views/eleSell/tableMoneyInfo.ejs",tableModifyInfo:"./views/eleSell/tableModifyInfo.ejs",orderQueryTemp:"./views/eleSell/orderQueryTemp.ejs",checkContent:"./views/eleSell/checkContent.ejs",xrSingleOrder:"./views/eleSell/xrSingleOrder.ejs",chooseSendType:"./views/eleSell/chooseSendType.ejs"},this.styles=[],this.init(),this.quickMenu(),this.eleSellPrint(),this.initExpend(),this.xrOrderQuery(),t.iScroll=new IScroll("#wrapper",{mouseWheel:!0,scrollbars:!0})};return i.prototype={init:function(){var i=this;i.userinfo=t.itemData("vuex").userInfo,t.loadEJS({ejs_url:this.EJS.main,jsondata:{},jq_object:$("#moudleContent")}),$("#Pagination_all").parent().removeClass("hide"),this.eleSellService=e.getService("EleSellService"),$("#nav li").click(function(){$(this).find("a").addClass("selected").end().siblings().find("a").removeClass(),$("#Pagination_all").parent().hasClass("hide")&&$("#Pagination_all").parent().removeClass("hide"),"0"==$("#nav li").index(this)?($("#menu_con > div").find(".waitRec").children().remove(),i.waitRecOrder("1")):"1"==$("#nav li").index(this)?($("#menu_con > div").find(".goStoreExtract").children().remove(),$("#Pagination_all").parent().addClass("hide"),i.goStoreExtract()):"2"==$("#nav li").index(this)?($("#menu_con > div").find(".selfTakeOver").children().remove(),i.selfTakeOver()):"3"==$("#nav li").index(this)&&($("#menu_con > div").find(".existOrder").children().remove(),i.recOrder()),$("#menu_con > div").hide().eq($("#nav li").index(this)).show()}),this.waitRecOrder("1")},waitRecOrder:function(t){var e={orderStatus:"0",payStatus:"1",currentPageNum:t||"0",pageCount:"5"},i=$("#menu_con .waitRec");this.queryList(e,this.EJS.noRecOrder,i),this.paging(e,this.EJS.noRecOrder,i),this.getInterCode(),this.searchProductToGrid(),this.acceptOrRefuseOrder()},acceptOrRefuseOrder:function(){var e=this;$(".orders").die(),$(".single").die(),$(".jiedan").live("click",function(){var i=this,n=$(this).parents(".rebounds").attr("sendAddress"),s=$(this).parents(".rebounds").attr("sendType"),a=t.itemData("vuex"),r=a.userInfo&&a.userInfo.shop&&a.userInfo.shop.branch||"1001";"1"==s?t.showConfrim({okCallBack:function(){var n=0,s=0,a=$(i).parents(".info").find(".OrderTable>table").children("tbody").children(),o=$(i).parents(".info").find(".scanTable>table").children("tbody").children();if(a.each(function(t,e){if(0!=t){var i=$(e).find(".pnum").text();n+=Number(i)}}),o.each(function(t,e){if(0!=t){var i=$(e).find(".product_num>span").text();s+=Number(i)}}),n!=s)return t.showDialog("还有未扫码完的商品"),!1;var l={editor:e.userinfo&&e.userinfo.shop.shopowner||"匿名店长",orderId:$(i).attr("data-orderId"),orderStatus:"1"},c=$(i).attr("orderSN");"1001"==r?e.eleSellService.txzVerification({orderSn:c},function(i){if(API)var n=API.sendReuqest(i.tzxUrl,i.hexiaoReqParam);if(n=JSON.parse(n),n.code&&"000000"==n.code)e.orderTaking(l,c);else if("2558"==n.code)e.orderTaking(l,c);else{if("2047"!=n.code)return t.showDialog(n.message+"["+n.code+"]"||"服务器异常!"),!1;e.orderRefuse(orderId)}}):e.orderTaking(l,c)}},this):t.showContentDialog({jsondata:{address:n},contentEvent:function(){$("#showContentDialog .sendTypeLal").off(),$("#showContentDialog .sendTypeLal").on("click",function(){$(this).find(".check_choose").addClass("choose_check").parents().siblings(".checkAction").find(".check_choose").removeClass("choose_check")})},ejs_url:e.EJS.chooseSendType,okCallBack:function(){var n=0,s=0,a=$(i).parents(".info").find(".OrderTable>table").children("tbody").children(),o=$(i).parents(".info").find(".scanTable>table").children("tbody").children();if(a.each(function(t,e){var i=$(e).find(".pnum").text();n+=Number(i)}),o.each(function(t,e){var i=$(e).find(".product_num>span").text();s+=Number(i)}),n!=s)return t.showDialog("还有未扫码完的商品"),!1;var l=0;if($("#selfSend").hasClass("choose_check")?l="2":$("#ddSend").hasClass("choose_check")&&(l="1"),"0"==l)return t.showDialog("请选择配送方式！"),!1;var c={shippingType:l,editor:e.userinfo&&e.userinfo.shop.shopowner||"匿名店长",orderId:$(i).attr("data-orderId"),orderStatus:"1"},d=$(i).attr("orderSN");"1001"==r?e.eleSellService.txzVerification({orderSn:d},function(i){if(API)var n=API.sendReuqest(i.tzxUrl,i.hexiaoReqParam);if(n=JSON.parse(n),n.code&&"000000"==n.code)e.orderTaking(c,d);else if("2558"==n.code)e.orderTaking(c,d);else{if("2047"!=n.code)return t.showDialog(n.message+"["+n.code+"]"||"服务器异常!"),!1;e.orderRefuse(orderId)}}):e.orderTaking(c,d)}},this)}),$(".judan").live("click",function(){0==$("#refuseReason").children().length&&e.eleSellService.refuseOrderReason({},function(t){var e=t&&t.list;$.each(e,function(t,e){$("#refuseReason").append('<option value="'+e.resaon+'">'+e.resaon+"</option>")}),$("#refuseReason").selectlist({zIndex:10,width:200,height:40,optionHeight:40})}),$("#resuseDia").show(),$("#resuseDia .cancel").live("click",function(){$("#resuseDia").hide()});var i=$(this).attr("data-orderId");$("#judanBtn").on("click",function(){$("#resuseDia").hide();var n={editor:e.userinfo&&e.userinfo.shop.shopowner||"匿名店长",orderId:i,orderStatus:"4",reason:$("#refuseReason").val()};e.eleSellService.acceptOrRefuseOrder(n,function(i){t.showDialog("拒单成功！",!0),$("#nav li").eq(3).find("a").hasClass("selected")?e.recOrder():e.waitRecOrder(1)})})})},orderRefuse:function(e){var i=this,n={editor:i.userinfo&&i.userinfo.shop.shopowner||"匿名店长",orderId:e,orderStatus:"4",reason:"当前菜品已被估清"};i.eleSellService.acceptOrRefuseOrder(n,function(e){t.showDialog("拒单成功！",!0),$("#nav li").eq(3).find("a").hasClass("selected")?i.recOrder():i.waitRecOrder(1)})},orderTaking:function(e,i){var n=this;n.eleSellService.acceptOrRefuseOrder(e,function(e){return e&&"222222"==e.checkCode?(t.showDialog("接单失败,该订单已取消!",!1),void n.waitRecOrder(1)):void n.eleSellService.printOrder({orderSn:i},function(e){t.showDialog("接单成功,正在打印小票，请稍后...",!1,!0),setTimeout(function(){API.printOrder(JSON.stringify(e.obj)),t.closeDialog(),n.waitRecOrder(1)},100)})},function(e){t.showDialog(e.message),"333333"==e.code&&n.waitRecOrder(1)})},goStoreExtract:function(){var e=this;setTimeout(function(){t.iScroll.refresh(),$("#goStoreExtractArea .lading").focus()},200),$("#goStoreExtractArea .confirm").off(),$("#goStoreExtractArea .confirm").on("click",function(){var i=$("#goStoreExtractArea .lading").val();return""==i?($(this).parent().find(".prompt").show(),!1):($(this).parent().find(".prompt").hide(),void e.eleSellService.orderSNQueryDetail({orderSn:i,isSend:"1"},function(i){$("#goStoreExtractArea .lading").val("");var n=i&&i.order;if(!n)return t.showDialog("无此到店自提订单"),!1;if("0"==n.isSend)return t.showDialog("此单为送货上门单"),!1;var s=i&&i.productList||[];t.loadEJS({ejs_url:e.EJS.goStoreTake,jsondata:{list:s,orderObj:n},jq_object:$("#goStoreExtractArea .goStoreExtract")}),$("#completeOrder").on("click",function(){t.showConfrim({okCallBack:function(){var i=$(this).attr("data-orderId"),n=$(this).attr("data-orderStatu");return"0"==n?(t.showDialog("此单还未接单，请先接单"),!1):void e.bindDone.call(e,i)}},this)}),e.searchProductToGrid()}))}),$("#goStoreExtractArea .lading").off(),$("#goStoreExtractArea .lading").keydown(function(t){var e=t.keyCode;"13"==e&&$("#goStoreExtractArea .confirm").click()})},xrOrderQuery:function(){var e=this;$("#xrOrderQuery").off(),$("#xrOrderQuery").on("click",function(){t.showContentDialog({title:"订单查询",okBtn:"查询",jsondata:{},ejs_url:e.EJS.orderQueryTemp,okCallBack:function(){var i=$("#showContentDialog .orderNumber").val();e.eleSellService.orderSNQueryDetail({orderSn:i},function(i){var n=i&&i.order;if(!n)return t.showDialog("查无订单，请检查订单号！"),!1;setTimeout(function(){t.iScroll.refresh()},200),$("#Pagination_all").parent().addClass("hide");var s=i&&i.productList||[];t.loadEJS({ejs_url:e.EJS.xrSingleOrder,jsondata:{list:s,orderObj:n},jq_object:$("#xrWait .waitRec")})})}},this)})},bindDone:function(e){var i=this,n={orderId:e,orderStatus:"2"};i.eleSellService.doneOrder(n,function(e){t.showDialog("提货完成！",!0),$("#goStoreExtractArea .lading").val(""),$("#nav li").eq(1).click()})},selfTakeOver:function(){var t={orderStatus:"2",isSend:"1",currentPageNum:"1",pageCount:"5"},e=$("#menu_con .selfTakeOver");this.queryList(t,this.EJS.selfTakeOver,e),this.paging(t,this.EJS.selfTakeOver,e)},recOrder:function(){var t={orderStatus:"1",currentPageNum:"1",pageCount:"5"},e=$("#menu_con .existOrder");this.queryList(t,this.EJS.existOrder,e),this.paging(t,this.EJS.existOrder,e),this.searchProductToGrid(),this.sendProEvent()},sendProEvent:function(){var e=this,i=e.userinfo&&e.userinfo.shop&&e.userinfo.shop.shopowner||"匿名";$("#wrapper .sendPro").die(),$("#wrapper .sendPro").live("click",function(){t.showConfrim({okCallBack:function(){var n=$(this),s=$(this).attr("data-orderId"),a={userName:i,orderId:s,shippingStatus:"6"};e.eleSellService.doneOrder(a,function(e){t.showDialog("发货完成！",!0),n.hasClass("sprig-input-recOrder")?n.parent().find(".info").find(".conbtn .sendPro").remove():n.hasClass("orders")&&n.parents(".sprang-right").find(".sprig-input-recOrder").remove(),n.remove()})}},this)})},queryList:function(e,i,n){var s=this;n.children().remove(),e.jiedan="jiedan",s.eleSellService.myOderList(e,function(a){var r=a&&a.page&&a.page.datas||[],o=a&&a.page;return o?(s.zpOut=r,s.zpResult=o,t.loadEJS({ejs_url:i,jsondata:{list:r,result:o},jq_object:n}),$(".pageTip").text(o.totalRowCount+"条记录 "+e.currentPageNum+"/"+o.totalPage+"页"),void setTimeout(function(){t.iScroll.refresh()},200)):(n.html("无查询结果，请查询其他数据！"),void $("#Pagination_all").parent().addClass("hide"))})},queryOrderDetail:function(e,i,n,s){var a=this;a.eleSellService.orderSNQueryDetail({orderSn:e},function(e){var r=e&&e.order,o=e&&e.disPrice;a.orderDetail=r;var l=e&&e.productList||[];t.loadEJS({ejs_url:a.EJS.noRecOrderTable,jsondata:{list:l,orderObj:r},jq_object:i}),0!=n.length&&(t.loadEJS({ejs_url:a.EJS.modifyTable,jsondata:{list:l,orderObj:r},jq_object:n}),n.find(".product_num").css("border","solid 1px #ccc"));var c=$(s).parents(".sprang-right").find(".scanTable");0!=c.length&&(t.loadEJS({ejs_url:a.EJS.scanCodeTable,jsondata:{plist:l,orderObj:r},jq_object:c}),a.bindScanAddLess());var d=$(s).parents(".sprang-right").find(".tableMoneyInfo");t.loadEJS({ejs_url:a.EJS.tableMoneyInfo,jsondata:{orderObj:r,disPrice:o},jq_object:d});var h=$(s).parents(".sprang-right").find(".tableModifyInfo");t.loadEJS({ejs_url:a.EJS.tableModifyInfo,jsondata:{orderObj:r},jq_object:h}),("0"==r.shippingStatus||"5"==r.shippingStatus||"1"==r.orderStatus&&"1"==r.isSend&&"6"==r.shippingStatus)&&0!=n.length&&($(s).parent().find(".conbtn").eq(0).append('<input type="button" value="修改" class="modify" />'),a.activeModify()),"1"==$(s).attr("data-all-order")&&"1"==r.voucher&&($(s).parent().find(".conbtn").eq(0).append('<input type="button" data-orderId="'+r.orderId+'" id="deBlock" value="解锁" class="orders" />'),$("#deBlock").die(),$("#deBlock").live("click",function(){var e={orderId:$(this).attr("data-orderId"),voucher:"0"};a.eleSellService.deBlockOrder(e,function(e){t.showDialog("解锁成功！",!0),$("#nav").children().eq(0).click()})}))})},activeModify:function(){var i=this;$("#eleSellArea").find(".modify").die(),$("#eleSellArea").find(".modify").live("click",function(){var e=this;$(this).parent().next(".modifyagain").toggle(),t.iScroll.refresh(),"block"==$(e).parent().next(".modifyagain").css("display")&&t.iScroll.scrollToElement($(e).parent().next(".modifyagain").get(0),800,!0,!0,IScroll.utils.ease.quadratic)}),$("#eleSellArea").find(".cancel").die(),$("#eleSellArea").find(".cancel").live("click",function(){$(this).parents(".modifyagain").toggle(),t.iScroll.refresh()});$("#eleSellArea").find(".modification").off(),$("#eleSellArea").find(".modification").on("click",function(){for(var n=this,s="",a="",r="",o="",l="",c=$(this).parents(".modifyagain").find("table").children("tbody").children(),d=$(this).parents(".modifyagain").find("table").children("tbody").children("tr.add_flag"),h=$(this).parents(".modifyagain").find("table").children("tbody").children("tr.modify_flag"),u=!0,p=0;p<c.length;p++){var f=$(c[p]).find("td.num input").val();if(""==f||"0"==f){u=!1;break}}if(!u)return t.showDialog("数量不能为空或0"),!1;h.each(function(t,e){var i=$(e).find("td.num input").attr("data-old-value"),n=$(e).find("td.num input").val();i!=n&&(o=o+$(e).find(".internationa").attr("data-key")+",",l=l+n+",")}),d.each(function(t,e){s=s+$(e).find(".internationa").attr("data-productid")+",",a=a+$(e).find("td.num input").val()+","});var v=$(this).data("zp")||{};for(var p in v){var m=r.split(",");m[v[p]]||(r=r+v[p]+",")}var g=$(this).parents(".modifyagain").find(".tableModifyInfo").find("em").eq(1),y=e.removeComma(g.html()),b={orderId:$(this).attr("orderId"),nowAllPrice:y+""};s&&(s=s.substring(0,s.length-1),a=a.substring(0,a.length-1),$.extend(!0,b,{addIds:s,addNums:a})),o&&(o=o.substring(0,o.length-1),l=l.substring(0,l.length-1),$.extend(!0,b,{upIds:o,upNums:l})),r&&(r=r.substring(0,r.length-1),$.extend(!0,b,{delIds:r})),i.eleSellService.modifyOrder(b,function(e){$(n).parents(".modifyagain").find(".lading").val(""),$(n).data("zp",""),t.showDialog("修改订单成功！",!0),i.queryOrderDetail($(n).attr("orderSN"),$(n).parents(".info").find(".OrderTable"),$(n).parents(".info").find(".zp-modify-open"),n),$(n).parents(".modifyagain").hide(),setTimeout(function(){t.iScroll.refresh()},100)})});var n={},s=function(t){$(this).parents(".modifyagain").find(".original-con-left").find("em").eq(1).text(e.formatCurrency(t))},a=function(t){var e=$(this).parents(".modifyagain").find("table").children("tbody").children(),i=0;if(t)return i=Number($(this).parents(".modifyagain").find(".original-con-left").find("em").eq(1).text())-Number(t);for(var n=0;n<e.length;n++)0!=n&&(i=Number(i)+Number($(e[n]).find("td").eq(5).text()));return i};$("#eleSellArea").find(".modifyNumIpt").die(),$("#eleSellArea").find(".modifyNumIpt").live("keyup",function(t){var e=/^\d+$/,i=$(this).val();if(!e.test(i))return $(this).val("").focus(),!1;var n=$(this).val(),r=$(event.target).parents("tr").find("td").eq(2).text();$(event.target).parents("tr").find("td").eq(5).text(n*Number(r));var o=a.call(this);s.call(this,o)}),$("#eleSellArea").find(".zp-modify-open .product_add").die(),$("#eleSellArea").find(".zp-modify-open .product_add").live("click",function(){var t=$(this).prev().find("input"),i=$(this).parents("tr").find("td").eq(2).text(),n=t.val(),r=++n;t.val(r),$(this).parents("tr").find("td").eq(5).text(e.formatCurrency(r*Number(i)));var o=a.call(this);s.call(this,o)}),$("#eleSellArea").find(".zp-modify-open .product_del").die(),$("#eleSellArea").find(".zp-modify-open .product_del").live("click",function(){var t=$(this).next().find("input");if("text"==t.attr("type")){var i=$(this).parents("tr").find("td").eq(2).text(),n=t.val();if("1"==n)return!1;var r=--n;t.val(r),$(this).parents("tr").find("td").eq(5).text(e.formatCurrency(r*Number(i)));var o=a.call(this);s.call(this,o)}}),$("#eleSellArea").find(".zp-modify-open .delete").die(),$("#eleSellArea").find(".zp-modify-open .delete").live("click",function(){n[$(this).attr("val")]=$(this).attr("val"),$(this).parents(".modifyagain").find(".modification").data("zp",n);var t=$(this).closest("tr").find("td").eq(5).text(),e=a.call(this,t);s.call(this,e),$(this).closest("tr").remove()})},getInterCode:function(i){var n=function(){for(var t=$(this).parents(".bounce-conthr").siblings(".big-form").find(".form-open-right").find("tr"),e=0,i=0;i<t.length;i++)0!=i&&(e+=Number($(t[i]).find("td").eq(1).text()));$(this).parents(".info").find(".original-con-right").find("em").eq(0).text(e),$(this).parents(".info").find(".original-con-right").find("em").eq(1).text(e)},s=function(){var e=$(this).parent().find(".lading").val(),i=!1;if(""==e)return $(this).parent().find(".prompt").show(),!1;$(this).parent().find(".prompt").hide();for(var s=$(this).parents(".bounce-conthr").siblings(".big-form").find(".OrderTable").find("tr"),a=$(this).parents(".bounce-conthr").siblings(".big-form").find(".form-open-right").find("tr"),r=0;r<s.length;r++)if(e==$(s[r]).find(".internationa").text()){i=!0;var o=$(a[r]).find(".product_num>span").text()||0;if(o=Number(o)+1,o>$(s[r]).find(".pnum").text())return t.showDialog("亲,扫码数量多了哦!"),!1;o==$(s[r]).find(".pnum").text()?$(a[r]).find("td").eq(0).text("已扫码"):$(a[r]).find("td").eq(0).text("正在扫码"),$(a[r]).find(".product_num").css("border","solid 1px #ccc"),$(a[r]).find(".proshow").show(),$(a[r]).find(".product_num>span").text(o);break}return $(this).parent().find(".lading").val(""),i?void n.call(this):(t.showDialog("请输入或扫描添加商品"),!1)};$(".confirmSM").die(),$(".confirmSM").live("click",function(){var t=this;e.validate({},$(this).parent(),function(e){e&&s.call(t)})}),$(".ladingSM").die(),$(".ladingSM").live("keydown",function(t){var i=this,n=t.keyCode;"13"==n&&e.validate({},$(this).parent(),function(t){t&&s.call(i)})})},searchProductToGrid:function(){var i=this,n=function(n){var s=this,a=n||$(this).parent().find(".lading").val();if(""==a)return $(this).parent().find(".prompt").show(),!1;$(this).parent().find(".prompt").hide();for(var r=a,o=!1,l=$(this).parents(".modifyagain").find("table").children("tbody").children(),c=0,d=0;d<l.length;d++)if(0!=d){if(r==$(l[d]).find(".internationa").text()){o=!0;var h=$(l[d]).find("td.num input").val();$(l[d]).find("td.num input").val(++h);var u=$(l[d]).find("td").eq(2).text();$(l[d]).find("td").eq(5).text(e.formatCurrency(Number(u)*Number(h))),$(this).parent().find(".lading").val("")}c+=Number($(l[d]).find("td").eq(5).text())}o&&$(this).parents(".modifyagain").find(".original-con-left").find("em").eq(1).text(e.formatCurrency(c));var p="";o||i.eleSellService.interCodeQueryProduct({interCode:r},function(n){i.proRes=n;var a=n&&n.product;if($(s).parent().find(".lading").val(""),!a)return t.showDialog("无此商品"),!1;p="<tr class='scanTr add_flag'><td data-productid='"+a.productId+"' class='guobiaoma'>"+a.interCode+"</td><td class='name'>"+a.productName+"</td><td>"+a.price+"</td><td class='num'><div class='product_calculate'><div class='product_del'><span style='cursor: pointer;'></span></div><div class='product_num'><input type='text'　class='modifyNumIpt' style='width:45px;text-align:center' value='1'/></div><div class='product_add'><span style='cursor: pointer;'></span></div></div></td><td>"+e.formatCurrency(a.oneMoney-a.lessMoney)+"</td><td>"+e.formatCurrency(a.price)+"</td><td>0.00</td><td><a class='delete' href='javascript:void(0);'>删除</a></td></tr>",$(s).parents(".modifyagain").find("table").children("tbody").append(p);for(var r=$(s).parents(".modifyagain").find("table").children("tbody").children(),o=0,l=0;l<r.length;l++)0!=l&&(o=Number(o)+Number($(r[l]).find("td").eq(5).text()));$(s).parents(".modifyagain").find(".original-con-left").find("em").eq(1).text(e.formatCurrency(o)),setTimeout(function(){t.iScroll.refresh()},200)})},s={comFunction:n};return $(".modifyagain .confirm").off(),$(".modifyagain .confirm").on("click",function(){var t=this;e.validate({},$(this).parent(),function(e){e&&n.call(t)})}),$(".modifyagain .lading").off(),$(".modifyagain .lading").keydown(function(t){var i=this,s=t.keyCode;"13"==s&&e.validate({},$(this).parent(),function(t){t&&n.call(i)})}),s},paging:function(t,e,i){var n=this;$("#Pagination_all").children().remove(),this.zpResult&&this.zpResult.totalRowCount&&$("#Pagination_all").pagination(this.zpResult.totalRowCount,{prev_text:"<",next_text:">",num_edge_entries:1,num_display_entries:2,callback:function(s){$.extend(!0,t,{currentPageNum:s+1}),n.queryList(t,e,i)},items_per_page:5})},tuihuanPaging:function(t,e,i){var n=this;$("#Pagination_all").children().remove(),this.tuihuanResult&&this.tuihuanResult.totalRowCount&&$("#Pagination_all").pagination(this.tuihuanResult.totalRowCount,{prev_text:"上一页",next_text:"下一页",num_edge_entries:1,num_display_entries:2,callback:function(s){$.extend(!0,t,{currentPageNum:s+1}),n.queryRefundOrExchangeList(t,e,i)},items_per_page:5})},initExpend:function(){var e=this;$(".sprang-right>input.sprig-input").die(),$(".sprang-right>input.sprig-input").live("click",function(){var i=$(this),n=$.trim($(this).val());$(this).parent().find(".info").slideToggle("normal",function(){"弹开"==n?i.val("挂起")&&i.css("background-color","#ea5414")&&i.parents(".rebounds").addClass("openBgColor"):i.val("弹开")&&i.css("background-color","#1bbc9b")&&i.parents(".rebounds").removeClass("openBgColor")}),"0"==$(this).attr("data-reader")&&($(this).attr("data-reader","1"),e.queryOrderDetail($(this).attr("orderSN"),$(this).parent().find(".OrderTable"),$(this).parent().find(".zp-modify-open"),this)),i.parent().find("div.info").find(".ladingSM").focus(),setTimeout(function(){t.iScroll.refresh(),"block"==i.parent().find(".info").css("display")&&t.iScroll.scrollToElement(i.parent().find(".info").get(0),800,!0,!0,IScroll.utils.ease.quadratic)},500)})},bindScanAddLess:function(){var e=function(){for(var t=$(this).parents(".scanTable").find("tr"),e=0,i=0;i<t.length;i++)0!=i&&(e+=Number($(t[i]).find("td").eq(1).text()));$(this).parents(".info").find(".original-con-right").find("em").eq(0).text(e),$(this).parents(".info").find(".original-con-right").find("em").eq(1).text(e)};$("#eleSellArea").find(".scanTable>table").find(".product_add span").off(),$("#eleSellArea").find(".scanTable>table").find(".product_add span").on("click",function(){var i=$(this).parents(".product_calculate").find(".product_num span"),n=i.text(),s=++n;return s>i.attr("data-productNum")?(t.showDialog("亲,扫码数量多了哦!"),!1):(i.text(s),s==i.attr("data-productNum")?$(this).parents(".scanTr").find("td").eq(0).text("已扫码"):$(this).parents(".scanTr").find("td").eq(0).text("正在扫码"),void e.call(this))}),$("#eleSellArea").find(".scanTable>table").find(".product_del span").off(),$("#eleSellArea").find(".scanTable>table").find(".product_del span").on("click",function(){var t=$(this).parents(".product_calculate").find(".product_num span"),i=t.text();if("0"==i)return!1;var n=--i;t.text(n),n==t.attr("data-productNum")?$(this).parents(".scanTr").find("td").eq(0).text("已扫码"):$(this).parents(".scanTr").find("td").eq(0).text("正在扫码"),e.call(this)})},quickMenu:function(){function i(t){$("#totalClass").html(""),$("#childContent").html("");var e="";e='<li><div class="list-item father-previous previous list-item-pers" data-value="'+t+'">上一页</div></li>',r.classResult[t-1]&&$.each(r.classResult[t-1],function(t,i){var n="<li><div data-parentCode="+i.id+' class="list-item list-item-pers add-food">'+i.name+"</div></li>";e+=n}),e+='<li><div class="list-item father-next next list-item-pers" data-value="'+t+'">下一页</div></li>',$("#totalClass").append(e),$("#show").find("#totalClass").children().eq(1).find("div.add-food").click()}function n(t){$("#childContent").html("");var e="";return 0!=r.childResult.length&&0!=r.childResult[t-1].length&&($.each(r.childResult[t-1],function(i,n){var s=r.childResult[t-1];if(i%5==0&&(e+=i>14?'<div class="distribution-body"><ul class="distribution-end">':i+5>s.length?'<div class="distribution-body"><ul class="distribution-end">':'<div class="distribution-body"><ul class="distribution">'),r.childResult[t-1]){var a='<li><div class="list-item foodItem" data-childInterCode="'+n.interCode+'"><p class="food-istem">'+n.productName+'</p><p class="money-col">￥'+n.shopPrice+"</p></div></li>";e+=a}18==s.length?(4!=i&&9!=i&&14!=i||(e+="</ul></div>"),i==r.childResult[t-1].length-1&&(e=e+'<li><div class="list-item previous list-item-pers food-pre" data-value="'+t+'">上一页</div></li>',17==i&&r.childResult[t]&&(e=e+'<li><div class="list-item previous list-item-pers food-next" data-value="'+t+'">下一页</div></li>'),e+="</ul></div>")):(4!=i&&9!=i&&14!=i||(e+="</ul></div>"),i==r.childResult[t-1].length-1&&("5"!=s.length&&"10"!=s.length&&"15"!=s.length||(e+='<div class="distribution-body"><ul class="distribution-end">'),
e+="</ul></div>"))}),void $("#childContent").append(e))}function s(i,n){for(var s=i,r=!1,o=$("#"+a).find("table").children("tbody").children(),l=0,c=0;c<o.length;c++)if(0!=c){if(s==$(o[c]).find(".internationa").text()){r=!0;var d=$(o[c]).find("td.num input").val();$(o[c]).find("td.num input").val(++d);var h=$(o[c]).find("td").eq(2).text();$(o[c]).find("td").eq(5).text(e.formatCurrency(Number(h)*Number(d)))}var u=0;$(o[c]).find("td").eq(3).find(".modifyNumIpt").attr("data-old-value")&&(u=Number($(o[c]).find("td").eq(2).text())*Number($(o[c]).find("td").eq(3).find(".modifyNumIpt").attr("data-old-value"))),l=Number(l)+Number($(o[c]).find("td").eq(5).text())-u}$("#"+a).find(".original-con-left").find("em").eq(1).text(e.formatCurrency(l)),$("#"+a).find(".original-con-left").find("em").eq(2).text(e.formatCurrency(l));var p="";r||n.eleSellService.interCodeQueryProduct({interCode:s},function(i){n.proRes=i;var s=i&&i.product;if(!s)return t.showDialog("无此商品"),!1;p="<tr class='scanTr add_flag'><td data-productid='"+s.productId+"' class='internationa'>"+s.interCode+"</td><td class='name'>"+s.productName+"</td><td>"+s.price+"</td><td class='num'><div class='product_calculate'><div class='product_del'><span style='cursor: pointer;'></span></div><div class='product_num'><input type='text' class='modifyNumIpt' style='width:65px;text-align:center' value='1'></input></div><div class='product_add'><span style='cursor: pointer;'></span></div></div></td><td>"+e.formatCurrency(s.oneMoney-s.lessMoney)+"</td><td>"+e.formatCurrency(s.price)+"</td><td></td><td><a class='delete' href='javascript:void(0);'>删除</a></td></tr>",$("#"+a).find("table").children("tbody").append(p);for(var r=$("#"+a).find("table").children("tbody").children(),o=0,l=0;l<r.length;l++)0!=l&&(o=Number(o)+Number($(r[l]).find("td").eq(5).text()));$("#"+a).find(".original-con-left").find("em").eq(1).text(e.formatCurrency(o)),$("#"+a).find(".original-con-left").find("em").eq(2).text(e.formatCurrency(o))})}var a,r=this;$(".showOverlay").die(),$("#near-show").delegate(".father-previous","click",function(){var e=$(this).attr("data-value"),n=Number(e)-1;return 0==n?(t.showDialog("商品分类第一页"),!1):void i(n)}),$("#near-show").delegate(".father-next","click",function(){var e=$(this).attr("data-value"),n=Number(e)+1;return r.classResult[n-1]?void i(n):(t.showDialog("最后一页了"),!1)}),$("#near-show").delegate(".food-pre","click",function(){var e=$(this).attr("data-value"),i=Number(e)-1;return 0==i?(t.showDialog("第一页了"),!1):void n(i)}),$("#near-show").delegate(".food-next","click",function(){var t=$(this).attr("data-value"),e=Number(t)+1;n(e)}),$("#near-show").delegate(".add-food","click",function(){r.childResult=[];var t=$(this).attr("data-parentCode"),e={isApp:"1",isComboProduct:"0",isFood:"",quickTypeId:t};r.eleSellService.queryProductDetial(e,function(t){var e=t&&t.list||[];r.childResult=[];for(var i=0;i<e.length;i+=18)r.childResult.push(e.slice(i,i+18));n(1)})}),$("#near-show").delegate(".foodItem","click",function(){var t=$(this).attr("data-childInterCode");s(t,r)});r.userinfo&&r.userinfo.shop&&r.userinfo.shop.shopSn||"";$(".showOverlay").live("click",function(){a=$(this).attr("data-quickId");var t={isShow:"1",status:"0"};r.eleSellService.commodityClassification(t,function(t){var e=t&&t.list||[];r.classResult=[],r.childResult=[];for(var n=0;n<e.length;n+=5)r.classResult.push(e.slice(n,n+5));i(1)}),$("#show").show(),$("#near-show").css("left",(window.document.body.clientWidth-$("#near-show").width())/2+"px"),$("#near-show").css("top","1px")}),$("#showHidden").on("click",function(){$("#show").hide()}),this.dnd()},dnd:function(){function t(t){var e=document.getElementById(t),i=0,n=0;e.onmousedown=function(t){var s=t||event;return i=s.clientX-e.offsetLeft,n=s.clientY-e.offsetTop,document.onmousemove=function(t){var s=t||event,a=s.clientX-i,r=s.clientY-n;a<0?a=0:a>document.documentElement.clientWidth-e.offsetWidth&&(a=document.documentElement.clientWidth-e.offsetWidth),r<0?r=0:r>document.documentElement.clientHeight-e.offsetHeight&&(r=document.documentElement.clientHeight-e.offsetHeight),e.style.left=a+"px",e.style.top=r+"px"},document.onmouseup=function(){document.onmousemove=null,document.onmouseup=null,e.releaseCapture&&e.releaseCapture()},e.setCapture&&e.setCapture(),!1}}t("near-show")},eleSellPrint:function(){var e=this,i=function(i){e.eleSellService.printOrder({orderSn:i},function(e){console.log(JSON.stringify(e.obj)),t.showDialog("正在打印小票，请稍后...",!1,!0),setTimeout(function(){API.printOrder(JSON.stringify(e.obj)),t.closeDialog()},100)})};$("#eleSellArea .print").die(),$("#eleSellArea .print").live("click",function(){var t=$(this).parents(".rebounds").children(":first-child").find(".orderSN").text();console.log(t),$(this).attr("disabled","disabled").attr("value","正在打印"),i(t);var e=$(this);e.removeAttr("disabled").attr("value","已打印")})}},i}.apply(e,n),!(void 0!==s&&(t.exports=s))},function(t,e,i){var n,s;n=[i(10),i(16)],s=function(t,e){var i=function(t){this.init()};return i.prototype={init:function(){$("#userName").keyboard({layout:"custom",customLayout:{default:["B C F J","1 2 3 4","5 6 7 8","0 9 {bksp}","{a} {c}"]},maxLength:6,restrictInput:!0,useCombos:!1,acceptValid:!0,validate:function(t,e,i){return 6===e.length}}),$("#pwd").keyboard({layout:"custom",customLayout:{default:["1 2 3","4 5 6","7 8 9","0 9 {bksp}","{a} {c}"]},restrictInput:!0,useCombos:!1,acceptValid:!0,validate:function(t,e,i){return e.length>5}}),$("#userName").on("keyup",function(){6==$(this).val().length&&$("#pwd").focus()}),$("#userName").focus(),$("#userName_keyboard").css("left","69%").css("top","35%"),$("#userName").on("focus",function(){$("#userName_keyboard").css("left","69%").css("top","35%"),$("#userName_keyboard input").focus()}),$("#pwd").on("focus",function(){$("#pwd_keyboard").css("left","69%").css("top","35%"),$("#pwd_keyboard input").focus()}),$(function(){document.onkeydown=function(t){var e=document.all?window.event:t;13==e.keyCode&&$("#loginBtn").click()}}),$("#loginBtn").off(),$("#loginBtn").on("click",function(){var i=$("#userName").val(),n=$("#pwd").val(),s={name:i,loginPwd:e.MD5(n)};e.validate({},$(this).parent().siblings(),function(i){i&&e.getService("LoginOutService").login(s,function(i){i.adminId?(e.setData("userinfo",i),location.href="./index.html"):t.showDialog(i.message)})})})}},i}.apply(e,n),!(void 0!==s&&(t.exports=s))},function(t,e,i){var n,s;n=[i(10),i(16)],s=function(t,e){var i=function(t){this.init()};return i.prototype={init:function(){$("#logout").on("click",function(){e.getService("LoginOutService").logOut({},function(t){e.appData={},localStorage.removeItem("userinfo"),location.href="./login.html"})})}},i}.apply(e,n),!(void 0!==s&&(t.exports=s))},function(t,e,i){var n,s;n=[i(10),i(16)],s=function(t,e){var i=function(t){this.EJS={main:"./views/order/index.ejs",commonOrder:"./views/order/commonOrder.ejs",marginReport:"./views/order/marginReport.ejs"},this.styles=[],this.init(),this.orderQueryPrint()};return i.prototype={init:function(){this.orderService=e.getService("OrderService"),t.loadEJS({ejs_url:this.EJS.main,jsondata:{},jq_object:$("#moudleContent")}),$("#Pagination_all").parent().removeClass("hide"),this.renderHistory(),this.tabClick(),t.iScroll=new IScroll("#wrapper",{mouseWheel:!0,scrollbars:!0})},tabClick:function(){var t=this;$("#nav li").click(function(){$(this).find("a").addClass("selected").end().siblings().find("a").removeClass(),"0"==$("#nav li").index(this)?t.renderHistory():"1"==$("#nav li").index(this)?t.renderSuccess():"2"==$("#nav li").index(this)&&t.renderFailed(),$("#menu_con > div").hide().eq($("#nav li").index(this)).show()})},renderHistory:function(){var t=this,e=new Date;this.initHisDateInput();var i={addTimeStart:new Date(e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate()).getTime(),addTimeEnd:(new Date).getTime(),currentPageNum:1,pageCount:"5"};this.doOrderList($("#historyOrder"),i),this.paging($("#historyOrder"),i),$("#historySearch").on("click",function(){var e=$(".dateBtn1").val(),n=new Date(e.substring(0,4),e.substring(5,7)-1,e.substring(8),23,59,59).getTime();$.extend(!0,i,{addTimeStart:new Date($(".dateBtn").val().replace(/-/g,"/")).getTime(),addTimeEnd:n,platform:$("#historyOrderSel").val()}),t.doOrderList($("#historyOrder"),i),t.paging($("#historyOrder"),i)})},renderSuccess:function(){var t={orderStatus:"2",currentPageNum:"1",pageCount:"5"};this.doOrderList($("#successOrder"),t),this.paging($("#successOrder"),t),$("#successOrder .conbtn").html("<input type='button' value='打印订单' class='print' />")},renderFailed:function(){var t={failStatus:"failStatus",currentPageNum:1,pageCount:"5"};this.doOrderList($("#failedOrder"),t),this.paging($("#failedOrder"),t),$("#failedOrder .conbtn").html("<input type='button' value='打印订单' class='print' />")},doOrderList:function(e,i){var n=this,i=i||{};n.orderService.myOderList(i,function(s){var a=s&&s.page&&s.page.datas||[],r=s&&s.page;return n.zpResult=r,a&&0!=a.length?($("#Pagination_all").parent().removeClass("hide"),t.loadEJS({ejs_url:n.EJS.commonOrder,jsondata:{list:a,result:r},jq_object:e}),setTimeout(function(){t.iScroll.refresh()},200),void $(".pageTip").text(r.totalRowCount+"条记录 "+i.currentPageNum+"/"+r.totalPage+"页")):(e.html("无查询结果，请查询其他数据！"),void $("#Pagination_all").parent().addClass("hide"))})},doReportList:function(e){var i=this,e=e||{};i.orderService.waimaiReport(e,function(e){var n=e&&e.page&&e.page.datas||[],s=e;return n&&0!=n.length?($("#Pagination_all").parent().removeClass("hide"),void t.loadEJS({ejs_url:i.EJS.marginReport,jsondata:{list:n,result:s},jq_object:$("#marginReport")})):($("#marginReport").html("无查询结果，请查询其他数据！"),void $("#Pagination_all").parent().addClass("hide"))})},paging:function(t,e){var i=this;i.zpResult&&i.zpResult.totalRowCount&&$("#Pagination_all").pagination(i.zpResult.totalRowCount,{prev_text:"上一页",next_text:"下一页",num_edge_entries:1,num_display_entries:3,callback:function(n){$.extend(!0,e,{currentPageNum:n+1}),"marginReport"==t.attr("id")?i.doReportList(e):i.doOrderList(t,e)},items_per_page:5})},initHisDateInput:function(){$(".dateBtn").datepicker({dateFormat:"yy-mm-dd",inline:!0,showMonthAfterYear:!0,yearSuffix:"年",changeMonth:!0,monthNamesShort:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],dayNamesMin:["日","一","二","三","四","五","六"],changeYear:!0,maxDate:"+0d"}),$(".dateBtn1").datepicker({dateFormat:"yy-mm-dd",inline:!0,showMonthAfterYear:!0,yearSuffix:"年",changeMonth:!0,monthNamesShort:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],dayNamesMin:["日","一","二","三","四","五","六"],changeYear:!0,maxDate:"+0d"})},orderQueryPrint:function(){var t=this,e=function(e){t.orderService.printOrder({orderSn:e},function(t){Print.PrintOrder(JSON.stringify(t.obj))})};$("#orderQuery .print").die(""),$("#orderQuery .print").live("click",function(){var t=$(this).parents(".rebounds").children(":first-child").find(".orderSN").text();e(t),$(this).attr("disabled","disabled").attr("value","正在打印");var i=$(this);setTimeout(function(){i.removeAttr("disabled").attr("value","已打印")},3e3)})}},i}.apply(e,n),!(void 0!==s&&(t.exports=s))},function(t,e,i){var n,s;n=[i(10),i(16)],s=function(t,e){var i=function(e){this.EJS={main:"./views/other/index.ejs",Couponcontent:"./views/other/couponcontent.ejs"},this.styles=[],this.init(),t.iScroll=new IScroll("#wrapper",{mouseWheel:!0,scrollbars:!0})};return i.prototype={init:function(){t.loadEJS({ejs_url:this.EJS.main,jsondata:{},jq_object:$("#moudleContent")}),this.tabClick(),$("#Pagination_all").parent().addClass("hide"),$(".redeem").focus(),$("#totalClass li").remove(),$("#childContent").hide(),this.coupon_Use()},tabClick:function(){$("#nav li").click(function(){$(this).find("a").addClass("selected").end().siblings().find("a").removeClass(),"0"==$("#nav li").index(this)||"1"==$("#nav li").index(this)||"2"==$("#nav li").index(this),$("#menu_con > div").hide().eq($("#nav li").index(this)).show()})},coupon_Use:function(){var i=this;$("#coupon_confirm").off(),$("#coupon_confirm").on("click",function(){var n=$(".redeem").val();e.getData("userinfo");if(""==n)return void t.showDialog("优惠券不能为空",!1);var s={yhm:n};return e.getService("CouponService").coupon_Exchange(s,function(t){var e=t||{};i.Pct=e,$("#show").show(),i.Pct.foodslist?(i.createmore(),i.createSingle()):i.createSingle()}),!1}),$(".change ").live("click",function(){$(".form-open,form-open3").hide(),$(".original-con-left").children().first().find("em").html(0),$(".original-con-left").children().eq(1).find("em").html(0),$("#totalClass li").remove()}),$("#coupon_confirmnew").live("click",function(){i.changeZhuangtai()}),$("#yhmnum").off(),$("#yhmnum").on("keydown",function(t){var e=t.keyCode;"13"==e&&i.changeZhuangtai()})},total_number:function(){var t=0,i=$(".form-open2 .matter_info_cont");for(q=0;q<i.length;q++){var n=$(".form-open2 .matter_info_cont").eq(q).children().eq(2).html(),s=$(".form-open2 .matter_info_cont").eq(q).children().eq(3).html(),a=Number(n*s);t+=a}$(".original-con-left").children().first().find("em").html(e.formatCurrency(t)),$(".original-con-left").children().eq(1).find("em").html(e.formatCurrency(t))},usecouponmore:function(){var i=this;i.Pct;$(".conbtn .such-col").live("click",function(){var n=e.getData("userinfo").shop.shopSn,s=$(".payreed .redeem").val(),a={yhm:s,syqd:"001",mdbh:n,foodsSn:i.SetId};e.getService("CouponService").Usecoupon_Exchange(a,function(e){t.showDialog("业务处理成功",!0)})})},usecouponsingle:function(){var i=this;i.Pct;$(".conbtn .such-col").off(),$(".conbtn .such-col").on("click",function(){var n=e.getData("userinfo").shop.shopSn,s=$(".payreed .redeem").val(),a={yhm:s,syqd:"001",mdbh:n,productSn:i.SetIdSing};e.getService("CouponService").Usecoupon_Exchange(a,function(e){t.showDialog("业务处理成功",!0)})})},createmore:function(){for(var e=this,i=e.Pct.foodslist,n=i.length,s=0;s<n;s++)!function(t){function e(){var e=document.createElement("li");return e.setAttribute("index",t),e.setAttribute("setid",i[t].tcId),e.className="setmeal-li setmealliold",e.innerHTML='<div class="list-item" >\t\t\t\t\t\t\t\t\t\t\t\t<p class="food-istem">'+i[t].comboName+'</p>\t\t\t\t\t\t\t\t\t\t\t\t<p class="money-col">¥'+i[t].comboPrice+"</p>\t\t\t\t\t\t\t\t\t\t\t</div>",e}var n=e();$("#near-show #totalClass").append(n)}(s);$("#near-show").css("left",(window.document.body.clientWidth-900)/2+"px"),$("#near-show").css("top","100px"),$("#show .list-item").css({margin:"6px"}),$("#show").show(),$("#near-show").show(),t.loadEJS({ejs_url:e.EJS.Couponcontent,jsondata:{},jq_object:$("#quickMenuContent")}),$("#showHidden").on("click",function(){e.init(),$("#totalClass li").remove()});for(var a=$(".setmealliold").length,s=0;s<a;s++)!function(n){var s=i[n].list.length;$("#totalClass .setmealliold").eq(n).off(),$("#totalClass .setmealliold").eq(n).click(function(){function n(){var t=document.createElement("tr");return t.className="matter_info_cont",t.setAttribute("payid",i[r].list.productId),t.innerHTML='<td class="internationa">'+i[r].list[o].interCode+'</td>\t\t\t\t\t\t\t\t\t\t\t\t\t<td class="name">'+i[r].list[o].productName+"</td>\t\t\t\t\t\t\t\t\t\t\t\t\t<td>"+i[r].list[o].price+"</td>\t\t\t\t\t\t\t\t\t\t\t\t\t<td>1</td>\t\t\t\t\t\t\t\t\t\t\t\t\t<td>0</td>\t\t\t\t\t\t\t\t\t\t\t\t\t<td>0</td>\t\t\t\t\t\t\t\t\t\t\t\t\t<td>0</td>",t}function a(){var t=document.createElement("tr");return t.className="matter_info_cont header_cint",t.setAttribute("tdremovenumber",o),t.innerHTML='<td>待扫码</td>\t\t\t\t\t\t\t\t\t\t\t\t\t<td class="num">\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="product_calculate">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="product_del proshow"><span></span></div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="product_num"><span>1</span></div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="product_add proshow"><span></span></div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t</td>',t}e.init(),$("#menu_con .conbtn").show(),$("#menu_con .original-con").show();for(var r=Number($(this).attr("index")),o=0;o<s;o++){var l=n();$(".form-open2 tbody").append(l);var c=a();$(".form-open3 tbody").append(c),$("#show").hide(),$(".big-form").show(),e.total_number()}$(".payreed").hide(),$(".payreed-new").show(),t.iScroll.refresh(),$("#totalClass li").remove();for(var d=$(".form-open3 tbody .matter_info_cont"),h=0;h<d.length;h++)$(".product_add").eq(h).on("click",function(){var t=$(this).prev().children().html();t++,$(this).prev().children().html(t),$(".form-open2 .matter_info_cont").eq(o).children().eq(3).html($(this).prev().children().html());var i=$(this).prev().children().html(),n=$(this).parent().parent().parent().attr("tdremovenumber");$(".form-open .matter_info_cont").eq(n).children().eq(3).html(i),e.total_number()}),$(".product_del").eq(h).on("click",function(){var t=$(this).next().children().html();t--,$(this).next().children().html(t),$(this).next().children().html()<1&&$(this).next().children().html(1);var i=$(this).next().children().html(),n=$(this).parent().parent().parent().attr("tdremovenumber");$(".form-open .matter_info_cont").eq(n).children().eq(3).html(i),e.total_number()});var u=$(this).attr("setid");e.SetId=u});var a=i[n].shopSn;e.MoreId=a}(s);e.usecouponmore()},createSingle:function(){function t(){var t=document.createElement("li");return t.className="setmeal-li setmeallinew",t.setAttribute("index",n),t.setAttribute("setid",e.Pct.productlist[n].productNumber),t.innerHTML='<div class="list-item">\t\t\t\t\t\t\t\t\t\t\t<p class="food-istem">'+e.Pct.productlist[n].productName+'</p>\t\t\t\t\t\t\t\t\t\t\t<p class="money-col">¥'+e.Pct.productlist[n].price+"</p>\t\t\t\t\t\t\t\t\t\t</div>",t}for(var e=this,i=e.Pct.productlist.length,n=0;n<i;n++){var s=t();$("#totalClass").append(s)}for(var a=$(".setmeallinew"),n=0;n<a.length;n++)$(".setmeallinew").eq(n).off(),$(".setmeallinew").eq(n).on("click",function(){function t(){var t=document.createElement("tr");return t.className="matter_info_cont",t.setAttribute("payid",e.Pct.productlist[n].productId),t.innerHTML='<td class="internationa">'+e.Pct.productlist[n].interCode+'</td>\t\t\t\t\t\t\t\t\t\t\t\t<td class="name">'+e.Pct.productlist[n].productName+"</td>\t\t\t\t\t\t\t\t\t\t\t\t<td>"+e.Pct.productlist[n].price+"</td>\t\t\t\t\t\t\t\t\t\t\t\t<td>1</td>\t\t\t\t\t\t\t\t\t\t\t\t<td>0</td>\t\t\t\t\t\t\t\t\t\t\t\t<td>0</td>\t\t\t\t\t\t\t\t\t\t\t\t<td>0</td>",t}function i(){var t=document.createElement("tr");return t.className="matter_info_cont header_cint",t.innerHTML='<td>待扫码</td>\t\t\t\t\t\t\t\t\t\t\t\t<td class="num">\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="product_calculate">\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="product_del proshow"><span></span></div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="product_num"><span>1</span></div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="product_add proshow"><span></span></div>\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t</td>',t}$("#menu_con .conbtn").show(),$("#menu_con .original-con").show();var n=Number($(this).attr("index")),s=$(this).attr("setid");e.SetIdSing=s;var a=t();$(".form-open2 tbody").append(a);var r=i();$(".form-open3 tbody").append(r),$("#show").hide(),$(".big-form").show();var o=$(".form-open2 .matter_info_cont").children().eq(2).html(),l=$(".form-open2 .matter_info_cont").children().eq(3).html(),c=Number(o*l).toFixed(2);$(".original-con-left").children().first().find("em").html(c),$(".original-con-left").children().eq(1).find("em").html(c),$(".payreed").hide(),$(".payreed-new").show(),$("#totalClass li").remove(),$(".num .product_add").on("click",function(){var t=$(this).prev().children().html();t++,$(this).prev().children().html(t),$(".form-open2 .matter_info_cont").children().eq(3).html($(this).prev().children().html()),e.total_number()}),$(".num .product_del").on("click",function(){var t=$(this).next().children().html();t--,$(this).next().children().html(t),$(this).next().children().html()<1&&$(this).next().children().html(1);var i=$(this).next().children().html();$(".form-open .matter_info_cont").children().eq(3).html(i),e.total_number()})});e.usecouponsingle(),$("#showHidden").on("click",function(){e.init(),$("#totalClass li").remove()}),this.position_control()},position_control:function(){$("#near-show").css("left",(window.document.body.clientWidth-$("#near-show").width())/2+"px"),$("#near-show").css("top","200px")},changeZhuangtai:function(){var e=$(".payreed-new").find("input").val(),i=$(".form-open2 .matter_info_cont");if(""==e)return t.showDialog("国标码不能为空",!1),!1;for(q=0;q<i.length;q++)e==$(".form-open2 .matter_info_cont").eq(q).children().first().html()&&$(".form-open3 .matter_info_cont").eq(q).children().first().html("已扫码")}},i}.apply(e,n),!(void 0!==s&&(t.exports=s))},function(t,e,i){var n,s;n=[i(10),i(16)],s=function(t,e){var i=function(t){this.EJS={main:"./views/pay/index.ejs",content:"./views/pay/indexContent.ejs"},this.styles=[],this.init(),this.change(),this.sum_number(),this.change_num(),this.bindingemember(),this.quickOpenMenu()};return i.prototype={init:function(){$("#childContent").show();var e=this;t.loadEJS({ejs_url:this.EJS.main,jsondata:{},jq_object:$("#moudleContent")}),$("#Pagination_all").parent().addClass("hide"),$(".agin-modify .lading").focus(),$("#payval").die(),$("#payval").live("keydown",function(t){var i=t.keyCode;"13"==i&&e.confirmButton()}),$(".confirm").on("click",function(){e.confirmButton()}),$(".emptygoods").live("click",function(){$(".matter_info_cont").remove(),$(".odd-numbers em").html("0"),$(".order_money").html(0),$(".order_country").html(0);var t=$(".matter_info_cont");e.TestTd=t.length,0==e.TestTd&&($(".payment .payment-order").die(),$("#payArea").find(".payment .print").off())})},confirmButton:function(){function i(){var t=document.createElement("tr");return t.className="matter_info_cont",t.setAttribute("payid",n.oPct.productId),t.setAttribute("pronum",n.oPct.productNumber),t.setAttribute("procod",n.oPct.proTypeCode),t.innerHTML='<td class="firstinterCode">'+n.oPct.interCode+'</td>\t\t\t\t\t\t\t<td class="name">'+n.oPct.productName+'</td>\t\t\t\t\t\t\t<td class="univalent">'+n.oPct.price+'</td>\t\t\t\t\t\t\t<td class="num">\t\t\t\t\t\t\t\t<span class="less_btn">-</span>\t\t\t\t\t\t\t\t<input type="text" name="discount" value="1" class="input-small count_td" maxlength="4">\t\t\t\t\t\t\t\t<span class="add_btn">+</span>\t\t\t\t\t\t\t</td>\t\t\t\t\t\t\t<td></td>\t\t\t\t\t\t\t<td class="loan">'+n.oPct.price+'</td>\t\t\t\t\t\t\t<td>0</td>\t\t\t\t\t\t\t<td class="actual_num">'+n.oPct.price+'</td>\t\t\t\t\t\t\t<td class="remove">删除</td>',t}var n=this,s=$("#payval").val(),a=!1;if(""==s)return void t.showDialog("国标码不能为空",!1);for(var r=$(".matter_info_cont").length,o=0;o<r;o++)s==$(".firstinterCode").eq(o).text()&&(a=!0,function(t){first_tr_num=$(".firstinterCode").eq(t).parent().children().find("input").val(),first_tr_num++,$(".firstinterCode").eq(t).parent().children().find("input").val(first_tr_num);var e=$(".firstinterCode").eq(t).parent().children().eq(2).html(),i=$(".firstinterCode").eq(t).parent().children().find("input").val(),n=(e*i).toFixed(2);$(".firstinterCode").eq(t).parent().children().eq(5).html(n),$(".firstinterCode").eq(t).parent().children().eq(7).html(n)}(o),n.sum_number(),$(".lading").val(""));if(!a){var l={interCode:s};return e.getService("PayService").pay_Amount(l,function(e){var s=e.product;if(n.oPct=s,!s)return t.showDialog("查无数据",!1),!1;t.loadEJS({ejs_url:n.EJS.conten,jsondata:{pct:s},jq_object:$("#indexContent")});var a=i();$(".matter_info").append(a);var r=$(".matter_info_cont");n.sum_number(),n.TestTd=r.length,0!=r.length&&n.changePayway(),n.userfavourable(),$(".lading").val("")}),n.change_num(),n.sum_number(),!1}return n.sum_number(),!1},sum_number:function(){var t=this,e=0;$("tr td:nth-child(8)").each(function(){e+=Number($(this).html())}),e=e.toFixed(2),t.Sum_money=e,$(".odd-numbersall em").html(e),$(".order_money").html($(".money_num").html()),$(".order_country").html($(".money_countey").html());var i=0;return $("tr td:nth-child(4) input").each(function(){i+=Number($(this).val())}),$(".odd-numbers-number em").html(i),!1},change_num:function(){var t=$(".univalent").html(),e=$(".count_td").val(),i=(t*e).toFixed(2);$(".loan").html(i)},change:function(){var t=this;$(".less_btn").die(),$(".less_btn").live("click",function(){var e=$(this).next().val();e--,$(this).next().val(e),e<=1&&$(this).next().val(1);var i=$(this).parent().prev().html(),n=$(this).next().val(),s=(i*n).toFixed(2);$(this).parent().next().next().html(s),$(this).parent().parent().children().eq(7).html($(this).parent().next().next().html()),t.sum_number()}),$(".add_btn").die(),$(".add_btn").live("click",function(){var e=$(this).prev().val();e++,$(this).prev().val(e);var i=$(this).parent().prev().html(),n=(i*e).toFixed(2);$(this).parent().next().next().html(n),$(this).parent().parent().children().eq(7).html($(this).parent().next().next().html()),t.sum_number()}),$(".matter_info_cont .remove").die(),$(".matter_info_cont .remove").live("click",function(){$(this).parent().remove();var e=$(".matter_info_cont");t.TestTd=e.length,0==t.TestTd?($(".odd-numbers em").html("0"),$(".order_money").html(0),$(".order_country").html(0),$(".payment .payment-order").die(),$("#payArea").find(".payment .print").off()):t.sum_number()})},userfavourable:function(){var i=this,n=$(".form-open").find(".matter_info_cont");0!=n.length&&($("#payArea").find(".payment .print").on("click",function(){$("#userfavourable").show(),$(".entry-favourable").focus()}),$("#userfavourable .pho1").on("click",function(){$("#userfavourable").hide()}),$(".entry-favourable").off(),$(".entry-favourable").on("keydown",function(n){var s=n.keyCode;if("13"==s){var a=$("#userfavourable .entry-favourable").val();if(""==a)t.showDialog("优惠券不能为空",!1);else{for(var r=$("#userfavourable .entry-favourable").val(),o=$(".form-open .matter_info_cont"),l="",c=0;c<o.length;c++){var d=$(o[c]).attr("pronum"),h=$(o[c]).attr("procod"),u=$(o[c]).children().eq(3).children().eq(1).val(),p=Number(100*$(o[c]).children().eq(5).html()).toFixed(0);l+=d+"|"+h+"|"+u+"|"+p+";"}var f=l.substring(0,l.length-1),v={sypt:"001",yhm:r,proInfo:f};e.getService("PayService").userfavourable(v,function(t){var n=t.entity||{};i.oyHmessage=n.dyje/100,$(".money_cpu").html(e.formatCurrency(i.oyHmessage));var s=i.Sum_money-i.oyHmessage;i.CurrentM=s,i.calculatecpu(),$("#userfavourable").hide()})}}}),$("#userfavourable .entry-confirm").off(),$("#userfavourable .entry-confirm").on("click",function(){var n=$("#userfavourable .entry-favourable").val();if(""==n)t.showDialog("优惠券不能为空",!1);else{for(var s=$("#userfavourable .entry-favourable").val(),a=$(".form-open .matter_info_cont"),r="",o=0;o<a.length;o++){var l=$(a[o]).attr("pronum"),c=$(a[o]).attr("procod"),d=$(a[o]).children().eq(3).children().eq(1).val(),h=Number(100*$(a[o]).children().eq(5).html()).toFixed(0);r+=l+"|"+c+"|"+d+"|"+h+";"}var u=r.substring(0,r.length-1),p={sypt:"001",yhm:s,proInfo:u};e.getService("PayService").userfavourable(p,function(t){var n=t.entity||{};i.oyHmessage=n.dyje/100,$(".money_cpu").html(e.formatCurrency(i.oyHmessage));var s=i.Sum_money-i.oyHmessage;i.CurrentM=s,i.calculatecpu(),$("#userfavourable").hide()})}}))},changePayway:function(){var i=this;$(".payment .payment-order").die(),$(".payment .payment-order").live("click",function(){$("#changepayway").show()}),$("#changepayway .pho").die(),$("#changepayway .pho").live("click",function(){$("#changepayway").hide()}),$("#changepayway .weixinway").die(),$("#changepayway .weixinway").live("click",function(){$("#showeds").show(),$("#changepayway").hide(),$(".repayment_text").focus(),$("#showeds .pum_money").html($(".money_cpu").html()),$(".order_country").html($(".money_countey").html());for(var n="",s=$(".matter_info .matter_info_cont"),a=0;a<s.length;a++){var r=$(s[a]).attr("payid"),o=$(s[a]).find(".num").find("input").val();n+=r+":"+o+","}var l=n.substring(0,n.length-1),c=e.getData("userinfo").shop.shopSn,d=$(".entry-favourable").val(),h={productData:l,shopSn:c,channel:2,yhm:d};e.getService("PayService").pay_AmountNew(h,function(t){var e=t,n=e.orderId;i.PayId=n}),$("#sced-close").live("click",function(){$("#showeds").hide()}),$(".end-confirms").live("click",function(){$("#showeds").hide()}),$(".repayment_text").off(),$(".repayment_text").on("keydown",function(n){var s=n.keyCode;if("13"==s){var a=$(".repayment_text").val(),r=e.getData("userinfo").shop.shopSn,o={body:r,orderId:i.PayId,auth_code:a};e.getService("PayService").paykeydown(o,function(e){t.showDialog("业务处理成功",!0)}),$(".repayment_text").val("")}})}),$("#changepayway .zhifubao").die(),$("#changepayway .zhifubao").live("click",function(){$("#showeds").show(),$("#changepayway").hide(),$(".repayment_text_new").focus(),$("#showeds .pum_money").html($(".money_cpu").html()),$(".order_country").html($(".money_countey").html());for(var n="",s=$(".matter_info .matter_info_cont"),a=0;a<s.length;a++){var r=$(s[a]).attr("payid"),o=$(s[a]).find(".num").find("input").val();n+=r+":"+o+","}var l=n.substring(0,n.length-1),c=e.getData("userinfo").shop.shopSn,d=$(".entry-favourable").val(),h={productData:l,shopSn:c,channel:2,yhm:d};e.getService("PayService").pay_AmountNew(h,function(t){var e=t,n=e.orderId;i.PayId=n}),$("#sced-close").live("click",function(){$("#showeds").hide()}),$(".end-confirms").live("click",function(){$("#showeds").hide()}),$(".repayment_text_new").off(),$(".repayment_text_new").on("keydown",function(n){var s=n.keyCode;if("13"==s){var a=$(".repayment_text_new").val(),r=e.getData("userinfo").shop.shopSn,o={body:r,orderId:i.PayId,auth_code:a};e.getService("PayService").paykeydown(o,function(e){t.showDialog("业务处理成功",!0)}),$(".repayment_text_new").val("")}})}),$("#changepayway .scanningnew .qs_wallet").off(),$("#changepayway .scanningnew .qs_wallet").on("click",function(){$("#showeds").show(),$("#changepayway").hide(),$(".repayment_text_qsqb").focus(),$("#showeds .pum_money").html($(".money_cpu").html()),$(".order_country").html($(".money_countey").html());for(var n="",s=$(".matter_info .matter_info_cont"),a=0;a<s.length;a++){var r=$(s[a]).attr("payid"),o=$(s[a]).find(".num").find("input").val();n+=r+":"+o+","}var l=n.substring(0,n.length-1),c=e.getData("userinfo").shop.shopSn,d=$(".entry-favourable").val(),h={productData:l,shopSn:c,channel:2,yhm:d};e.getService("PayService").pay_AmountNew(h,function(t){var e=t,n=e.orderId;i.PayId=n}),$("#sced-close").live("click",function(){$("#showeds").hide()}),$(".end-confirms").live("click",function(){$("#showeds").hide()}),$(".repayment_text_qsqb").off(),$(".repayment_text_qsqb").on("keydown",function(n){var s=n.keyCode;if("13"==s){var a=$(".repayment_text_qsqb").val(),r=(e.getData("userinfo").shop.shopSn,{orderId:i.PayId,qrcode:a});e.getService("PayService").paykeydown_qsqb(r,function(e){t.showDialog("业务处理成功",!0)}),$(".repayment_text_qsqb").val("")}})})},quickOpenMenu:function(){function i(t){$("#totalClass").html(""),$("#childContent").html("");var e="";e='<li><div class="list-item payfather-previous previous list-item-pers" data-value="'+t+'">上一页</div></li>',s.classResult[t-1]&&$.each(s.classResult[t-1],function(t,i){var n="<li><div data-parentCode="+i.id+' class="list-item list-item-pers pay-add-food">'+i.name+"</div></li>";e+=n}),e+='<li><div class="list-item payfather-next next list-item-pers" data-value="'+t+'">下一页</div></li>',$("#totalClass").append(e),$("#show").find("#totalClass").children().eq(1).find("div.pay-add-food").click()}function n(t){$("#childContent").html("");var e="";return 0!=s.childResult.length&&0!=s.childResult[t-1].length&&($.each(s.childResult[t-1],function(i,n){var a=s.childResult[t-1];if(i%5==0&&(e+=i>14?'<div class="distribution-body"><ul class="distribution-end">':i+5>a.length?'<div class="distribution-body"><ul class="distribution-end">':'<div class="distribution-body"><ul class="distribution">'),s.childResult[t-1]){var r='<li><div class="list-item payfoodItem" data-childInterCode="'+n.interCode+'"><p class="food-istem">'+n.productName+'</p><p class="money-col">￥'+n.shopPrice+"</p></div></li>";e+=r}18==a.length?(4!=i&&9!=i&&14!=i||(e+="</ul></div>"),i==s.childResult[t-1].length-1&&(e=e+'<li><div class="list-item previous list-item-pers payfood-pre" data-value="'+t+'">上一页</div></li>',
17==i&&s.childResult[t]&&(e=e+'<li><div class="list-item previous list-item-pers payfood-next" data-value="'+t+'">下一页</div></li>'),e+="</ul></div>")):(4!=i&&9!=i&&14!=i||(e+="</ul></div>"),i==s.childResult[t-1].length-1&&("5"!=a.length&&"10"!=a.length&&"15"!=a.length||(e+='<div class="distribution-body"><ul class="distribution-end">'),e+="</ul></div>"))}),void $("#childContent").append(e))}var s=this;s.userinfo=e.getData("userinfo");s.userinfo&&s.userinfo.shop&&s.userinfo.shop.shopSn||"";$(".showOverlay").off(),$("#payshowOverlay").on("click",function(){var t={isShow:"1",status:"0"};e.getService("PayService").commodityClassification(t,function(t){var e=t&&t.list||[];s.classResult=[],s.childResult=[];for(var n=0;n<e.length;n+=5)s.classResult.push(e.slice(n,n+5));i(1),$("#show").find("#totalClass").children().eq(1).find("div.pay-add-food").click()}),$("#show").show(),$("#near-show").css("left",(window.document.body.clientWidth-$("#near-show").width())/2+"px"),$("#near-show").css("top",(window.document.body.clientHeight-$("#near-show").height()-200)/2+"px")}),$("#showHidden").on("click",function(){$("#show").hide()}),$("#near-show").delegate(".payfather-previous","click",function(){var e=$(this).attr("data-value"),n=Number(e)-1;return 0==n?(t.showDialog("第一页了"),!1):void i(n)}),$("#near-show").delegate(".payfather-next","click",function(){var e=$(this).attr("data-value"),n=Number(e)+1;return s.classResult[n-1]?void i(n):(t.showDialog("最后一页了"),!1)}),$("#near-show").delegate(".payfood-pre","click",function(){var e=$(this).attr("data-value"),i=Number(e)-1;return 0==i?(t.showDialog("第一页了"),!1):void n(i)}),$("#near-show").delegate(".payfood-next","click",function(){var t=$(this).attr("data-value"),e=Number(t)+1;n(e)}),$("#near-show").delegate(".pay-add-food","click",function(){s.childResult=[];var t=$(this).attr("data-parentCode"),i={isApp:"1",isComboProduct:"0",isFood:"",quickTypeId:t};e.getService("PayService").queryProductDetial(i,function(t){var e=t&&t.list||[];s.childResult=[];for(var i=0;i<e.length;i+=18)s.childResult.push(e.slice(i,i+18));n(1)})}),$("#near-show").delegate(".payfoodItem","click",function(){var t=$(this).attr("data-childInterCode");$(".bounce-conthr .lading").val(t),$(".agin-modify .lading").focus(),$("#show").hide()})},calculatecpu:function(){var t=this;t.CurrentM<0&&(t.CurrentM=0),$(".money_countey").html(e.formatCurrency(t.CurrentM))},bindingemember:function(){var i=this;$(".payment").find(".orders").on("click",function(){$("#bindingemember").show()}),$("#bindingemember .pho1").on("click",function(){$("#bindingemember").hide()}),$("#bindingemember .entry-confirm").on("click",function(){var n=$("#bindingemember .entry-favourable").val();if(""==n)t.showDialog("会员号不能为空",!1);else{var s={phone:n};e.getService("PayService").bindingemember(s,function(t){var e=t,e=t.user.userId;i.PeopleId=e,$("#memberId").html(e),$(".payment .prompt").show()})}})}},i}.apply(e,n),!(void 0!==s&&(t.exports=s))}]);