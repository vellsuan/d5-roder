webpackJsonp([4],[,,,,,,,,,,,function(e,t,i){var n,r;n=[],r=function(){var e=function(e){};return e.prototype.MD5=function(e){function t(e){return n(i(r(e)))}function i(e){return o(s(a(e),8*e.length))}function n(e){try{}catch(e){v=0}for(var t,i=v?"0123456789ABCDEF":"0123456789abcdef",n="",r=0;r<e.length;r++)t=e.charCodeAt(r),n+=i.charAt(t>>>4&15)+i.charAt(15&t);return n}function r(e){for(var t,i,n="",r=-1;++r<e.length;)t=e.charCodeAt(r),i=r+1<e.length?e.charCodeAt(r+1):0,55296<=t&&t<=56319&&56320<=i&&i<=57343&&(t=65536+((1023&t)<<10)+(1023&i),r++),t<=127?n+=String.fromCharCode(t):t<=2047?n+=String.fromCharCode(192|t>>>6&31,128|63&t):t<=65535?n+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):t<=2097151&&(n+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return n}function a(e){for(var t=Array(e.length>>2),i=0;i<t.length;i++)t[i]=0;for(var i=0;i<8*e.length;i+=8)t[i>>5]|=(255&e.charCodeAt(i/8))<<i%32;return t}function o(e){for(var t="",i=0;i<32*e.length;i+=8)t+=String.fromCharCode(e[i>>5]>>>i%32&255);return t}function s(e,t){e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t;for(var i=1732584193,n=-271733879,r=-1732584194,a=271733878,o=0;o<e.length;o+=16){var s=i,l=n,p=r,v=a;i=d(i,n,r,a,e[o+0],7,-680876936),a=d(a,i,n,r,e[o+1],12,-389564586),r=d(r,a,i,n,e[o+2],17,606105819),n=d(n,r,a,i,e[o+3],22,-1044525330),i=d(i,n,r,a,e[o+4],7,-176418897),a=d(a,i,n,r,e[o+5],12,1200080426),r=d(r,a,i,n,e[o+6],17,-1473231341),n=d(n,r,a,i,e[o+7],22,-45705983),i=d(i,n,r,a,e[o+8],7,1770035416),a=d(a,i,n,r,e[o+9],12,-1958414417),r=d(r,a,i,n,e[o+10],17,-42063),n=d(n,r,a,i,e[o+11],22,-1990404162),i=d(i,n,r,a,e[o+12],7,1804603682),a=d(a,i,n,r,e[o+13],12,-40341101),r=d(r,a,i,n,e[o+14],17,-1502002290),n=d(n,r,a,i,e[o+15],22,1236535329),i=c(i,n,r,a,e[o+1],5,-165796510),a=c(a,i,n,r,e[o+6],9,-1069501632),r=c(r,a,i,n,e[o+11],14,643717713),n=c(n,r,a,i,e[o+0],20,-373897302),i=c(i,n,r,a,e[o+5],5,-701558691),a=c(a,i,n,r,e[o+10],9,38016083),r=c(r,a,i,n,e[o+15],14,-660478335),n=c(n,r,a,i,e[o+4],20,-405537848),i=c(i,n,r,a,e[o+9],5,568446438),a=c(a,i,n,r,e[o+14],9,-1019803690),r=c(r,a,i,n,e[o+3],14,-187363961),n=c(n,r,a,i,e[o+8],20,1163531501),i=c(i,n,r,a,e[o+13],5,-1444681467),a=c(a,i,n,r,e[o+2],9,-51403784),r=c(r,a,i,n,e[o+7],14,1735328473),n=c(n,r,a,i,e[o+12],20,-1926607734),i=u(i,n,r,a,e[o+5],4,-378558),a=u(a,i,n,r,e[o+8],11,-2022574463),r=u(r,a,i,n,e[o+11],16,1839030562),n=u(n,r,a,i,e[o+14],23,-35309556),i=u(i,n,r,a,e[o+1],4,-1530992060),a=u(a,i,n,r,e[o+4],11,1272893353),r=u(r,a,i,n,e[o+7],16,-155497632),n=u(n,r,a,i,e[o+10],23,-1094730640),i=u(i,n,r,a,e[o+13],4,681279174),a=u(a,i,n,r,e[o+0],11,-358537222),r=u(r,a,i,n,e[o+3],16,-722521979),n=u(n,r,a,i,e[o+6],23,76029189),i=u(i,n,r,a,e[o+9],4,-640364487),a=u(a,i,n,r,e[o+12],11,-421815835),r=u(r,a,i,n,e[o+15],16,530742520),n=u(n,r,a,i,e[o+2],23,-995338651),i=f(i,n,r,a,e[o+0],6,-198630844),a=f(a,i,n,r,e[o+7],10,1126891415),r=f(r,a,i,n,e[o+14],15,-1416354905),n=f(n,r,a,i,e[o+5],21,-57434055),i=f(i,n,r,a,e[o+12],6,1700485571),a=f(a,i,n,r,e[o+3],10,-1894986606),r=f(r,a,i,n,e[o+10],15,-1051523),n=f(n,r,a,i,e[o+1],21,-2054922799),i=f(i,n,r,a,e[o+8],6,1873313359),a=f(a,i,n,r,e[o+15],10,-30611744),r=f(r,a,i,n,e[o+6],15,-1560198380),n=f(n,r,a,i,e[o+13],21,1309151649),i=f(i,n,r,a,e[o+4],6,-145523070),a=f(a,i,n,r,e[o+11],10,-1120210379),r=f(r,a,i,n,e[o+2],15,718787259),n=f(n,r,a,i,e[o+9],21,-343485551),i=h(i,s),n=h(n,l),r=h(r,p),a=h(a,v)}return Array(i,n,r,a)}function l(e,t,i,n,r,a){return h(p(h(h(t,e),h(n,a)),r),i)}function d(e,t,i,n,r,a,o){return l(t&i|~t&n,e,t,r,a,o)}function c(e,t,i,n,r,a,o){return l(t&n|i&~n,e,t,r,a,o)}function u(e,t,i,n,r,a,o){return l(t^i^n,e,t,r,a,o)}function f(e,t,i,n,r,a,o){return l(i^(t|~n),e,t,r,a,o)}function h(e,t){var i=(65535&e)+(65535&t),n=(e>>16)+(t>>16)+(i>>16);return n<<16|65535&i}function p(e,t){return e<<t|e>>>32-t}var v=0;return t(e)},e}.apply(t,n),!(void 0!==r&&(e.exports=r))},,,,function(e,t,i){var n,r;n=[i(9)],r=function(e){var t={};return t.appData={},t.setData=function(i,n){t.appData[i]=n||"",e.itemData(i,n)},t.getData=function(i){return t.appData[i]||e.itemData(i)||""},t.validate=function(e,t,n){var r=i(16);new r(e,t.get(0),n)},t.getService=function(e){var t={};return t[e]||(t.EleSellService=i(17),t.OrderService=i(18),t.PayService=i(19),t.CouponService=i(20),t.LoginOutService=i(21)),t[e]||{}},t.MD5=function(e){var t=i(11);return(new t).MD5(e)},t.limitCharacter=function(e,t){return Number(t)>t?e.substring(0,t):e},t.formatCurrency=function(e){e=e.toString().replace(/\$|\,/g,""),isNaN(e)&&(e="0"),sign=e==(e=Math.abs(e)),e=Math.floor(100*e+.50000000001),cents=e%100,e=Math.floor(e/100).toString(),cents<10&&(cents="0"+cents);for(var t=0;t<Math.floor((e.length-(1+t))/3);t++)e=e.substring(0,e.length-(4*t+3))+","+e.substring(e.length-(4*t+3));return(sign?"":"-")+e+"."+cents},t.formatCurrencyTenThou=function(e){e=e.toString().replace(/\$|\,/g,""),isNaN(e)&&(e="0"),sign=e==(e=Math.abs(e)),e=Math.floor(10*e+.50000000001),cents=e%10,e=Math.floor(e/10).toString();for(var t=0;t<Math.floor((e.length-(1+t))/3);t++)e=e.substring(0,e.length-(4*t+3))+","+e.substring(e.length-(4*t+3));return(sign?"":"-")+e+"."+cents},t.removeComma=function(e){return e?(e+"").replace(/\,/g,""):0},t.formatTime=function(e,t){var i,n,r,a,o,s,l="";if(""!=e)switch(e=new Date(parseInt(e)),i=e.getFullYear(),n=e.getMonth()+1,n+1<10&&(n="0"+n),r=e.getDate(),r<10&&(r="0"+r),a=e.getHours(),a<10&&(a="0"+a),o=e.getMinutes(),o<10&&(o="0"+o),s=e.getSeconds(),s<10&&(s="0"+s),t){case 0:l=i+n+r+a+o+s;break;case 1:l=i+"-"+n+"-"+r+" "+a+":"+o+":"+s;break;case 2:l=i+"/"+n+"/"+r+" "+a+":"+o+":"+s;break;case 3:l=i+"年"+n+"月"+r+"日"+a+"时"+o+"分"+s+"秒";break;case 4:l=i+"-"+n+"-"+r;break;case 5:l=i+"_"+n+"_"+r+" "+a+"_"+o+"_"+s;break;case 6:l=n+"/"+r;break;case 7:l=a+":"+o+":"+s}return l},window.Util=t,t}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(9)],r=function(e){var t=function(e,t,i){this.elem=t,this.options=e,this.opt={tips_required:"不能为空",tips_email:"邮箱地址格式有误",tips_num:"请填写数字",tips_chinese:"请填写中文",tips_mobile:"格式有误",tips_idcard:"身份证号码格式有误",tips_pwdequal:"两次密码不一致",tips_ajax:"信息已经存在",tips_numletter:"请输入数字和字母的组合字符",tips_length:"",tips_passport:"护照格式有误",tips_currency:"金额格式有误",reg_email:/^\w+\@[a-zA-Z0-9]+\.[a-zA-Z]{2,4}$/i,reg_num:/^\d+$/,reg_currency:/^([1-9]\d{0,9}|0)([.]?|(\.\d{1,2})?)$/,reg_chinese:/^[\u4E00-\u9FA5]+$/,reg_mobile:/^1[34578]{1}[0-9]{9}$/,reg_idcard:/^\d{14}\d{3}?\w$/,reg_numletter:/[^\d|chun]/,reg_passport:/^1[45][0-9]{7}|G[0-9]{8}|P[0-9]{7}|S[0-9]{7,8}|D[0-9]+$/},this.options=$.extend(this.opt);var n=this.validate();i&&i(n)};return t.prototype={validate:function(){_this=this;var e=!0,t=[];return $(_this.elem).find("input,textarea").each(function(){var i=$(this).attr("check");if(i){for(var n=i.split(" "),r=0;r<n.length;r++)if(!_this.check($(this),n[r],$(this))){e=!1;break}t.push(e)}}),e},check:function(e,t,i){var n=$.trim($(i).val());switch(t){case"required":return!!n||_this.showErrorMsg(e,this.opt.tips_required,!1);case"email":return!!_this.regmatch(n,this.opt.reg_email)||_this.showErrorMsg(e,this.opt.tips_email,!1);case"num":return!!_this.regmatch(n,this.opt.reg_num)||_this.showErrorMsg(e,this.opt.tips_num,!1);case"currency":return!!_this.regmatch(n,this.opt.reg_currency)||_this.showErrorMsg(e,this.opt.tips_currency,!1);case"chinese":case"mobile":return!!_this.regmatch(n,this.opt.reg_mobile)||_this.showErrorMsg(e,this.opt.tips_mobile,!1);case"idcard":return!!_this.regmatch(n,this.opt.reg_idcard)||_this.showErrorMsg(e,this.opt.tips_idcard,!1);case"numletter":return!!_this.regmatch(n,this.opt.reg_numletter)||_this.showErrorMsg(e,this.opt.tips_numletter,!1);case"passport":return!!_this.regmatch(n,this.opt.reg_passport)||_this.showErrorMsg(e,this.opt.tips_passport,!1);case"pwd1":return pwd1=n,!0;case"pwd2":return!!_this.pwdEqual(n,pwd1)||_this.showErrorMsg(e,this.opt.tips_pwdequal,!1);case"ajaxvalid":return!!_this.ajaxValidate(n,$(i).attr("ajaxurl"))||_this.showErrorMsg(e,this.opt.tips_ajax,!1);case"length":return!!_this.pwdEqual(n,i)||_this.showErrorMsg(e,this.opt.tips_length,!1);default:return!0}},pwdEqual:function(e,t){return e===t},regmatch:function(e,t){return""===e||t.test(e)},chekLength:function(t,i){var n=!0;if($(i).attr("min")!==!1&&str.length<parseInt($(i).attr("min"))){var r="至少输入"+$(i).attr("min")+"位字符！";e.showDialog(r),n=!1}if($(i).attr("max")!==!1&&str.length>parseInt($(i).attr("max"))){var r="最多输入"+$(i).attr("max")+"位字符！";e.showDialog(r),n=!1}return n},ajaxValidate:function(e,t){var i=!1;return $.ajax({type:"POST",url:t,data:{value:e},dataType:"json",timeout:300,async:!1,success:function(e){this.opt.tips_ajax=e.Message,i=e.Success},error:function(e,t){}}),i},showErrorMsg:function(t,i,n){if(!n){var r=$(t).attr("title")+i+"！";e.showDialog(r)}return n}},t}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(9),i(15)],r=function(e,t){var i={};return i.EleSellServiceFlag={},i.txzVerification=function(t,i){var n=this;this.EleSellServiceFlag.SKY00002||(this.EleSellServiceFlag.SKY00002=!0,e.Ajax.postRequest(t,"SKY00002",!0,!1).then(function(t){n.EleSellServiceFlag.SKY00002=!1;var r=e.Ajax.dataHandle(t),a=e.Ajax.isSuccesful(t);a&&i&&i(r)}))},i.myOderList=function(t,i){var n=this;if(!this.EleSellServiceFlag.OJ910103){this.EleSellServiceFlag.OJ910103=!0;var r=e.itemData("vuex").userInfo;t.shopSn=r&&r.shop&&r.shop.shopSn||"B00019",e.Ajax.postRequest(t,"OJ910103","",!1).then(function(t){n.EleSellServiceFlag.OJ910103=!1;var r=e.Ajax.dataHandle(t),a=e.Ajax.isSuccesful(t);a&&i&&i(r)})}},i.doneOrder=function(t,i){var n=this;this.EleSellServiceFlag.OR100007||(this.EleSellServiceFlag.OR100007=!0,e.Ajax.postRequest(t,"OR100007",!0,!1).then(function(t){n.EleSellServiceFlag.OR100007=!1;var r=e.Ajax.dataHandle(t),a=e.Ajax.isSuccesful(t);a&&i&&i(r)}))},i.deBlockOrder=function(t,i){var n=this;this.EleSellServiceFlag.OJ910108||(this.EleSellServiceFlag.OJ910108=!0,e.Ajax.postRequest(t,"OJ910108",!0,!1).then(function(t){n.EleSellServiceFlag.OJ910108=!1;var r=e.Ajax.dataHandle(t),a=e.Ajax.isSuccesful(t);a&&i&&i(r)}))},i.refuseOrderReason=function(t,i){e.Ajax.postRequest(t,"OR910006","",!1).then(function(t){var n=e.Ajax.dataHandle(t),r=e.Ajax.isSuccesful(t);r&&i&&i(n)})},i.interCodeQueryProduct=function(t,i){var n=this;this.EleSellServiceFlag.PR100066||(this.EleSellServiceFlag.PR100066=!0,e.Ajax.postRequest(t,"PR100066","",!0).then(function(t){n.EleSellServiceFlag.PR100066=!1;var r=e.Ajax.dataHandle(t),a=e.Ajax.isSuccesful(t);a&&i&&i(r)}))},i.modifyOrder=function(t,i){var n=this;this.EleSellServiceFlag.OJ910101||(this.EleSellServiceFlag.OJ910101=!0,e.Ajax.postRequest(t,"OJ910101",!0,!1).then(function(t){n.EleSellServiceFlag.OJ910101=!1;var r=e.Ajax.dataHandle(t),a=e.Ajax.isSuccesful(t);a&&i&&i(r)}))},i.getMessage=function(t,i){e.Ajax.postRequest(t,"CM100006",!0,!0).then(function(t){var n=e.Ajax.dataHandle(t),r=e.Ajax.isSuccesful(t);r&&i&&i(n)})},i.addCash=function(t,i){var n=e.itemData("vuex").userInfo;t.shopSn=n&&n.shop&&n.shop.shopSn||"B00019",e.Ajax.postRequest(t,"OJ910105",!0,!0).then(function(t){var n=e.Ajax.dataHandle(t),r=e.Ajax.isSuccesful(t);r&&i&&i(n)})},i.acceptOrRefuseOrder=function(t,i,n){var r=this;this.EleSellServiceFlag.OJ910104||(this.EleSellServiceFlag.OJ910104=!0,e.Ajax.postRequest(t,"OJ910104",!0,!1).then(function(t){r.EleSellServiceFlag.OJ910104=!1;var a=e.Ajax.isSuccesful(t);if(a){var o=e.Ajax.dataHandle(t);i&&i(o)}else n&&n(t)}))},i.orderSNQueryDetail=function(t,i){var n=this,r=e.itemData("vuex").userInfo;t.shopSn=r&&r.shop&&r.shop.shopSn||"B00019",this.EleSellServiceFlag.OJ910102||(this.EleSellServiceFlag.OJ910102=!0,e.Ajax.postRequest(t,"OJ910102","",!1).then(function(t){n.EleSellServiceFlag.OJ910102=!1;var r=e.Ajax.dataHandle(t),a=e.Ajax.isSuccesful(t);a&&i&&i(r)}))},i.commodityClassification=function(t,i){var n=this,r=e.itemData("vuex").userInfo;t.shopSn=r&&r.shop&&r.shop.shopSn||"B00019",this.EleSellServiceFlag.PR100060||(this.EleSellServiceFlag.PR100060=!0,e.Ajax.postRequest(t,"PR100060",!0,!1).then(function(t){n.EleSellServiceFlag.PR100060=!1;var r=e.Ajax.dataHandle(t),a=e.Ajax.isSuccesful(t);a&&i&&i(r)}))},i.queryProductDetial=function(t,i){var n=this,r=e.itemData("vuex").userInfo;t.shopSn=r&&r.shop&&r.shop.shopSn||"B00019",this.EleSellServiceFlag.PR100002||(this.EleSellServiceFlag.PR100002=!0,e.Ajax.postRequest(t,"PR100002",!0,!1).then(function(t){n.EleSellServiceFlag.PR100002=!1;var r=e.Ajax.dataHandle(t),a=e.Ajax.isSuccesful(t);a&&i&&i(r)}))},i.printOrder=function(t,i){var n=this;this.EleSellServiceFlag.OJ910106||(this.EleSellServiceFlag.OJ910106=!0,e.Ajax.postRequest(t,"OJ910106",!0,!0).then(function(t){n.EleSellServiceFlag.OJ910106=!1;var r=e.Ajax.dataHandle(t),a=e.Ajax.isSuccesful(t);a&&i&&i(r)}))},i.exchangeList=function(t,i){var n=e.itemData("vuex").userInfo;t.shopSn=n&&n.shop&&n.shop.shopSn||"B00019",e.Ajax.postRequest(t,"RJ100000","",!1).then(function(t){var n=e.Ajax.dataHandle(t),r=e.Ajax.isSuccesful(t);r&&i&&i(n)})},i.exchangeCheck=function(t,i){var n=this;if(!this.EleSellServiceFlag.RE100202){this.EleSellServiceFlag.RE100202=!0;var r=e.itemData("vuex").userInfo;t.uuId=r.adminId,e.Ajax.postRequest(t,"RE100202",!0,!1).then(function(t){n.EleSellServiceFlag.RE100202=!1;var r=e.Ajax.dataHandle(t),a=e.Ajax.isSuccesful(t);a&&i&&i(r)})}},i.tuihuanDetail=function(t,i){var n=this;this.EleSellServiceFlag.RE100001||(this.EleSellServiceFlag.RE100001=!0,e.Ajax.postRequest(t,"RE100001","",!1).then(function(t){n.EleSellServiceFlag.RE100001=!1;var r=e.Ajax.dataHandle(t),a=e.Ajax.isSuccesful(t);a&&i&&i(r)}))},i.checkReason=function(t,i){e.Ajax.postRequest(t,"OR200201","",!1).then(function(t){var n=e.Ajax.dataHandle(t),r=e.Ajax.isSuccesful(t);r&&i&&i(n)})},i}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(9),i(15)],r=function(e,t){var i={};return i.myOderList=function(i,n){var r=t.getData("userinfo");i.shopSn=r&&r.shop&&r.shop.shopSn,e.Ajax.postRequest(i,"OJ910103","",!1).then(function(t){var i=e.Ajax.dataHandle(t),r=e.Ajax.isSuccesful(t);r&&n&&n(i)})},i.waimaiReport=function(i,n){var r=t.getData("userinfo");i.shopSn=r&&r.shop&&r.shop.shopSn,e.Ajax.postRequest(i,"OJ910107","",!1).then(function(t){var i=e.Ajax.dataHandle(t),r=e.Ajax.isSuccesful(t);r&&n&&n(i)})},i.printOrder=function(t,i){e.Ajax.postRequest(t,"OJ910106","",!1).then(function(t){var n=e.Ajax.dataHandle(t),r=e.Ajax.isSuccesful(t);r&&i&&i(n)})},i}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(9),i(15)],r=function(e,t){var i={};return i.pay_Amount=function(t,i){e.Ajax.postRequest(t,"PR100066").then(function(t){var n=e.Ajax.dataHandle(t),r=e.Ajax.isSuccesful(t);r&&i&i(n)})},i.pay_AmountNew=function(t,i){e.Ajax.postRequest(t,"OR100022","",!0).then(function(t){var n=e.Ajax.dataHandle(t),r=e.Ajax.isSuccesful(t);r&&i&i(n)})},i.paykeydown=function(t,i){e.Ajax.postRequest(t,"DE100018","",!0).then(function(t){var n=e.Ajax.dataHandle(t),r=e.Ajax.isSuccesful(t);r&&i&i(n)})},i.paykeydown_qsqb=function(t,i){e.Ajax.postRequest(t,"DE100024","",!0).then(function(t){var n=e.Ajax.dataHandle(t),r=e.Ajax.isSuccesful(t);r&&i&i(n)})},i.payClassification=function(t,i){e.Ajax.postRequest(t,"PR100017","",!0).then(function(t){var n=e.Ajax.dataHandle(t),r=e.Ajax.isSuccesful(t);r&&i&&i(n)})},i.queryProductDetial=function(i,n){var r=t.getData("userinfo");i.shopSn=r&&r.shop&&r.shop.shopSn,e.Ajax.postRequest(i,"PR100002",!0,!1).then(function(t){var i=e.Ajax.dataHandle(t),r=e.Ajax.isSuccesful(t);r&&n&&n(i)})},i.commodityClassification=function(i,n){var r=t.getData("userinfo");i.shopSn=r&&r.shop&&r.shop.shopSn,e.Ajax.postRequest(i,"PR100060",!0,!1).then(function(t){var i=e.Ajax.dataHandle(t),r=e.Ajax.isSuccesful(t);r&&n&&n(i)})},i.userfavourable=function(t,i){e.Ajax.postRequest(t,"CY200024").then(function(t){var n=e.Ajax.dataHandle(t),r=e.Ajax.isSuccesful(t);r&&i&&i(n)})},i.userfavourablenew=function(t,i){e.Ajax.postRequest(t,"CY200025").then(function(t){var n=e.Ajax.dataHandle(t),r=e.Ajax.isSuccesful(t);r&&i&&i(n)})},i.bindingemember=function(t,i){e.Ajax.postRequest(t,"CC100003").then(function(t){var n=e.Ajax.dataHandle(t),r=e.Ajax.isSuccesful(t);r&&i&&i(n)})},i}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(9),i(15)],r=function(e,t){var i={};return i.coupon_Exchange=function(i,n){var r=t.getData("userinfo");i.shopSn=r&&r.shop&&r.shop.shopSn,e.Ajax.postRequest(i,"PR100071","",!0).then(function(t){var i=e.Ajax.dataHandle(t),r=e.Ajax.isSuccesful(t);r&&n&n(i)})},i.Usecoupon_Exchange=function(i,n){var r=t.getData("userinfo");i.shopSn=r&&r.shop&&r.shop.shopSn,e.Ajax.postRequest(i,"OR100023","",!0).then(function(t){var i=e.Ajax.dataHandle(t),r=e.Ajax.isSuccesful(t);r&&n&n(i)})},i}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(9),i(15)],r=function(e,t){var i={};return i.login=function(t,i){e.Ajax.postRequest(t,"CM300101","",!1).then(function(t){var n=e.Ajax.dataHandle(t),r=e.Ajax.isSuccesful(t);r&&i&&i(n)})},i.logOut=function(i,n){var r=t.getData("userinfo");i.key=r.adminId,e.Ajax.postRequest(i,"CM300102","",!1).then(function(t){var i=e.Ajax.dataHandle(t),r=e.Ajax.isSuccesful(t);r&&n&&n(i)})},i}.apply(t,n),!(void 0!==r&&(e.exports=r))},,,,,function(e,t,i){var n,r;n=[i(9),i(15)],r=function(e,t){var i=function(t){this.EJS={main:"./views/eleSell/index.ejs",noRecOrder:"./views/eleSell/noRecOrder.ejs",existOrder:"./views/eleSell/existOrder.ejs",selfTakeOver:"./views/eleSell/selfTakeOver.ejs",quickMenu:"./views/eleSell/quickMenu.ejs",goStoreTake:"./views/eleSell/goStoreTake.ejs",noRecOrderTable:"./views/eleSell/noRecOrderTable.ejs",modifyTable:"./views/eleSell/modifyTable.ejs",scanCodeTable:"./views/eleSell/scanCodeTable.ejs",tableMoneyInfo:"./views/eleSell/tableMoneyInfo.ejs",tableModifyInfo:"./views/eleSell/tableModifyInfo.ejs",orderQueryTemp:"./views/eleSell/orderQueryTemp.ejs",checkContent:"./views/eleSell/checkContent.ejs",xrSingleOrder:"./views/eleSell/xrSingleOrder.ejs",chooseSendType:"./views/eleSell/chooseSendType.ejs"},this.styles=[],this.init(),this.quickMenu(),this.eleSellPrint(),this.initExpend(),this.xrOrderQuery(),e.iScroll=new IScroll("#wrapper",{mouseWheel:!0,scrollbars:!0})};return i.prototype={init:function(){var i=this;i.userinfo=e.itemData("vuex").userInfo,e.loadEJS({ejs_url:this.EJS.main,jsondata:{},jq_object:$("#moudleContent")}),$("#Pagination_all").parent().removeClass("hide"),this.eleSellService=t.getService("EleSellService"),$("#nav li").click(function(){$(this).find("a").addClass("selected").end().siblings().find("a").removeClass(),$("#Pagination_all").parent().hasClass("hide")&&$("#Pagination_all").parent().removeClass("hide"),"0"==$("#nav li").index(this)?($("#menu_con > div").find(".waitRec").children().remove(),i.waitRecOrder("1")):"1"==$("#nav li").index(this)?($("#menu_con > div").find(".goStoreExtract").children().remove(),$("#Pagination_all").parent().addClass("hide"),i.goStoreExtract()):"2"==$("#nav li").index(this)?($("#menu_con > div").find(".selfTakeOver").children().remove(),i.selfTakeOver()):"3"==$("#nav li").index(this)&&($("#menu_con > div").find(".existOrder").children().remove(),i.recOrder()),$("#menu_con > div").hide().eq($("#nav li").index(this)).show()}),this.waitRecOrder("1")},waitRecOrder:function(e){var t={orderStatus:"0",payStatus:"1",currentPageNum:e||"0",pageCount:"5"},i=$("#menu_con .waitRec");this.queryList(t,this.EJS.noRecOrder,i),this.paging(t,this.EJS.noRecOrder,i),this.getInterCode(),this.searchProductToGrid(),this.acceptOrRefuseOrder()},acceptOrRefuseOrder:function(){var t=this;$(".orders").die(),$(".single").die(),$(".jiedan").live("click",function(){var i=this,n=$(this).parents(".rebounds").attr("sendAddress"),r=$(this).parents(".rebounds").attr("sendType");"1"==r?e.showConfrim({okCallBack:function(){var n=0,r=0,a=$(i).parents(".info").find(".OrderTable>table").children("tbody").children(),o=$(i).parents(".info").find(".scanTable>table").children("tbody").children();if(a.each(function(e,t){if(0!=e){var i=$(t).find(".pnum").text();n+=Number(i)}}),o.each(function(e,t){if(0!=e){var i=$(t).find(".product_num>span").text();r+=Number(i)}}),n!=r)return e.showDialog("还有未扫码完的商品"),!1;var s={editor:t.userinfo&&t.userinfo.shop.shopowner||"匿名店长",orderId:$(i).attr("data-orderId"),orderStatus:"1"},l=$(i).attr("orderSN");t.eleSellService.txzVerification({orderSn:l},function(i){if(API)var n=API.sendReuqest(i.tzxUrl,i.hexiaoReqParam);if(n=JSON.parse(n),n.code&&"000000"==n.code)t.orderTaking(s,l);else if("2558"==n.code)t.orderTaking(s,l);else{if("2047"!=n.code)return e.showDialog(n.message+"["+n.code+"]"||"服务器异常!"),!1;t.orderRefuse(orderId)}})}},this):e.showContentDialog({jsondata:{address:n},contentEvent:function(){$("#showContentDialog .sendTypeLal").off(),$("#showContentDialog .sendTypeLal").on("click",function(){$(this).find(".check_choose").addClass("choose_check").parents().siblings(".checkAction").find(".check_choose").removeClass("choose_check")})},ejs_url:t.EJS.chooseSendType,okCallBack:function(){var n=0,r=0,a=$(i).parents(".info").find(".OrderTable>table").children("tbody").children(),o=$(i).parents(".info").find(".scanTable>table").children("tbody").children();if(a.each(function(e,t){var i=$(t).find(".pnum").text();n+=Number(i)}),o.each(function(e,t){var i=$(t).find(".product_num>span").text();r+=Number(i)}),n!=r)return e.showDialog("还有未扫码完的商品"),!1;var s=0;if($("#selfSend").hasClass("choose_check")?s="2":$("#ddSend").hasClass("choose_check")&&(s="1"),"0"==s)return e.showDialog("请选择配送方式！"),!1;var l={shippingType:s,editor:t.userinfo&&t.userinfo.shop.shopowner||"匿名店长",orderId:$(i).attr("data-orderId"),orderStatus:"1"},d=$(i).attr("orderSN");t.eleSellService.txzVerification({orderSn:d},function(i){if(API)var n=API.sendReuqest(i.tzxUrl,i.hexiaoReqParam);if(n=JSON.parse(n),n.code&&"000000"==n.code)t.orderTaking(l,d);else if("2558"==n.code)t.orderTaking(l,d);else{if("2047"!=n.code)return e.showDialog(n.message+"["+n.code+"]"||"服务器异常!"),!1;t.orderRefuse(orderId)}})}},this)}),$(".judan").live("click",function(){t.eleSellService.refuseOrderReason({},function(e){var t=e&&e.list;$.each(t,function(e,t){$("#refuseReason").append('<option value="'+t.resaon+'">'+t.resaon+"</option>")})}),$("#resuseDia").show(),$("#resuseDia .cancel").live("click",function(){$("#resuseDia").hide()});var i=$(this).attr("data-orderId");$("#judanBtn").on("click",function(){$("#resuseDia").hide();var n={editor:t.userinfo&&t.userinfo.shop.shopowner||"匿名店长",orderId:i,orderStatus:"4",reason:$("#refuseReason").val()};t.eleSellService.acceptOrRefuseOrder(n,function(i){e.showDialog("拒单成功！",!0),$("#nav li").eq(3).find("a").hasClass("selected")?t.recOrder():t.waitRecOrder(1)})})})},orderRefuse:function(t){var i=this,n={editor:i.userinfo&&i.userinfo.shop.shopowner||"匿名店长",orderId:t,orderStatus:"4",reason:"当前菜品已被估清"};i.eleSellService.acceptOrRefuseOrder(n,function(t){e.showDialog("拒单成功！",!0),$("#nav li").eq(3).find("a").hasClass("selected")?i.recOrder():i.waitRecOrder(1)})},orderTaking:function(t,i){var n=this;n.eleSellService.acceptOrRefuseOrder(t,function(t){return t&&"222222"==t.checkCode?(e.showDialog("接单失败,该订单已取消!",!1),void n.waitRecOrder(1)):(e.showDialog("接单成功！",!0),n.eleSellService.printOrder({orderSn:i},function(e){API.setPrintOrder("SiriusPosPrint|"+JSON.stringify(e.obj))}),void n.waitRecOrder(1))},function(t){e.showDialog(t.message),"333333"==t.code&&n.waitRecOrder(1)})},goStoreExtract:function(){var t=this;setTimeout(function(){e.iScroll.refresh(),$("#goStoreExtractArea .lading").focus()},200),$("#goStoreExtractArea .confirm").off(),$("#goStoreExtractArea .confirm").on("click",function(){var i=$("#goStoreExtractArea .lading").val();return""==i?($(this).parent().find(".prompt").show(),!1):($(this).parent().find(".prompt").hide(),void t.eleSellService.orderSNQueryDetail({orderSn:i,isSend:"1"},function(i){$("#goStoreExtractArea .lading").val("");var n=i&&i.order;if(!n)return e.showDialog("无此到店自提订单"),!1;if("0"==n.isSend)return e.showDialog("此单为送货上门单"),!1;var r=i&&i.productList||[];e.loadEJS({ejs_url:t.EJS.goStoreTake,jsondata:{list:r,orderObj:n},jq_object:$("#goStoreExtractArea .goStoreExtract")}),$("#completeOrder").on("click",function(){e.showConfrim({okCallBack:function(){var i=$(this).attr("data-orderId"),n=$(this).attr("data-orderStatu");return"0"==n?(e.showDialog("此单还未接单，请先接单"),!1):void t.bindDone.call(t,i)}},this)}),t.searchProductToGrid()}))}),$("#goStoreExtractArea .lading").off(),$("#goStoreExtractArea .lading").keydown(function(e){var t=e.keyCode;"13"==t&&$("#goStoreExtractArea .confirm").click()})},xrOrderQuery:function(){var t=this;$("#xrOrderQuery").off(),$("#xrOrderQuery").on("click",function(){e.showContentDialog({title:"订单查询",okBtn:"查询",jsondata:{},ejs_url:t.EJS.orderQueryTemp,okCallBack:function(){var i=$("#showContentDialog .orderNumber").val();t.eleSellService.orderSNQueryDetail({orderSn:i},function(i){var n=i&&i.order;if(!n)return e.showDialog("查无订单，请检查订单号！"),!1;setTimeout(function(){e.iScroll.refresh()},200),$("#Pagination_all").parent().addClass("hide");var r=i&&i.productList||[];e.loadEJS({ejs_url:t.EJS.xrSingleOrder,jsondata:{list:r,orderObj:n},jq_object:$("#xrWait .waitRec")})})}},this)})},bindDone:function(t){var i=this,n={orderId:t,orderStatus:"2"};i.eleSellService.doneOrder(n,function(t){e.showDialog("提货完成！",!0),$("#goStoreExtractArea .lading").val(""),$("#nav li").eq(1).click()})},selfTakeOver:function(){var e={orderStatus:"2",isSend:"1",currentPageNum:"1",pageCount:"5"},t=$("#menu_con .selfTakeOver");this.queryList(e,this.EJS.selfTakeOver,t),this.paging(e,this.EJS.selfTakeOver,t)},recOrder:function(){var e={orderStatus:"1",currentPageNum:"1",pageCount:"5"},t=$("#menu_con .existOrder");this.queryList(e,this.EJS.existOrder,t),this.paging(e,this.EJS.existOrder,t),this.searchProductToGrid(),this.sendProEvent()},sendProEvent:function(){var t=this,i=t.userinfo&&t.userinfo.shop&&t.userinfo.shop.shopowner||"匿名";$("#wrapper .sendPro").die(),$("#wrapper .sendPro").live("click",function(){e.showConfrim({okCallBack:function(){var n=$(this),r=$(this).attr("data-orderId"),a={userName:i,orderId:r,shippingStatus:"6"};t.eleSellService.doneOrder(a,function(t){e.showDialog("发货完成！",!0),n.hasClass("sprig-input-recOrder")?n.parent().find(".info").find(".conbtn .sendPro").remove():n.hasClass("orders")&&n.parents(".sprang-right").find(".sprig-input-recOrder").remove(),n.remove()})}},this)})},queryList:function(t,i,n){var r=this;n.children().remove(),t.jiedan="jiedan",r.eleSellService.myOderList(t,function(a){var o=a&&a.page&&a.page.datas||[],s=a&&a.page;return s?(r.zpOut=o,r.zpResult=s,e.loadEJS({ejs_url:i,jsondata:{list:o,result:s},jq_object:n}),$(".pageTip").text(s.totalRowCount+"条记录 "+t.currentPageNum+"/"+s.totalPage+"页"),void setTimeout(function(){e.iScroll.refresh()},200)):(n.html("无查询结果，请查询其他数据！"),void $("#Pagination_all").parent().addClass("hide"))})},queryOrderDetail:function(t,i,n,r){var a=this;a.eleSellService.orderSNQueryDetail({orderSn:t},function(t){var o=t&&t.order,s=t&&t.disPrice;a.orderDetail=o;var l=t&&t.productList||[];e.loadEJS({ejs_url:a.EJS.noRecOrderTable,jsondata:{list:l,orderObj:o},jq_object:i}),0!=n.length&&(e.loadEJS({ejs_url:a.EJS.modifyTable,jsondata:{list:l,orderObj:o},jq_object:n}),n.find(".product_num").css("border","solid 1px #ccc"));var d=$(r).parents(".sprang-right").find(".scanTable");0!=d.length&&(e.loadEJS({ejs_url:a.EJS.scanCodeTable,jsondata:{plist:l,orderObj:o},jq_object:d}),a.bindScanAddLess());var c=$(r).parents(".sprang-right").find(".tableMoneyInfo");e.loadEJS({ejs_url:a.EJS.tableMoneyInfo,jsondata:{orderObj:o,disPrice:s},jq_object:c});var u=$(r).parents(".sprang-right").find(".tableModifyInfo");e.loadEJS({ejs_url:a.EJS.tableModifyInfo,jsondata:{orderObj:o},jq_object:u}),("0"==o.shippingStatus||"5"==o.shippingStatus||"1"==o.orderStatus&&"1"==o.isSend&&"6"==o.shippingStatus)&&0!=n.length&&($(r).parent().find(".conbtn").eq(0).append('<input type="button" value="修改" class="modify" />'),a.activeModify()),"1"==$(r).attr("data-all-order")&&"1"==o.voucher&&($(r).parent().find(".conbtn").eq(0).append('<input type="button" data-orderId="'+o.orderId+'" id="deBlock" value="解锁" class="orders" />'),$("#deBlock").die(),$("#deBlock").live("click",function(){var t={orderId:$(this).attr("data-orderId"),voucher:"0"};a.eleSellService.deBlockOrder(t,function(t){e.showDialog("解锁成功！",!0),$("#nav").children().eq(0).click()})}))})},activeModify:function(){var i=this;$("#eleSellArea").find(".modify").die(),$("#eleSellArea").find(".modify").live("click",function(){var t=this;$(this).parent().next(".modifyagain").toggle(),e.iScroll.refresh(),"block"==$(t).parent().next(".modifyagain").css("display")&&e.iScroll.scrollToElement($(t).parent().next(".modifyagain").get(0),800,!0,!0,IScroll.utils.ease.quadratic)}),$("#eleSellArea").find(".cancel").die(),$("#eleSellArea").find(".cancel").live("click",function(){$(this).parents(".modifyagain").toggle(),e.iScroll.refresh()});$("#eleSellArea").find(".modification").off(),$("#eleSellArea").find(".modification").on("click",function(){for(var n=this,r="",a="",o="",s="",l="",d=$(this).parents(".modifyagain").find("table").children("tbody").children(),c=$(this).parents(".modifyagain").find("table").children("tbody").children("tr.add_flag"),u=$(this).parents(".modifyagain").find("table").children("tbody").children("tr.modify_flag"),f=!0,h=0;h<d.length;h++){var p=$(d[h]).find("td.num input").val();if(""==p||"0"==p){f=!1;break}}if(!f)return e.showDialog("数量不能为空或0"),!1;u.each(function(e,t){var i=$(t).find("td.num input").attr("data-old-value"),n=$(t).find("td.num input").val();i!=n&&(s=s+$(t).find(".internationa").attr("data-key")+",",l=l+n+",")}),c.each(function(e,t){r=r+$(t).find(".internationa").attr("data-productid")+",",a=a+$(t).find("td.num input").val()+","});var v=$(this).data("zp")||{};for(var h in v){var g=o.split(",");g[v[h]]||(o=o+v[h]+",")}var m=$(this).parents(".modifyagain").find(".tableModifyInfo").find("em").eq(1),S=t.removeComma(m.html()),x={orderId:$(this).attr("orderId"),nowAllPrice:S+""};r&&(r=r.substring(0,r.length-1),a=a.substring(0,a.length-1),$.extend(!0,x,{addIds:r,addNums:a})),s&&(s=s.substring(0,s.length-1),l=l.substring(0,l.length-1),$.extend(!0,x,{upIds:s,upNums:l})),o&&(o=o.substring(0,o.length-1),$.extend(!0,x,{delIds:o})),i.eleSellService.modifyOrder(x,function(t){$(n).parents(".modifyagain").find(".lading").val(""),$(n).data("zp",""),e.showDialog("修改订单成功！",!0),i.queryOrderDetail($(n).attr("orderSN"),$(n).parents(".info").find(".OrderTable"),$(n).parents(".info").find(".zp-modify-open"),n),$(n).parents(".modifyagain").hide(),setTimeout(function(){e.iScroll.refresh()},100)})});var n={},r=function(e){$(this).parents(".modifyagain").find(".original-con-left").find("em").eq(1).text(t.formatCurrency(e))},a=function(e){var t=$(this).parents(".modifyagain").find("table").children("tbody").children(),i=0;if(e)return i=Number($(this).parents(".modifyagain").find(".original-con-left").find("em").eq(1).text())-Number(e);for(var n=0;n<t.length;n++)0!=n&&(i=Number(i)+Number($(t[n]).find("td").eq(5).text()));return i};$("#eleSellArea").find(".modifyNumIpt").die(),$("#eleSellArea").find(".modifyNumIpt").live("keyup",function(e){var t=/^\d+$/,i=$(this).val();if(!t.test(i))return $(this).val("").focus(),!1;var n=$(this).val(),o=$(event.target).parents("tr").find("td").eq(2).text();$(event.target).parents("tr").find("td").eq(5).text(n*Number(o));var s=a.call(this);r.call(this,s)}),$("#eleSellArea").find(".zp-modify-open .product_add").die(),$("#eleSellArea").find(".zp-modify-open .product_add").live("click",function(){var e=$(this).prev().find("input"),i=$(this).parents("tr").find("td").eq(2).text(),n=e.val(),o=++n;e.val(o),$(this).parents("tr").find("td").eq(5).text(t.formatCurrency(o*Number(i)));var s=a.call(this);r.call(this,s)}),$("#eleSellArea").find(".zp-modify-open .product_del").die(),$("#eleSellArea").find(".zp-modify-open .product_del").live("click",function(){var e=$(this).next().find("input");if("text"==e.attr("type")){var i=$(this).parents("tr").find("td").eq(2).text(),n=e.val();if("1"==n)return!1;var o=--n;
e.val(o),$(this).parents("tr").find("td").eq(5).text(t.formatCurrency(o*Number(i)));var s=a.call(this);r.call(this,s)}}),$("#eleSellArea").find(".zp-modify-open .delete").die(),$("#eleSellArea").find(".zp-modify-open .delete").live("click",function(){n[$(this).attr("val")]=$(this).attr("val"),$(this).parents(".modifyagain").find(".modification").data("zp",n);var e=$(this).closest("tr").find("td").eq(5).text(),t=a.call(this,e);r.call(this,t),$(this).closest("tr").remove()})},getInterCode:function(i){var n=function(){for(var e=$(this).parents(".bounce-conthr").siblings(".big-form").find(".form-open-right").find("tr"),t=0,i=0;i<e.length;i++)0!=i&&(t+=Number($(e[i]).find("td").eq(1).text()));$(this).parents(".info").find(".original-con-right").find("em").eq(0).text(t),$(this).parents(".info").find(".original-con-right").find("em").eq(1).text(t)},r=function(){var t=$(this).parent().find(".lading").val(),i=!1;if(""==t)return $(this).parent().find(".prompt").show(),!1;$(this).parent().find(".prompt").hide();for(var r=$(this).parents(".bounce-conthr").siblings(".big-form").find(".OrderTable").find("tr"),a=$(this).parents(".bounce-conthr").siblings(".big-form").find(".form-open-right").find("tr"),o=0;o<r.length;o++)if(t==$(r[o]).find(".internationa").text()){i=!0;var s=$(a[o]).find(".product_num>span").text()||0;if(s=Number(s)+1,s>$(r[o]).find(".pnum").text())return e.showDialog("亲,扫码数量多了哦!"),!1;s==$(r[o]).find(".pnum").text()?$(a[o]).find("td").eq(0).text("已扫码"):$(a[o]).find("td").eq(0).text("正在扫码"),$(a[o]).find(".product_num").css("border","solid 1px #ccc"),$(a[o]).find(".proshow").show(),$(a[o]).find(".product_num>span").text(s);break}return $(this).parent().find(".lading").val(""),i?void n.call(this):(e.showDialog("请输入或扫描添加商品"),!1)};$(".confirmSM").die(),$(".confirmSM").live("click",function(){var e=this;t.validate({},$(this).parent(),function(t){t&&r.call(e)})}),$(".ladingSM").die(),$(".ladingSM").live("keydown",function(e){var i=this,n=e.keyCode;"13"==n&&t.validate({},$(this).parent(),function(e){e&&r.call(i)})})},searchProductToGrid:function(){var i=this,n=function(n){var r=this,a=n||$(this).parent().find(".lading").val();if(""==a)return $(this).parent().find(".prompt").show(),!1;$(this).parent().find(".prompt").hide();for(var o=a,s=!1,l=$(this).parents(".modifyagain").find("table").children("tbody").children(),d=0,c=0;c<l.length;c++)if(0!=c){if(o==$(l[c]).find(".internationa").text()){s=!0;var u=$(l[c]).find("td.num input").val();$(l[c]).find("td.num input").val(++u);var f=$(l[c]).find("td").eq(2).text();$(l[c]).find("td").eq(5).text(t.formatCurrency(Number(f)*Number(u))),$(this).parent().find(".lading").val("")}d+=Number($(l[c]).find("td").eq(5).text())}s&&$(this).parents(".modifyagain").find(".original-con-left").find("em").eq(1).text(t.formatCurrency(d));var h="";s||i.eleSellService.interCodeQueryProduct({interCode:o},function(n){i.proRes=n;var a=n&&n.product;if($(r).parent().find(".lading").val(""),!a)return e.showDialog("无此商品"),!1;h="<tr class='scanTr add_flag'><td data-productid='"+a.productId+"' class='guobiaoma'>"+a.interCode+"</td><td class='name'>"+a.productName+"</td><td>"+a.price+"</td><td class='num'><div class='product_calculate'><div class='product_del'><span style='cursor: pointer;'></span></div><div class='product_num'><input type='text'　class='modifyNumIpt' style='width:45px;text-align:center' value='1'/></div><div class='product_add'><span style='cursor: pointer;'></span></div></div></td><td>"+t.formatCurrency(a.oneMoney-a.lessMoney)+"</td><td>"+t.formatCurrency(a.price)+"</td><td>0.00</td><td><a class='delete' href='javascript:void(0);'>删除</a></td></tr>",$(r).parents(".modifyagain").find("table").children("tbody").append(h);for(var o=$(r).parents(".modifyagain").find("table").children("tbody").children(),s=0,l=0;l<o.length;l++)0!=l&&(s=Number(s)+Number($(o[l]).find("td").eq(5).text()));$(r).parents(".modifyagain").find(".original-con-left").find("em").eq(1).text(t.formatCurrency(s)),setTimeout(function(){e.iScroll.refresh()},200)})},r={comFunction:n};return $(".modifyagain .confirm").off(),$(".modifyagain .confirm").on("click",function(){var e=this;t.validate({},$(this).parent(),function(t){t&&n.call(e)})}),$(".modifyagain .lading").off(),$(".modifyagain .lading").keydown(function(e){var i=this,r=e.keyCode;"13"==r&&t.validate({},$(this).parent(),function(e){e&&n.call(i)})}),r},paging:function(e,t,i){var n=this;$("#Pagination_all").children().remove(),this.zpResult&&this.zpResult.totalRowCount&&$("#Pagination_all").pagination(this.zpResult.totalRowCount,{prev_text:"<",next_text:">",num_edge_entries:1,num_display_entries:2,callback:function(r){$.extend(!0,e,{currentPageNum:r+1}),n.queryList(e,t,i)},items_per_page:5})},tuihuanPaging:function(e,t,i){var n=this;$("#Pagination_all").children().remove(),this.tuihuanResult&&this.tuihuanResult.totalRowCount&&$("#Pagination_all").pagination(this.tuihuanResult.totalRowCount,{prev_text:"上一页",next_text:"下一页",num_edge_entries:1,num_display_entries:2,callback:function(r){$.extend(!0,e,{currentPageNum:r+1}),n.queryRefundOrExchangeList(e,t,i)},items_per_page:5})},initExpend:function(){var t=this;$(".sprang-right>input.sprig-input").die(),$(".sprang-right>input.sprig-input").live("click",function(){var i=$(this),n=$.trim($(this).val());$(this).parent().find(".info").slideToggle("normal",function(){"弹开"==n?i.val("挂起")&&i.css("background-color","#ea5414")&&i.parents(".rebounds").addClass("openBgColor"):i.val("弹开")&&i.css("background-color","#1bbc9b")&&i.parents(".rebounds").removeClass("openBgColor")}),"0"==$(this).attr("data-reader")&&($(this).attr("data-reader","1"),t.queryOrderDetail($(this).attr("orderSN"),$(this).parent().find(".OrderTable"),$(this).parent().find(".zp-modify-open"),this)),i.parent().find("div.info").find(".ladingSM").focus(),setTimeout(function(){e.iScroll.refresh(),"block"==i.parent().find(".info").css("display")&&e.iScroll.scrollToElement(i.parent().find(".info").get(0),800,!0,!0,IScroll.utils.ease.quadratic)},500)})},bindScanAddLess:function(){var t=function(){for(var e=$(this).parents(".scanTable").find("tr"),t=0,i=0;i<e.length;i++)0!=i&&(t+=Number($(e[i]).find("td").eq(1).text()));$(this).parents(".info").find(".original-con-right").find("em").eq(0).text(t),$(this).parents(".info").find(".original-con-right").find("em").eq(1).text(t)};$("#eleSellArea").find(".scanTable>table").find(".product_add span").off(),$("#eleSellArea").find(".scanTable>table").find(".product_add span").on("click",function(){var i=$(this).parents(".product_calculate").find(".product_num span"),n=i.text(),r=++n;return r>i.attr("data-productNum")?(e.showDialog("亲,扫码数量多了哦!"),!1):(i.text(r),r==i.attr("data-productNum")?$(this).parents(".scanTr").find("td").eq(0).text("已扫码"):$(this).parents(".scanTr").find("td").eq(0).text("正在扫码"),void t.call(this))}),$("#eleSellArea").find(".scanTable>table").find(".product_del span").off(),$("#eleSellArea").find(".scanTable>table").find(".product_del span").on("click",function(){var e=$(this).parents(".product_calculate").find(".product_num span"),i=e.text();if("0"==i)return!1;var n=--i;e.text(n),n==e.attr("data-productNum")?$(this).parents(".scanTr").find("td").eq(0).text("已扫码"):$(this).parents(".scanTr").find("td").eq(0).text("正在扫码"),t.call(this)})},quickMenu:function(){function i(e){$("#totalClass").html(""),$("#childContent").html("");var t="";t='<li><div class="list-item father-previous previous list-item-pers" data-value="'+e+'">上一页</div></li>',o.classResult[e-1]&&$.each(o.classResult[e-1],function(e,i){var n="<li><div data-parentCode="+i.id+' class="list-item list-item-pers add-food">'+i.name+"</div></li>";t+=n}),t+='<li><div class="list-item father-next next list-item-pers" data-value="'+e+'">下一页</div></li>',$("#totalClass").append(t),$("#show").find("#totalClass").children().eq(1).find("div.add-food").click()}function n(e){$("#childContent").html("");var t="";return 0!=o.childResult.length&&0!=o.childResult[e-1].length&&($.each(o.childResult[e-1],function(i,n){var r=o.childResult[e-1];if(i%5==0&&(t+=i>14?'<div class="distribution-body"><ul class="distribution-end">':i+5>r.length?'<div class="distribution-body"><ul class="distribution-end">':'<div class="distribution-body"><ul class="distribution">'),o.childResult[e-1]){var a='<li><div class="list-item foodItem" data-childInterCode="'+n.interCode+'"><p class="food-istem">'+n.productName+'</p><p class="money-col">￥'+n.shopPrice+"</p></div></li>";t+=a}18==r.length?(4!=i&&9!=i&&14!=i||(t+="</ul></div>"),i==o.childResult[e-1].length-1&&(t=t+'<li><div class="list-item previous list-item-pers food-pre" data-value="'+e+'">上一页</div></li>',17==i&&o.childResult[e]&&(t=t+'<li><div class="list-item previous list-item-pers food-next" data-value="'+e+'">下一页</div></li>'),t+="</ul></div>")):(4!=i&&9!=i&&14!=i||(t+="</ul></div>"),i==o.childResult[e-1].length-1&&("5"!=r.length&&"10"!=r.length&&"15"!=r.length||(t+='<div class="distribution-body"><ul class="distribution-end">'),t+="</ul></div>"))}),void $("#childContent").append(t))}function r(i,n){for(var r=i,o=!1,s=$("#"+a).find("table").children("tbody").children(),l=0,d=0;d<s.length;d++)if(0!=d){if(r==$(s[d]).find(".internationa").text()){o=!0;var c=$(s[d]).find("td.num input").val();$(s[d]).find("td.num input").val(++c);var u=$(s[d]).find("td").eq(2).text();$(s[d]).find("td").eq(5).text(t.formatCurrency(Number(u)*Number(c)))}var f=0;$(s[d]).find("td").eq(3).find(".modifyNumIpt").attr("data-old-value")&&(f=Number($(s[d]).find("td").eq(2).text())*Number($(s[d]).find("td").eq(3).find(".modifyNumIpt").attr("data-old-value"))),l=Number(l)+Number($(s[d]).find("td").eq(5).text())-f}$("#"+a).find(".original-con-left").find("em").eq(1).text(t.formatCurrency(l)),$("#"+a).find(".original-con-left").find("em").eq(2).text(t.formatCurrency(l));var h="";o||n.eleSellService.interCodeQueryProduct({interCode:r},function(i){n.proRes=i;var r=i&&i.product;if(!r)return e.showDialog("无此商品"),!1;h="<tr class='scanTr add_flag'><td data-productid='"+r.productId+"' class='internationa'>"+r.interCode+"</td><td class='name'>"+r.productName+"</td><td>"+r.price+"</td><td class='num'><div class='product_calculate'><div class='product_del'><span style='cursor: pointer;'></span></div><div class='product_num'><input type='text' class='modifyNumIpt' style='width:65px;text-align:center' value='1'></input></div><div class='product_add'><span style='cursor: pointer;'></span></div></div></td><td>"+t.formatCurrency(r.oneMoney-r.lessMoney)+"</td><td>"+t.formatCurrency(r.price)+"</td><td></td><td><a class='delete' href='javascript:void(0);'>删除</a></td></tr>",$("#"+a).find("table").children("tbody").append(h);for(var o=$("#"+a).find("table").children("tbody").children(),s=0,l=0;l<o.length;l++)0!=l&&(s=Number(s)+Number($(o[l]).find("td").eq(5).text()));$("#"+a).find(".original-con-left").find("em").eq(1).text(t.formatCurrency(s)),$("#"+a).find(".original-con-left").find("em").eq(2).text(t.formatCurrency(s))})}var a,o=this;$(".showOverlay").die(),$("#near-show").delegate(".father-previous","click",function(){var t=$(this).attr("data-value"),n=Number(t)-1;return 0==n?(e.showDialog("商品分类第一页"),!1):void i(n)}),$("#near-show").delegate(".father-next","click",function(){var t=$(this).attr("data-value"),n=Number(t)+1;return o.classResult[n-1]?void i(n):(e.showDialog("最后一页了"),!1)}),$("#near-show").delegate(".food-pre","click",function(){var t=$(this).attr("data-value"),i=Number(t)-1;return 0==i?(e.showDialog("第一页了"),!1):void n(i)}),$("#near-show").delegate(".food-next","click",function(){var e=$(this).attr("data-value"),t=Number(e)+1;n(t)}),$("#near-show").delegate(".add-food","click",function(){o.childResult=[];var e=$(this).attr("data-parentCode"),t={isApp:"1",isComboProduct:"0",isFood:"",quickTypeId:e};o.eleSellService.queryProductDetial(t,function(e){var t=e&&e.list||[];o.childResult=[];for(var i=0;i<t.length;i+=18)o.childResult.push(t.slice(i,i+18));n(1)})}),$("#near-show").delegate(".foodItem","click",function(){var e=$(this).attr("data-childInterCode");r(e,o)});o.userinfo&&o.userinfo.shop&&o.userinfo.shop.shopSn||"";$(".showOverlay").live("click",function(){a=$(this).attr("data-quickId");var e={isShow:"1",status:"0"};o.eleSellService.commodityClassification(e,function(e){var t=e&&e.list||[];o.classResult=[],o.childResult=[];for(var n=0;n<t.length;n+=5)o.classResult.push(t.slice(n,n+5));i(1)}),$("#show").show(),$("#near-show").css("left",(window.document.body.clientWidth-$("#near-show").width())/2+"px"),$("#near-show").css("top","1px")}),$("#showHidden").on("click",function(){$("#show").hide()}),this.dnd()},dnd:function(){function e(e){var t=document.getElementById(e),i=0,n=0;t.onmousedown=function(e){var r=e||event;return i=r.clientX-t.offsetLeft,n=r.clientY-t.offsetTop,document.onmousemove=function(e){var r=e||event,a=r.clientX-i,o=r.clientY-n;a<0?a=0:a>document.documentElement.clientWidth-t.offsetWidth&&(a=document.documentElement.clientWidth-t.offsetWidth),o<0?o=0:o>document.documentElement.clientHeight-t.offsetHeight&&(o=document.documentElement.clientHeight-t.offsetHeight),t.style.left=a+"px",t.style.top=o+"px"},document.onmouseup=function(){document.onmousemove=null,document.onmouseup=null,t.releaseCapture&&t.releaseCapture()},t.setCapture&&t.setCapture(),!1}}e("near-show")},eleSellPrint:function(){var e=this,t=function(t){e.eleSellService.printOrder({orderSn:t},function(e){console.log(JSON.stringify(e.obj)),API.PrintOrder(JSON.stringify(e.obj))})};$("#eleSellArea .print").die(),$("#eleSellArea .print").live("click",function(){var e=$(this).parents(".rebounds").children(":first-child").find(".orderSN").text();console.log(e),t(e),$(this).attr("disabled","disabled").attr("value","正在打印");var i=$(this);setTimeout(function(){i.removeAttr("disabled").attr("value","已打印")},3e3)})}},i}.apply(t,n),!(void 0!==r&&(e.exports=r))}]);